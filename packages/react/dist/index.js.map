{"version":3,"sources":["../src/index.tsx"],"sourcesContent":["import React from \"react\";\nimport {\n  MapFirstCore,\n  type MapFirstOptions,\n  type BaseMapFirstOptions,\n  type Property,\n  type MapLibreNamespace,\n  type GoogleMapsNamespace,\n  type MapboxNamespace,\n  type MapState,\n  type PropertyType,\n} from \"@mapfirst.ai/core\";\n\n// Import additional types for search functionality\ntype InitialRequestBody = {\n  initial?: boolean;\n  query?: string;\n  bounds?: {\n    sw: { lat: number; lng: number };\n    ne: { lat: number; lng: number };\n  };\n  filters?: any;\n  city?: string;\n  country?: string;\n  location_id?: number;\n  longitude?: number;\n  latitude?: number;\n  radius?: number;\n};\n\ntype SmartFilter = {\n  id: string;\n  label: string;\n  type:\n    | \"amenity\"\n    | \"hotelStyle\"\n    | \"priceRange\"\n    | \"minRating\"\n    | \"starRating\"\n    | \"primary_type\"\n    | \"transformed_query\"\n    | \"selected_restaurant_price_levels\";\n  value: string;\n  numericValue?: number;\n  priceRange?: {\n    min: number;\n    max?: number;\n  };\n  propertyType?: PropertyType;\n  priceLevels?: any[];\n};\n\n/**\n * Hook that creates a MapFirstCore instance that can be initialized before maps are ready.\n * Supports two-phase initialization: create SDK first, attach map later.\n * Returns the instance and reactive state that updates when SDK state changes.\n *\n * @example\n * ```tsx\n * // Phase 1: Create SDK instance with location data\n * const { mapFirst, state } = useMapFirstCore({\n *   initialLocationData: {\n *     city: \"New York\",\n *     country: \"United States\",\n *     currency: \"USD\"\n *   }\n * });\n *\n * // Access reactive state\n * console.log(state.properties); // Updates when properties change\n * console.log(state.isSearching); // Updates when search state changes\n *\n * // Phase 2: Attach map when ready\n * useEffect(() => {\n *   if (mapLibreInstance && mapFirst) {\n *     mapFirst.attachMap(mapLibreInstance, {\n *       platform: \"maplibre\",\n *       maplibregl: maplibregl,\n *       onMarkerClick: (marker) => console.log(marker)\n *     });\n *   }\n * }, [mapLibreInstance, mapFirst]);\n * ```\n */\nexport function useMapFirstCore(options: BaseMapFirstOptions) {\n  const instanceRef = React.useRef<MapFirstCore | null>(null);\n  const [state, setState] = React.useState<MapState | null>(null);\n\n  // Memoize the options to prevent recreation on every render\n  const optionsRef = React.useRef(options);\n  React.useEffect(() => {\n    optionsRef.current = options;\n  });\n\n  React.useEffect(() => {\n    const opts = optionsRef.current;\n\n    // Create MapFirstCore instance without map using adapter-driven options\n    const coreOptions: MapFirstOptions = {\n      adapter: null as any, // Will be set when attachMap is called\n      ...opts,\n      callbacks: {\n        ...opts.callbacks,\n        // Add internal callbacks to trigger React re-renders\n        onPropertiesChange: (properties) => {\n          setState((prev) => (prev ? { ...prev, properties } : null));\n          optionsRef.current.callbacks?.onPropertiesChange?.(properties);\n        },\n        onSelectedPropertyChange: (id) => {\n          setState((prev) =>\n            prev ? { ...prev, selectedPropertyId: id } : null\n          );\n          optionsRef.current.callbacks?.onSelectedPropertyChange?.(id);\n        },\n        onPrimaryTypeChange: (type) => {\n          setState((prev) => (prev ? { ...prev, primary: type } : null));\n          optionsRef.current.callbacks?.onPrimaryTypeChange?.(type);\n        },\n        onFiltersChange: (filters) => {\n          setState((prev) => (prev ? { ...prev, filters } : null));\n          optionsRef.current.callbacks?.onFiltersChange?.(filters);\n        },\n        onBoundsChange: (bounds) => {\n          setState((prev) => (prev ? { ...prev, bounds } : null));\n          optionsRef.current.callbacks?.onBoundsChange?.(bounds);\n        },\n        onCenterChange: (center, zoom) => {\n          setState((prev) => (prev ? { ...prev, center, zoom } : null));\n          optionsRef.current.callbacks?.onCenterChange?.(center, zoom);\n        },\n        onZoomChange: (zoom) => {\n          setState((prev) => (prev ? { ...prev, zoom } : null));\n          optionsRef.current.callbacks?.onZoomChange?.(zoom);\n        },\n        onActiveLocationChange: (location) => {\n          setState((prev) =>\n            prev ? { ...prev, activeLocation: location } : null\n          );\n          optionsRef.current.callbacks?.onActiveLocationChange?.(location);\n        },\n        onLoadingStateChange: (loading) => {\n          setState((prev) =>\n            prev ? { ...prev, initialLoading: loading } : null\n          );\n          optionsRef.current.callbacks?.onLoadingStateChange?.(loading);\n        },\n        onSearchingStateChange: (searching) => {\n          setState((prev) =>\n            prev ? { ...prev, isSearching: searching } : null\n          );\n          optionsRef.current.callbacks?.onSearchingStateChange?.(searching);\n        },\n      },\n    };\n\n    const instance = new MapFirstCore(coreOptions);\n    instanceRef.current = instance;\n\n    // Initialize state from SDK\n    setState(instance.getState());\n\n    return () => {\n      instance.destroy();\n      instanceRef.current = null;\n      setState(null);\n    };\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n\n  return { mapFirst: instanceRef.current, state };\n}\n\n/**\n * Hook to access reactive properties from MapFirst SDK.\n * Returns the current properties array that updates when properties change.\n *\n * @example\n * ```tsx\n * const { mapFirst } = useMapFirstCore({ ... });\n * const properties = useMapFirstProperties(mapFirst);\n *\n * return <div>Found {properties.length} properties</div>;\n * ```\n */\nexport function useMapFirstProperties(\n  mapFirst: MapFirstCore | null\n): Property[] {\n  const [properties, setProperties] = React.useState<Property[]>([]);\n\n  React.useEffect(() => {\n    if (!mapFirst) {\n      setProperties([]);\n      return;\n    }\n\n    // Initialize with current state\n    setProperties(mapFirst.getState().properties);\n  }, [mapFirst]);\n\n  return properties;\n}\n\n/**\n * Hook to access the selected property ID from MapFirst SDK.\n * Returns the currently selected property ID that updates when selection changes.\n *\n * @example\n * ```tsx\n * const { mapFirst } = useMapFirstCore({ ... });\n * const selectedId = useMapFirstSelectedProperty(mapFirst);\n *\n * return <div>Selected: {selectedId || 'None'}</div>;\n * ```\n */\nexport function useMapFirstSelectedProperty(\n  mapFirst: MapFirstCore | null\n): number | null {\n  const [selectedId, setSelectedId] = React.useState<number | null>(null);\n\n  React.useEffect(() => {\n    if (!mapFirst) {\n      setSelectedId(null);\n      return;\n    }\n\n    // Initialize with current state\n    setSelectedId(mapFirst.getState().selectedPropertyId);\n  }, [mapFirst]);\n\n  return selectedId;\n}\n\n/**\n * Hook to access and control the primary property type.\n * Returns the current primary type and a setter function.\n *\n * @example\n * ```tsx\n * const { mapFirst } = useMapFirstCore({ ... });\n * const [primaryType, setPrimaryType] = usePrimaryType(mapFirst);\n *\n * return (\n *   <select value={primaryType} onChange={(e) => setPrimaryType(e.target.value as PropertyType)}>\n *     <option value=\"Accommodation\">Hotels</option>\n *     <option value=\"Restaurant\">Restaurants</option>\n *     <option value=\"Attraction\">Attractions</option>\n *   </select>\n * );\n * ```\n */\nexport function usePrimaryType(\n  mapFirst: MapFirstCore | null\n): [PropertyType, (type: PropertyType) => void] {\n  const [primaryType, setPrimaryTypeState] =\n    React.useState<PropertyType>(\"Accommodation\");\n\n  React.useEffect(() => {\n    if (!mapFirst) {\n      setPrimaryTypeState(\"Accommodation\");\n      return;\n    }\n\n    // Initialize with current state\n    setPrimaryTypeState(mapFirst.getState().primary);\n  }, [mapFirst]);\n\n  const setPrimaryType = React.useCallback(\n    (type: PropertyType) => {\n      if (mapFirst) {\n        mapFirst.setPrimaryType(type);\n        setPrimaryTypeState(type);\n      }\n    },\n    [mapFirst]\n  );\n\n  return [primaryType, setPrimaryType];\n}\n\n/**\n * Hook to access and control the selected marker.\n * Returns the current selected marker ID and a setter function.\n * Note: This hook requires the MapFirstCore instance. For simpler usage with reactive updates,\n * use state.selectedPropertyId from useMapFirstCore instead.\n *\n * @example\n * ```tsx\n * const { mapFirst } = useMapFirstCore({ ... });\n * const [selectedMarker, setSelectedMarker] = useSelectedMarker(mapFirst);\n *\n * return (\n *   <div>\n *     <p>Selected: {selectedMarker || 'None'}</p>\n *     <button onClick={() => setSelectedMarker(null)}>Clear Selection</button>\n *   </div>\n * );\n * ```\n */\nexport function useSelectedMarker(\n  mapFirst: MapFirstCore | null\n): [number | null, (id: number | null) => void] {\n  const [selectedMarker, setSelectedMarkerState] = React.useState<\n    number | null\n  >(null);\n\n  React.useEffect(() => {\n    if (!mapFirst) {\n      setSelectedMarkerState(null);\n      return;\n    }\n\n    // Initialize with current state\n    setSelectedMarkerState(mapFirst.getState().selectedPropertyId);\n  }, [mapFirst]);\n\n  const setSelectedMarker = React.useCallback(\n    (id: number | null) => {\n      if (mapFirst) {\n        mapFirst.setSelectedMarker(id);\n      }\n    },\n    [mapFirst]\n  );\n\n  return [selectedMarker, setSelectedMarker];\n}\n\n/**\n * Hook for MapLibre GL JS integration.\n * Automatically attaches the map when both the SDK instance and map are available.\n *\n * @example\n * ```tsx\n * const { mapFirst, state } = useMapFirstCore({ initialLocationData: { city: \"Paris\", country: \"France\" } });\n * const mapRef = useRef<maplibregl.Map | null>(null);\n *\n * useMapLibreAttachment({\n *   mapFirst,\n *   map: mapRef.current,\n *   maplibregl: maplibregl,\n *   onMarkerClick: (marker) => console.log(marker)\n * });\n *\n * // Access reactive state\n * console.log(state?.properties);\n * ```\n */\nexport function useMapLibreAttachment({\n  mapFirst,\n  map,\n  maplibregl,\n  onMarkerClick,\n}: {\n  mapFirst: MapFirstCore | null;\n  map: any | null;\n  maplibregl: MapLibreNamespace;\n  onMarkerClick?: (marker: Property) => void;\n}) {\n  const attachedRef = React.useRef(false);\n\n  React.useEffect(() => {\n    if (!mapFirst || !map || attachedRef.current) {\n      return;\n    }\n\n    mapFirst.attachMap(map, {\n      platform: \"maplibre\",\n      maplibregl,\n      onMarkerClick,\n    });\n\n    attachedRef.current = true;\n  }, [mapFirst, map, maplibregl, onMarkerClick]);\n}\n\n/**\n * Hook for Google Maps integration.\n * Automatically attaches the map when both the SDK instance and map are available.\n *\n * @example\n * ```tsx\n * const { mapFirst, state } = useMapFirstCore({ initialLocationData: { city: \"Tokyo\", country: \"Japan\" } });\n * const mapRef = useRef<google.maps.Map | null>(null);\n *\n * useGoogleMapsAttachment({\n *   mapFirst,\n *   map: mapRef.current,\n *   google: window.google,\n *   onMarkerClick: (marker) => console.log(marker)\n * });\n *\n * // Access reactive state\n * console.log(state?.isSearching);\n * ```\n */\nexport function useGoogleMapsAttachment({\n  mapFirst,\n  map,\n  google,\n  onMarkerClick,\n}: {\n  mapFirst: MapFirstCore | null;\n  map: any | null;\n  google: GoogleMapsNamespace;\n  onMarkerClick?: (marker: Property) => void;\n}) {\n  const attachedRef = React.useRef(false);\n\n  React.useEffect(() => {\n    if (!mapFirst || !map || attachedRef.current) {\n      return;\n    }\n\n    mapFirst.attachMap(map, {\n      platform: \"google\",\n      google,\n      onMarkerClick,\n    });\n\n    attachedRef.current = true;\n  }, [mapFirst, map, google, onMarkerClick]);\n}\n\n/**\n * Hook for Mapbox GL JS integration.\n * Automatically attaches the map when both the SDK instance and map are available.\n *\n * @example\n * ```tsx\n * const { mapFirst, state } = useMapFirstCore({ initialLocationData: { city: \"London\", country: \"United Kingdom\" } });\n * const mapRef = useRef<mapboxgl.Map | null>(null);\n *\n * useMapboxAttachment({\n *   mapFirst,\n *   map: mapRef.current,\n *   mapboxgl: mapboxgl,\n *   onMarkerClick: (marker) => console.log(marker)\n * });\n *\n * // Access reactive state\n * console.log(state?.filters);\n * ```\n */\nexport function useMapboxAttachment({\n  mapFirst,\n  map,\n  mapboxgl,\n  onMarkerClick,\n}: {\n  mapFirst: MapFirstCore | null;\n  map: any | null;\n  mapboxgl: MapboxNamespace;\n  onMarkerClick?: (marker: Property) => void;\n}) {\n  const attachedRef = React.useRef(false);\n\n  React.useEffect(() => {\n    if (!mapFirst || !map || attachedRef.current) {\n      return;\n    }\n\n    mapFirst.attachMap(map, {\n      platform: \"mapbox\",\n      mapboxgl,\n      onMarkerClick,\n    });\n\n    attachedRef.current = true;\n  }, [mapFirst, map, mapboxgl, onMarkerClick]);\n}\n\n/**\n * Legacy hook that creates the MapFirstCore instance with a map immediately.\n * Use useMapFirstCore + useMap*Attachment hooks for better control.\n *\n * @deprecated Use useMapFirstCore and platform-specific attachment hooks instead\n */\nexport function useMapFirst(options: MapFirstOptions | null) {\n  const instanceRef = React.useRef<MapFirstCore | null>(null);\n\n  React.useEffect(() => {\n    if (!options) {\n      return undefined;\n    }\n    const instance = new MapFirstCore(options);\n    instanceRef.current = instance;\n\n    return () => {\n      instance.destroy();\n      instanceRef.current = null;\n    };\n  }, [options]);\n\n  return instanceRef;\n}\n\n/**\n * Hook to run properties search with the MapFirst SDK.\n * Returns a function to trigger the search and loading state.\n *\n * @example\n * ```tsx\n * const { mapFirst } = useMapFirstCore({ ... });\n * const { search, isLoading, error } = usePropertiesSearch(mapFirst);\n *\n * const handleSearch = async () => {\n *   await search({\n *     body: {\n *       city: \"Paris\",\n *       country: \"France\",\n *       filters: {\n *         checkIn: new Date(),\n *         checkOut: new Date(Date.now() + 86400000),\n *         numAdults: 2,\n *         numRooms: 1\n *       }\n *     }\n *   });\n * };\n * ```\n */\nexport function usePropertiesSearch(mapFirst: MapFirstCore | null) {\n  const [isLoading, setIsLoading] = React.useState(false);\n  const [error, setError] = React.useState<Error | null>(null);\n\n  const search = React.useCallback(\n    async (options: {\n      body: InitialRequestBody;\n      beforeApplyProperties?: (data: any) => {\n        price?: any;\n        limit?: number;\n      };\n      smartFiltersClearable?: boolean;\n    }) => {\n      if (!mapFirst) {\n        const err = new Error(\"MapFirst instance not available\");\n        setError(err);\n        throw err;\n      }\n\n      setIsLoading(true);\n      setError(null);\n\n      try {\n        const result = await mapFirst.runPropertiesSearch({\n          ...options,\n          onError: (err) => {\n            const error = err instanceof Error ? err : new Error(String(err));\n            setError(error);\n          },\n        });\n        return result;\n      } catch (err) {\n        const error = err instanceof Error ? err : new Error(String(err));\n        setError(error);\n        throw error;\n      } finally {\n        setIsLoading(false);\n      }\n    },\n    [mapFirst]\n  );\n\n  return { search, isLoading, error };\n}\n\n/**\n * Hook to run smart filter search with the MapFirst SDK.\n * Returns a function to trigger the search and loading state.\n *\n * @example\n * ```tsx\n * const { mapFirst } = useMapFirstCore({ ... });\n * const { search, isLoading, error } = useSmartFilterSearch(mapFirst);\n *\n * const handleSearch = async () => {\n *   await search({\n *     query: \"hotels near beach with pool\"\n *   });\n * };\n *\n * // Or with filters\n * const handleFilterSearch = async () => {\n *   await search({\n *     filters: [\n *       { id: \"pool\", label: \"Pool\", type: \"amenity\", value: \"pool\" },\n *       { id: \"4star\", label: \"4 Star\", type: \"starRating\", value: \"4\", numericValue: 4 }\n *     ]\n *   });\n * };\n * ```\n */\nexport function useSmartFilterSearch(mapFirst: MapFirstCore | null) {\n  const [isLoading, setIsLoading] = React.useState(false);\n  const [error, setError] = React.useState<Error | null>(null);\n\n  const search = React.useCallback(\n    async (options: {\n      query?: string;\n      filters?: SmartFilter[];\n      onProcessFilters?: (\n        filters: any,\n        location_id?: number\n      ) => {\n        smartFilters?: SmartFilter[];\n        price?: any;\n        limit?: number;\n        language?: string;\n      };\n    }) => {\n      if (!mapFirst) {\n        const err = new Error(\"MapFirst instance not available\");\n        setError(err);\n        throw err;\n      }\n\n      setIsLoading(true);\n      setError(null);\n\n      try {\n        const result = await mapFirst.runSmartFilterSearch({\n          ...options,\n          onError: (err) => {\n            const error = err instanceof Error ? err : new Error(String(err));\n            setError(error);\n          },\n        });\n        return result;\n      } catch (err) {\n        const error = err instanceof Error ? err : new Error(String(err));\n        setError(error);\n        throw error;\n      } finally {\n        setIsLoading(false);\n      }\n    },\n    [mapFirst]\n  );\n\n  return { search, isLoading, error };\n}\n\n/**\n * Helper component that simply renders the markers it receives so non-React environments\n * can verify data flows before wiring the SDK into a map.\n */\nexport function MarkerDebugList({ markers }: { markers: Property[] }) {\n  return (\n    <div style={{ fontFamily: \"sans-serif\", fontSize: 14 }}>\n      <strong>Markers</strong>\n      <ul>\n        {markers.map((marker) => (\n          <li key={String(marker.tripadvisor_id)}>\n            {marker.name} â€” {marker.location?.lat?.toFixed(3) ?? \"n/a\"},{\" \"}\n            {marker.location?.lon?.toFixed(3) ?? \"n/a\"}\n          </li>\n        ))}\n      </ul>\n    </div>\n  );\n}\n"],"mappings":"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","names":["index_exports","__export","MarkerDebugList","useGoogleMapsAttachment","useMapFirst","useMapFirstCore","useMapFirstProperties","useMapFirstSelectedProperty","useMapLibreAttachment","useMapboxAttachment","usePrimaryType","usePropertiesSearch","useSelectedMarker","useSmartFilterSearch","__toCommonJS","import_react","import_core","import_jsx_runtime","options","instanceRef","React","state","setState","optionsRef","opts","coreOptions","properties","_a","_b","prev","id","type","filters","bounds","center","zoom","location","loading","searching","instance","mapFirst","setProperties","selectedId","setSelectedId","primaryType","setPrimaryTypeState","setPrimaryType","selectedMarker","setSelectedMarkerState","setSelectedMarker","map","maplibregl","onMarkerClick","attachedRef","google","mapboxgl","isLoading","setIsLoading","error","setError","err","markers","marker","_c","_d","_e","_f"]}