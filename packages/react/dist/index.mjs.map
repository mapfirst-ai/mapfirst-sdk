{"version":3,"sources":["../src/index.tsx"],"sourcesContent":["import React from \"react\";\nimport {\n  MapFirstCore,\n  type MapFirstOptions,\n  type BaseMapFirstOptions,\n  type Property,\n  type MapLibreNamespace,\n  type GoogleMapsNamespace,\n  type MapboxNamespace,\n  type MapState,\n  type PropertyType,\n} from \"@mapfirst.ai/core\";\n\n// Import additional types for search functionality\ntype InitialRequestBody = {\n  initial?: boolean;\n  query?: string;\n  bounds?: {\n    sw: { lat: number; lng: number };\n    ne: { lat: number; lng: number };\n  };\n  filters?: any;\n  city?: string;\n  country?: string;\n  location_id?: number;\n  longitude?: number;\n  latitude?: number;\n  radius?: number;\n};\n\ntype SmartFilter = {\n  id: string;\n  label: string;\n  type:\n    | \"amenity\"\n    | \"hotelStyle\"\n    | \"priceRange\"\n    | \"minRating\"\n    | \"starRating\"\n    | \"primary_type\"\n    | \"transformed_query\"\n    | \"selected_restaurant_price_levels\";\n  value: string;\n  numericValue?: number;\n  priceRange?: {\n    min: number;\n    max?: number;\n  };\n  propertyType?: PropertyType;\n  priceLevels?: any[];\n};\n\n/**\n * Hook that creates a MapFirstCore instance that can be initialized before maps are ready.\n * Supports two-phase initialization: create SDK first, attach map later.\n * Returns the instance and reactive state that updates when SDK state changes.\n *\n * @example\n * ```tsx\n * // Phase 1: Create SDK instance with location data\n * const { mapFirst, state } = useMapFirstCore({\n *   initialLocationData: {\n *     city: \"New York\",\n *     country: \"United States\",\n *     currency: \"USD\"\n *   }\n * });\n *\n * // Access reactive state\n * console.log(state.properties); // Updates when properties change\n * console.log(state.isSearching); // Updates when search state changes\n *\n * // Phase 2: Attach map when ready\n * useEffect(() => {\n *   if (mapLibreInstance && mapFirst) {\n *     mapFirst.attachMap(mapLibreInstance, {\n *       platform: \"maplibre\",\n *       maplibregl: maplibregl,\n *       onMarkerClick: (marker) => console.log(marker)\n *     });\n *   }\n * }, [mapLibreInstance, mapFirst]);\n * ```\n */\nexport function useMapFirstCore(options: BaseMapFirstOptions) {\n  const instanceRef = React.useRef<MapFirstCore | null>(null);\n  const [state, setState] = React.useState<MapState | null>(null);\n\n  // Memoize the options to prevent recreation on every render\n  const optionsRef = React.useRef(options);\n  React.useEffect(() => {\n    optionsRef.current = options;\n  });\n\n  React.useEffect(() => {\n    const opts = optionsRef.current;\n\n    // Create MapFirstCore instance without map using adapter-driven options\n    const coreOptions: MapFirstOptions = {\n      adapter: null as any, // Will be set when attachMap is called\n      ...opts,\n      callbacks: {\n        ...opts.callbacks,\n        // Add internal callbacks to trigger React re-renders\n        onPropertiesChange: (properties) => {\n          setState((prev) => (prev ? { ...prev, properties } : null));\n          optionsRef.current.callbacks?.onPropertiesChange?.(properties);\n        },\n        onSelectedPropertyChange: (id) => {\n          setState((prev) =>\n            prev ? { ...prev, selectedPropertyId: id } : null\n          );\n          optionsRef.current.callbacks?.onSelectedPropertyChange?.(id);\n        },\n        onPrimaryTypeChange: (type) => {\n          setState((prev) => (prev ? { ...prev, primary: type } : null));\n          optionsRef.current.callbacks?.onPrimaryTypeChange?.(type);\n        },\n        onFiltersChange: (filters) => {\n          setState((prev) => (prev ? { ...prev, filters } : null));\n          optionsRef.current.callbacks?.onFiltersChange?.(filters);\n        },\n        onBoundsChange: (bounds) => {\n          setState((prev) => (prev ? { ...prev, bounds } : null));\n          optionsRef.current.callbacks?.onBoundsChange?.(bounds);\n        },\n        onCenterChange: (center, zoom) => {\n          setState((prev) => (prev ? { ...prev, center, zoom } : null));\n          optionsRef.current.callbacks?.onCenterChange?.(center, zoom);\n        },\n        onZoomChange: (zoom) => {\n          setState((prev) => (prev ? { ...prev, zoom } : null));\n          optionsRef.current.callbacks?.onZoomChange?.(zoom);\n        },\n        onActiveLocationChange: (location) => {\n          setState((prev) =>\n            prev ? { ...prev, activeLocation: location } : null\n          );\n          optionsRef.current.callbacks?.onActiveLocationChange?.(location);\n        },\n        onLoadingStateChange: (loading) => {\n          setState((prev) =>\n            prev ? { ...prev, initialLoading: loading } : null\n          );\n          optionsRef.current.callbacks?.onLoadingStateChange?.(loading);\n        },\n        onSearchingStateChange: (searching) => {\n          setState((prev) =>\n            prev ? { ...prev, isSearching: searching } : null\n          );\n          optionsRef.current.callbacks?.onSearchingStateChange?.(searching);\n        },\n      },\n    };\n\n    const instance = new MapFirstCore(coreOptions);\n    instanceRef.current = instance;\n\n    // Initialize state from SDK\n    setState(instance.getState());\n\n    return () => {\n      instance.destroy();\n      instanceRef.current = null;\n      setState(null);\n    };\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n\n  return { mapFirst: instanceRef.current, state };\n}\n\n/**\n * Hook to access reactive properties from MapFirst SDK.\n * Returns the current properties array that updates when properties change.\n *\n * @example\n * ```tsx\n * const { mapFirst } = useMapFirstCore({ ... });\n * const properties = useMapFirstProperties(mapFirst);\n *\n * return <div>Found {properties.length} properties</div>;\n * ```\n */\nexport function useMapFirstProperties(\n  mapFirst: MapFirstCore | null\n): Property[] {\n  const [properties, setProperties] = React.useState<Property[]>([]);\n\n  React.useEffect(() => {\n    if (!mapFirst) {\n      setProperties([]);\n      return;\n    }\n\n    // Initialize with current state\n    setProperties(mapFirst.getState().properties);\n  }, [mapFirst]);\n\n  return properties;\n}\n\n/**\n * Hook to access the selected property ID from MapFirst SDK.\n * Returns the currently selected property ID that updates when selection changes.\n *\n * @example\n * ```tsx\n * const { mapFirst } = useMapFirstCore({ ... });\n * const selectedId = useMapFirstSelectedProperty(mapFirst);\n *\n * return <div>Selected: {selectedId || 'None'}</div>;\n * ```\n */\nexport function useMapFirstSelectedProperty(\n  mapFirst: MapFirstCore | null\n): number | null {\n  const [selectedId, setSelectedId] = React.useState<number | null>(null);\n\n  React.useEffect(() => {\n    if (!mapFirst) {\n      setSelectedId(null);\n      return;\n    }\n\n    // Initialize with current state\n    setSelectedId(mapFirst.getState().selectedPropertyId);\n  }, [mapFirst]);\n\n  return selectedId;\n}\n\n/**\n * Hook to access and control the primary property type.\n * Returns the current primary type and a setter function.\n *\n * @example\n * ```tsx\n * const { mapFirst } = useMapFirstCore({ ... });\n * const [primaryType, setPrimaryType] = usePrimaryType(mapFirst);\n *\n * return (\n *   <select value={primaryType} onChange={(e) => setPrimaryType(e.target.value as PropertyType)}>\n *     <option value=\"Accommodation\">Hotels</option>\n *     <option value=\"Restaurant\">Restaurants</option>\n *     <option value=\"Attraction\">Attractions</option>\n *   </select>\n * );\n * ```\n */\nexport function usePrimaryType(\n  mapFirst: MapFirstCore | null\n): [PropertyType, (type: PropertyType) => void] {\n  const [primaryType, setPrimaryTypeState] =\n    React.useState<PropertyType>(\"Accommodation\");\n\n  React.useEffect(() => {\n    if (!mapFirst) {\n      setPrimaryTypeState(\"Accommodation\");\n      return;\n    }\n\n    // Initialize with current state\n    setPrimaryTypeState(mapFirst.getState().primary);\n  }, [mapFirst]);\n\n  const setPrimaryType = React.useCallback(\n    (type: PropertyType) => {\n      if (mapFirst) {\n        mapFirst.setPrimaryType(type);\n        setPrimaryTypeState(type);\n      }\n    },\n    [mapFirst]\n  );\n\n  return [primaryType, setPrimaryType];\n}\n\n/**\n * Hook to access and control the selected marker.\n * Returns the current selected marker ID and a setter function.\n * Note: This hook requires the MapFirstCore instance. For simpler usage with reactive updates,\n * use state.selectedPropertyId from useMapFirstCore instead.\n *\n * @example\n * ```tsx\n * const { mapFirst } = useMapFirstCore({ ... });\n * const [selectedMarker, setSelectedMarker] = useSelectedMarker(mapFirst);\n *\n * return (\n *   <div>\n *     <p>Selected: {selectedMarker || 'None'}</p>\n *     <button onClick={() => setSelectedMarker(null)}>Clear Selection</button>\n *   </div>\n * );\n * ```\n */\nexport function useSelectedMarker(\n  mapFirst: MapFirstCore | null\n): [number | null, (id: number | null) => void] {\n  const [selectedMarker, setSelectedMarkerState] = React.useState<\n    number | null\n  >(null);\n\n  React.useEffect(() => {\n    if (!mapFirst) {\n      setSelectedMarkerState(null);\n      return;\n    }\n\n    // Initialize with current state\n    setSelectedMarkerState(mapFirst.getState().selectedPropertyId);\n  }, [mapFirst]);\n\n  const setSelectedMarker = React.useCallback(\n    (id: number | null) => {\n      if (mapFirst) {\n        mapFirst.setSelectedMarker(id);\n      }\n    },\n    [mapFirst]\n  );\n\n  return [selectedMarker, setSelectedMarker];\n}\n\n/**\n * Hook for MapLibre GL JS integration.\n * Automatically attaches the map when both the SDK instance and map are available.\n *\n * @example\n * ```tsx\n * const { mapFirst, state } = useMapFirstCore({ initialLocationData: { city: \"Paris\", country: \"France\" } });\n * const mapRef = useRef<maplibregl.Map | null>(null);\n *\n * useMapLibreAttachment({\n *   mapFirst,\n *   map: mapRef.current,\n *   maplibregl: maplibregl,\n *   onMarkerClick: (marker) => console.log(marker)\n * });\n *\n * // Access reactive state\n * console.log(state?.properties);\n * ```\n */\nexport function useMapLibreAttachment({\n  mapFirst,\n  map,\n  maplibregl,\n  onMarkerClick,\n}: {\n  mapFirst: MapFirstCore | null;\n  map: any | null;\n  maplibregl: MapLibreNamespace;\n  onMarkerClick?: (marker: Property) => void;\n}) {\n  const attachedRef = React.useRef(false);\n\n  React.useEffect(() => {\n    if (!mapFirst || !map || attachedRef.current) {\n      return;\n    }\n\n    mapFirst.attachMap(map, {\n      platform: \"maplibre\",\n      maplibregl,\n      onMarkerClick,\n    });\n\n    attachedRef.current = true;\n  }, [mapFirst, map, maplibregl, onMarkerClick]);\n}\n\n/**\n * Hook for Google Maps integration.\n * Automatically attaches the map when both the SDK instance and map are available.\n *\n * @example\n * ```tsx\n * const { mapFirst, state } = useMapFirstCore({ initialLocationData: { city: \"Tokyo\", country: \"Japan\" } });\n * const mapRef = useRef<google.maps.Map | null>(null);\n *\n * useGoogleMapsAttachment({\n *   mapFirst,\n *   map: mapRef.current,\n *   google: window.google,\n *   onMarkerClick: (marker) => console.log(marker)\n * });\n *\n * // Access reactive state\n * console.log(state?.isSearching);\n * ```\n */\nexport function useGoogleMapsAttachment({\n  mapFirst,\n  map,\n  google,\n  onMarkerClick,\n}: {\n  mapFirst: MapFirstCore | null;\n  map: any | null;\n  google: GoogleMapsNamespace;\n  onMarkerClick?: (marker: Property) => void;\n}) {\n  const attachedRef = React.useRef(false);\n\n  React.useEffect(() => {\n    if (!mapFirst || !map || attachedRef.current) {\n      return;\n    }\n\n    mapFirst.attachMap(map, {\n      platform: \"google\",\n      google,\n      onMarkerClick,\n    });\n\n    attachedRef.current = true;\n  }, [mapFirst, map, google, onMarkerClick]);\n}\n\n/**\n * Hook for Mapbox GL JS integration.\n * Automatically attaches the map when both the SDK instance and map are available.\n *\n * @example\n * ```tsx\n * const { mapFirst, state } = useMapFirstCore({ initialLocationData: { city: \"London\", country: \"United Kingdom\" } });\n * const mapRef = useRef<mapboxgl.Map | null>(null);\n *\n * useMapboxAttachment({\n *   mapFirst,\n *   map: mapRef.current,\n *   mapboxgl: mapboxgl,\n *   onMarkerClick: (marker) => console.log(marker)\n * });\n *\n * // Access reactive state\n * console.log(state?.filters);\n * ```\n */\nexport function useMapboxAttachment({\n  mapFirst,\n  map,\n  mapboxgl,\n  onMarkerClick,\n}: {\n  mapFirst: MapFirstCore | null;\n  map: any | null;\n  mapboxgl: MapboxNamespace;\n  onMarkerClick?: (marker: Property) => void;\n}) {\n  const attachedRef = React.useRef(false);\n\n  React.useEffect(() => {\n    if (!mapFirst || !map || attachedRef.current) {\n      return;\n    }\n\n    mapFirst.attachMap(map, {\n      platform: \"mapbox\",\n      mapboxgl,\n      onMarkerClick,\n    });\n\n    attachedRef.current = true;\n  }, [mapFirst, map, mapboxgl, onMarkerClick]);\n}\n\n/**\n * Legacy hook that creates the MapFirstCore instance with a map immediately.\n * Use useMapFirstCore + useMap*Attachment hooks for better control.\n *\n * @deprecated Use useMapFirstCore and platform-specific attachment hooks instead\n */\nexport function useMapFirst(options: MapFirstOptions | null) {\n  const instanceRef = React.useRef<MapFirstCore | null>(null);\n\n  React.useEffect(() => {\n    if (!options) {\n      return undefined;\n    }\n    const instance = new MapFirstCore(options);\n    instanceRef.current = instance;\n\n    return () => {\n      instance.destroy();\n      instanceRef.current = null;\n    };\n  }, [options]);\n\n  return instanceRef;\n}\n\n/**\n * Hook to run properties search with the MapFirst SDK.\n * Returns a function to trigger the search and loading state.\n *\n * @example\n * ```tsx\n * const { mapFirst } = useMapFirstCore({ ... });\n * const { search, isLoading, error } = usePropertiesSearch(mapFirst);\n *\n * const handleSearch = async () => {\n *   await search({\n *     body: {\n *       city: \"Paris\",\n *       country: \"France\",\n *       filters: {\n *         checkIn: new Date(),\n *         checkOut: new Date(Date.now() + 86400000),\n *         numAdults: 2,\n *         numRooms: 1\n *       }\n *     }\n *   });\n * };\n * ```\n */\nexport function usePropertiesSearch(mapFirst: MapFirstCore | null) {\n  const [isLoading, setIsLoading] = React.useState(false);\n  const [error, setError] = React.useState<Error | null>(null);\n\n  const search = React.useCallback(\n    async (options: {\n      body: InitialRequestBody;\n      beforeApplyProperties?: (data: any) => {\n        price?: any;\n        limit?: number;\n      };\n      smartFiltersClearable?: boolean;\n    }) => {\n      if (!mapFirst) {\n        const err = new Error(\"MapFirst instance not available\");\n        setError(err);\n        throw err;\n      }\n\n      setIsLoading(true);\n      setError(null);\n\n      try {\n        const result = await mapFirst.runPropertiesSearch({\n          ...options,\n          onError: (err) => {\n            const error = err instanceof Error ? err : new Error(String(err));\n            setError(error);\n          },\n        });\n        return result;\n      } catch (err) {\n        const error = err instanceof Error ? err : new Error(String(err));\n        setError(error);\n        throw error;\n      } finally {\n        setIsLoading(false);\n      }\n    },\n    [mapFirst]\n  );\n\n  return { search, isLoading, error };\n}\n\n/**\n * Hook to run smart filter search with the MapFirst SDK.\n * Returns a function to trigger the search and loading state.\n *\n * @example\n * ```tsx\n * const { mapFirst } = useMapFirstCore({ ... });\n * const { search, isLoading, error } = useSmartFilterSearch(mapFirst);\n *\n * const handleSearch = async () => {\n *   await search({\n *     query: \"hotels near beach with pool\"\n *   });\n * };\n *\n * // Or with filters\n * const handleFilterSearch = async () => {\n *   await search({\n *     filters: [\n *       { id: \"pool\", label: \"Pool\", type: \"amenity\", value: \"pool\" },\n *       { id: \"4star\", label: \"4 Star\", type: \"starRating\", value: \"4\", numericValue: 4 }\n *     ]\n *   });\n * };\n * ```\n */\nexport function useSmartFilterSearch(mapFirst: MapFirstCore | null) {\n  const [isLoading, setIsLoading] = React.useState(false);\n  const [error, setError] = React.useState<Error | null>(null);\n\n  const search = React.useCallback(\n    async (options: {\n      query?: string;\n      filters?: SmartFilter[];\n      onProcessFilters?: (\n        filters: any,\n        location_id?: number\n      ) => {\n        smartFilters?: SmartFilter[];\n        price?: any;\n        limit?: number;\n        language?: string;\n      };\n    }) => {\n      if (!mapFirst) {\n        const err = new Error(\"MapFirst instance not available\");\n        setError(err);\n        throw err;\n      }\n\n      setIsLoading(true);\n      setError(null);\n\n      try {\n        const result = await mapFirst.runSmartFilterSearch({\n          ...options,\n          onError: (err) => {\n            const error = err instanceof Error ? err : new Error(String(err));\n            setError(error);\n          },\n        });\n        return result;\n      } catch (err) {\n        const error = err instanceof Error ? err : new Error(String(err));\n        setError(error);\n        throw error;\n      } finally {\n        setIsLoading(false);\n      }\n    },\n    [mapFirst]\n  );\n\n  return { search, isLoading, error };\n}\n\n/**\n * Helper component that simply renders the markers it receives so non-React environments\n * can verify data flows before wiring the SDK into a map.\n */\nexport function MarkerDebugList({ markers }: { markers: Property[] }) {\n  return (\n    <div style={{ fontFamily: \"sans-serif\", fontSize: 14 }}>\n      <strong>Markers</strong>\n      <ul>\n        {markers.map((marker) => (\n          <li key={String(marker.tripadvisor_id)}>\n            {marker.name} â€” {marker.location?.lat?.toFixed(3) ?? \"n/a\"},{\" \"}\n            {marker.location?.lon?.toFixed(3) ?? \"n/a\"}\n          </li>\n        ))}\n      </ul>\n    </div>\n  );\n}\n"],"mappings":"AAAA,OAAOA,MAAW,QAClB,OACE,gBAAAC,MASK,oBA8nBD,cAAAC,EAGI,QAAAC,MAHJ,oBArjBC,SAASC,EAAgBC,EAA8B,CAC5D,IAAMC,EAAcN,EAAM,OAA4B,IAAI,EACpD,CAACO,EAAOC,CAAQ,EAAIR,EAAM,SAA0B,IAAI,EAGxDS,EAAaT,EAAM,OAAOK,CAAO,EACvC,OAAAL,EAAM,UAAU,IAAM,CACpBS,EAAW,QAAUJ,CACvB,CAAC,EAEDL,EAAM,UAAU,IAAM,CACpB,IAAMU,EAAOD,EAAW,QAGlBE,EAA+B,CACnC,QAAS,KACT,GAAGD,EACH,UAAW,CACT,GAAGA,EAAK,UAER,mBAAqBE,GAAe,CAxG5C,IAAAC,EAAAC,EAyGUN,EAAUO,GAAUA,EAAO,CAAE,GAAGA,EAAM,WAAAH,CAAW,EAAI,IAAK,GAC1DE,GAAAD,EAAAJ,EAAW,QAAQ,YAAnB,YAAAI,EAA8B,qBAA9B,MAAAC,EAAA,KAAAD,EAAmDD,EACrD,EACA,yBAA2BI,GAAO,CA5G1C,IAAAH,EAAAC,EA6GUN,EAAUO,GACRA,EAAO,CAAE,GAAGA,EAAM,mBAAoBC,CAAG,EAAI,IAC/C,GACAF,GAAAD,EAAAJ,EAAW,QAAQ,YAAnB,YAAAI,EAA8B,2BAA9B,MAAAC,EAAA,KAAAD,EAAyDG,EAC3D,EACA,oBAAsBC,GAAS,CAlHvC,IAAAJ,EAAAC,EAmHUN,EAAUO,GAAUA,EAAO,CAAE,GAAGA,EAAM,QAASE,CAAK,EAAI,IAAK,GAC7DH,GAAAD,EAAAJ,EAAW,QAAQ,YAAnB,YAAAI,EAA8B,sBAA9B,MAAAC,EAAA,KAAAD,EAAoDI,EACtD,EACA,gBAAkBC,GAAY,CAtHtC,IAAAL,EAAAC,EAuHUN,EAAUO,GAAUA,EAAO,CAAE,GAAGA,EAAM,QAAAG,CAAQ,EAAI,IAAK,GACvDJ,GAAAD,EAAAJ,EAAW,QAAQ,YAAnB,YAAAI,EAA8B,kBAA9B,MAAAC,EAAA,KAAAD,EAAgDK,EAClD,EACA,eAAiBC,GAAW,CA1HpC,IAAAN,EAAAC,EA2HUN,EAAUO,GAAUA,EAAO,CAAE,GAAGA,EAAM,OAAAI,CAAO,EAAI,IAAK,GACtDL,GAAAD,EAAAJ,EAAW,QAAQ,YAAnB,YAAAI,EAA8B,iBAA9B,MAAAC,EAAA,KAAAD,EAA+CM,EACjD,EACA,eAAgB,CAACC,EAAQC,IAAS,CA9H1C,IAAAR,EAAAC,EA+HUN,EAAUO,GAAUA,EAAO,CAAE,GAAGA,EAAM,OAAAK,EAAQ,KAAAC,CAAK,EAAI,IAAK,GAC5DP,GAAAD,EAAAJ,EAAW,QAAQ,YAAnB,YAAAI,EAA8B,iBAA9B,MAAAC,EAAA,KAAAD,EAA+CO,EAAQC,EACzD,EACA,aAAeA,GAAS,CAlIhC,IAAAR,EAAAC,EAmIUN,EAAUO,GAAUA,EAAO,CAAE,GAAGA,EAAM,KAAAM,CAAK,EAAI,IAAK,GACpDP,GAAAD,EAAAJ,EAAW,QAAQ,YAAnB,YAAAI,EAA8B,eAA9B,MAAAC,EAAA,KAAAD,EAA6CQ,EAC/C,EACA,uBAAyBC,GAAa,CAtI9C,IAAAT,EAAAC,EAuIUN,EAAUO,GACRA,EAAO,CAAE,GAAGA,EAAM,eAAgBO,CAAS,EAAI,IACjD,GACAR,GAAAD,EAAAJ,EAAW,QAAQ,YAAnB,YAAAI,EAA8B,yBAA9B,MAAAC,EAAA,KAAAD,EAAuDS,EACzD,EACA,qBAAuBC,GAAY,CA5I3C,IAAAV,EAAAC,EA6IUN,EAAUO,GACRA,EAAO,CAAE,GAAGA,EAAM,eAAgBQ,CAAQ,EAAI,IAChD,GACAT,GAAAD,EAAAJ,EAAW,QAAQ,YAAnB,YAAAI,EAA8B,uBAA9B,MAAAC,EAAA,KAAAD,EAAqDU,EACvD,EACA,uBAAyBC,GAAc,CAlJ/C,IAAAX,EAAAC,EAmJUN,EAAUO,GACRA,EAAO,CAAE,GAAGA,EAAM,YAAaS,CAAU,EAAI,IAC/C,GACAV,GAAAD,EAAAJ,EAAW,QAAQ,YAAnB,YAAAI,EAA8B,yBAA9B,MAAAC,EAAA,KAAAD,EAAuDW,EACzD,CACF,CACF,EAEMC,EAAW,IAAIxB,EAAaU,CAAW,EAC7C,OAAAL,EAAY,QAAUmB,EAGtBjB,EAASiB,EAAS,SAAS,CAAC,EAErB,IAAM,CACXA,EAAS,QAAQ,EACjBnB,EAAY,QAAU,KACtBE,EAAS,IAAI,CACf,CAEF,EAAG,CAAC,CAAC,EAEE,CAAE,SAAUF,EAAY,QAAS,MAAAC,CAAM,CAChD,CAcO,SAASmB,EACdC,EACY,CACZ,GAAM,CAACf,EAAYgB,CAAa,EAAI5B,EAAM,SAAqB,CAAC,CAAC,EAEjE,OAAAA,EAAM,UAAU,IAAM,CACpB,GAAI,CAAC2B,EAAU,CACbC,EAAc,CAAC,CAAC,EAChB,MACF,CAGAA,EAAcD,EAAS,SAAS,EAAE,UAAU,CAC9C,EAAG,CAACA,CAAQ,CAAC,EAENf,CACT,CAcO,SAASiB,EACdF,EACe,CACf,GAAM,CAACG,EAAYC,CAAa,EAAI/B,EAAM,SAAwB,IAAI,EAEtE,OAAAA,EAAM,UAAU,IAAM,CACpB,GAAI,CAAC2B,EAAU,CACbI,EAAc,IAAI,EAClB,MACF,CAGAA,EAAcJ,EAAS,SAAS,EAAE,kBAAkB,CACtD,EAAG,CAACA,CAAQ,CAAC,EAENG,CACT,CAoBO,SAASE,EACdL,EAC8C,CAC9C,GAAM,CAACM,EAAaC,CAAmB,EACrClC,EAAM,SAAuB,eAAe,EAE9CA,EAAM,UAAU,IAAM,CACpB,GAAI,CAAC2B,EAAU,CACbO,EAAoB,eAAe,EACnC,MACF,CAGAA,EAAoBP,EAAS,SAAS,EAAE,OAAO,CACjD,EAAG,CAACA,CAAQ,CAAC,EAEb,IAAMQ,EAAiBnC,EAAM,YAC1BiB,GAAuB,CAClBU,IACFA,EAAS,eAAeV,CAAI,EAC5BiB,EAAoBjB,CAAI,EAE5B,EACA,CAACU,CAAQ,CACX,EAEA,MAAO,CAACM,EAAaE,CAAc,CACrC,CAqBO,SAASC,EACdT,EAC8C,CAC9C,GAAM,CAACU,EAAgBC,CAAsB,EAAItC,EAAM,SAErD,IAAI,EAENA,EAAM,UAAU,IAAM,CACpB,GAAI,CAAC2B,EAAU,CACbW,EAAuB,IAAI,EAC3B,MACF,CAGAA,EAAuBX,EAAS,SAAS,EAAE,kBAAkB,CAC/D,EAAG,CAACA,CAAQ,CAAC,EAEb,IAAMY,EAAoBvC,EAAM,YAC7BgB,GAAsB,CACjBW,GACFA,EAAS,kBAAkBX,CAAE,CAEjC,EACA,CAACW,CAAQ,CACX,EAEA,MAAO,CAACU,EAAgBE,CAAiB,CAC3C,CAsBO,SAASC,EAAsB,CACpC,SAAAb,EACA,IAAAc,EACA,WAAAC,EACA,cAAAC,CACF,EAKG,CACD,IAAMC,EAAc5C,EAAM,OAAO,EAAK,EAEtCA,EAAM,UAAU,IAAM,CAChB,CAAC2B,GAAY,CAACc,GAAOG,EAAY,UAIrCjB,EAAS,UAAUc,EAAK,CACtB,SAAU,WACV,WAAAC,EACA,cAAAC,CACF,CAAC,EAEDC,EAAY,QAAU,GACxB,EAAG,CAACjB,EAAUc,EAAKC,EAAYC,CAAa,CAAC,CAC/C,CAsBO,SAASE,EAAwB,CACtC,SAAAlB,EACA,IAAAc,EACA,OAAAK,EACA,cAAAH,CACF,EAKG,CACD,IAAMC,EAAc5C,EAAM,OAAO,EAAK,EAEtCA,EAAM,UAAU,IAAM,CAChB,CAAC2B,GAAY,CAACc,GAAOG,EAAY,UAIrCjB,EAAS,UAAUc,EAAK,CACtB,SAAU,SACV,OAAAK,EACA,cAAAH,CACF,CAAC,EAEDC,EAAY,QAAU,GACxB,EAAG,CAACjB,EAAUc,EAAKK,EAAQH,CAAa,CAAC,CAC3C,CAsBO,SAASI,EAAoB,CAClC,SAAApB,EACA,IAAAc,EACA,SAAAO,EACA,cAAAL,CACF,EAKG,CACD,IAAMC,EAAc5C,EAAM,OAAO,EAAK,EAEtCA,EAAM,UAAU,IAAM,CAChB,CAAC2B,GAAY,CAACc,GAAOG,EAAY,UAIrCjB,EAAS,UAAUc,EAAK,CACtB,SAAU,SACV,SAAAO,EACA,cAAAL,CACF,CAAC,EAEDC,EAAY,QAAU,GACxB,EAAG,CAACjB,EAAUc,EAAKO,EAAUL,CAAa,CAAC,CAC7C,CAQO,SAASM,EAAY5C,EAAiC,CAC3D,IAAMC,EAAcN,EAAM,OAA4B,IAAI,EAE1D,OAAAA,EAAM,UAAU,IAAM,CACpB,GAAI,CAACK,EACH,OAEF,IAAMoB,EAAW,IAAIxB,EAAaI,CAAO,EACzC,OAAAC,EAAY,QAAUmB,EAEf,IAAM,CACXA,EAAS,QAAQ,EACjBnB,EAAY,QAAU,IACxB,CACF,EAAG,CAACD,CAAO,CAAC,EAELC,CACT,CA2BO,SAAS4C,EAAoBvB,EAA+B,CACjE,GAAM,CAACwB,EAAWC,CAAY,EAAIpD,EAAM,SAAS,EAAK,EAChD,CAACqD,EAAOC,CAAQ,EAAItD,EAAM,SAAuB,IAAI,EAwC3D,MAAO,CAAE,OAtCMA,EAAM,YACnB,MAAOK,GAOD,CACJ,GAAI,CAACsB,EAAU,CACb,IAAM4B,EAAM,IAAI,MAAM,iCAAiC,EACvD,MAAAD,EAASC,CAAG,EACNA,CACR,CAEAH,EAAa,EAAI,EACjBE,EAAS,IAAI,EAEb,GAAI,CAQF,OAPe,MAAM3B,EAAS,oBAAoB,CAChD,GAAGtB,EACH,QAAUkD,GAAQ,CAChB,IAAMF,EAAQE,aAAe,MAAQA,EAAM,IAAI,MAAM,OAAOA,CAAG,CAAC,EAChED,EAASD,CAAK,CAChB,CACF,CAAC,CAEH,OAASE,EAAK,CACZ,IAAMF,EAAQE,aAAe,MAAQA,EAAM,IAAI,MAAM,OAAOA,CAAG,CAAC,EAChE,MAAAD,EAASD,CAAK,EACRA,CACR,QAAE,CACAD,EAAa,EAAK,CACpB,CACF,EACA,CAACzB,CAAQ,CACX,EAEiB,UAAAwB,EAAW,MAAAE,CAAM,CACpC,CA4BO,SAASG,EAAqB7B,EAA+B,CAClE,GAAM,CAACwB,EAAWC,CAAY,EAAIpD,EAAM,SAAS,EAAK,EAChD,CAACqD,EAAOC,CAAQ,EAAItD,EAAM,SAAuB,IAAI,EA6C3D,MAAO,CAAE,OA3CMA,EAAM,YACnB,MAAOK,GAYD,CACJ,GAAI,CAACsB,EAAU,CACb,IAAM4B,EAAM,IAAI,MAAM,iCAAiC,EACvD,MAAAD,EAASC,CAAG,EACNA,CACR,CAEAH,EAAa,EAAI,EACjBE,EAAS,IAAI,EAEb,GAAI,CAQF,OAPe,MAAM3B,EAAS,qBAAqB,CACjD,GAAGtB,EACH,QAAUkD,GAAQ,CAChB,IAAMF,EAAQE,aAAe,MAAQA,EAAM,IAAI,MAAM,OAAOA,CAAG,CAAC,EAChED,EAASD,CAAK,CAChB,CACF,CAAC,CAEH,OAASE,EAAK,CACZ,IAAMF,EAAQE,aAAe,MAAQA,EAAM,IAAI,MAAM,OAAOA,CAAG,CAAC,EAChE,MAAAD,EAASD,CAAK,EACRA,CACR,QAAE,CACAD,EAAa,EAAK,CACpB,CACF,EACA,CAACzB,CAAQ,CACX,EAEiB,UAAAwB,EAAW,MAAAE,CAAM,CACpC,CAMO,SAASI,EAAgB,CAAE,QAAAC,CAAQ,EAA4B,CACpE,OACEvD,EAAC,OAAI,MAAO,CAAE,WAAY,aAAc,SAAU,EAAG,EACnD,UAAAD,EAAC,UAAO,mBAAO,EACfA,EAAC,MACE,SAAAwD,EAAQ,IAAKC,GAAQ,CA3oB9B,IAAA9C,EAAAC,EAAA8C,EAAAC,EAAAC,EAAAC,EA4oBU,OAAA5D,EAAC,MACE,UAAAwD,EAAO,KAAK,YAAIC,GAAA9C,GAAAD,EAAA8C,EAAO,WAAP,YAAA9C,EAAiB,MAAjB,YAAAC,EAAsB,QAAQ,KAA9B,KAAA8C,EAAoC,MAAM,IAAE,KAC5DG,GAAAD,GAAAD,EAAAF,EAAO,WAAP,YAAAE,EAAiB,MAAjB,YAAAC,EAAsB,QAAQ,KAA9B,KAAAC,EAAoC,QAF9B,OAAOJ,EAAO,cAAc,CAGrC,EACD,EACH,GACF,CAEJ","names":["React","MapFirstCore","jsx","jsxs","useMapFirstCore","options","instanceRef","state","setState","optionsRef","opts","coreOptions","properties","_a","_b","prev","id","type","filters","bounds","center","zoom","location","loading","searching","instance","useMapFirstProperties","mapFirst","setProperties","useMapFirstSelectedProperty","selectedId","setSelectedId","usePrimaryType","primaryType","setPrimaryTypeState","setPrimaryType","useSelectedMarker","selectedMarker","setSelectedMarkerState","setSelectedMarker","useMapLibreAttachment","map","maplibregl","onMarkerClick","attachedRef","useGoogleMapsAttachment","google","useMapboxAttachment","mapboxgl","useMapFirst","usePropertiesSearch","isLoading","setIsLoading","error","setError","err","useSmartFilterSearch","MarkerDebugList","markers","marker","_c","_d","_e","_f"]}