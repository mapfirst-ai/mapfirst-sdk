import c from"react";import{MapFirstCore as d}from"@mapfirst/core";import{jsx as f,jsxs as y}from"react/jsx-runtime";function C(e){let n=c.useRef(null),[l,o]=c.useState(null);return c.useEffect(()=>{let s={adapter:null,...e,callbacks:{...e.callbacks,onPropertiesChange:r=>{var t,a;o(u=>u?{...u,properties:r}:null),(a=(t=e.callbacks)==null?void 0:t.onPropertiesChange)==null||a.call(t,r)},onSelectedPropertyChange:r=>{var t,a;o(u=>u?{...u,selectedPropertyId:r}:null),(a=(t=e.callbacks)==null?void 0:t.onSelectedPropertyChange)==null||a.call(t,r)},onPrimaryTypeChange:r=>{var t,a;o(u=>u?{...u,primary:r}:null),(a=(t=e.callbacks)==null?void 0:t.onPrimaryTypeChange)==null||a.call(t,r)},onFiltersChange:r=>{var t,a;o(u=>u?{...u,filters:r}:null),(a=(t=e.callbacks)==null?void 0:t.onFiltersChange)==null||a.call(t,r)},onBoundsChange:r=>{var t,a;o(u=>u?{...u,bounds:r}:null),(a=(t=e.callbacks)==null?void 0:t.onBoundsChange)==null||a.call(t,r)},onCenterChange:(r,t)=>{var a,u;o(p=>p?{...p,center:r,zoom:t}:null),(u=(a=e.callbacks)==null?void 0:a.onCenterChange)==null||u.call(a,r,t)},onZoomChange:r=>{var t,a;o(u=>u?{...u,zoom:r}:null),(a=(t=e.callbacks)==null?void 0:t.onZoomChange)==null||a.call(t,r)},onActiveLocationChange:r=>{var t,a;o(u=>u?{...u,activeLocation:r}:null),(a=(t=e.callbacks)==null?void 0:t.onActiveLocationChange)==null||a.call(t,r)},onLoadingStateChange:r=>{var t,a;o(u=>u?{...u,initialLoading:r}:null),(a=(t=e.callbacks)==null?void 0:t.onLoadingStateChange)==null||a.call(t,r)},onSearchingStateChange:r=>{var t,a;o(u=>u?{...u,isSearching:r}:null),(a=(t=e.callbacks)==null?void 0:t.onSearchingStateChange)==null||a.call(t,r)}}},i=new d(s);return n.current=i,o(i.getState()),()=>{i.destroy(),n.current=null,o(null)}},[e.initialLocationData,e.environment,e.mfid]),{mapFirst:n.current,state:l}}function S(e){let[n,l]=c.useState([]);return c.useEffect(()=>{if(!e){l([]);return}l(e.getState().properties)},[e]),n}function h(e){let[n,l]=c.useState(null);return c.useEffect(()=>{if(!e){l(null);return}l(e.getState().selectedPropertyId)},[e]),n}function b(e){let[n,l]=c.useState("Accommodation");c.useEffect(()=>{if(!e){l("Accommodation");return}l(e.getState().primary)},[e]);let o=c.useCallback(s=>{e&&(e.setPrimaryType(s),l(s))},[e]);return[n,o]}function P(e){let[n,l]=c.useState(null);c.useEffect(()=>{if(!e){l(null);return}l(e.getState().selectedPropertyId)},[e]);let o=c.useCallback(s=>{e&&(e.setSelectedMarker(s),l(s))},[e]);return[n,o]}function k({mapFirst:e,map:n,maplibregl:l,onMarkerClick:o}){let s=c.useRef(!1);c.useEffect(()=>{!e||!n||s.current||(e.attachMap(n,{platform:"maplibre",maplibregl:l,onMarkerClick:o}),s.current=!0)},[e,n,l,o])}function m({mapFirst:e,map:n,google:l,onMarkerClick:o}){let s=c.useRef(!1);c.useEffect(()=>{!e||!n||s.current||(e.attachMap(n,{platform:"google",google:l,onMarkerClick:o}),s.current=!0)},[e,n,l,o])}function x({mapFirst:e,map:n,mapboxgl:l,onMarkerClick:o}){let s=c.useRef(!1);c.useEffect(()=>{!e||!n||s.current||(e.attachMap(n,{platform:"mapbox",mapboxgl:l,onMarkerClick:o}),s.current=!0)},[e,n,l,o])}function T(e){let n=c.useRef(null);return c.useEffect(()=>{if(!e)return;let l=new d(e);return n.current=l,()=>{l.destroy(),n.current=null}},[e]),n}function L({markers:e}){return y("div",{style:{fontFamily:"sans-serif",fontSize:14},children:[f("strong",{children:"Markers"}),f("ul",{children:e.map(n=>{var l,o,s,i,r,t;return y("li",{children:[n.name," \u2014 ",(s=(o=(l=n.location)==null?void 0:l.lat)==null?void 0:o.toFixed(3))!=null?s:"n/a",","," ",(t=(r=(i=n.location)==null?void 0:i.lon)==null?void 0:r.toFixed(3))!=null?t:"n/a"]},String(n.tripadvisor_id))})})]})}export{L as MarkerDebugList,m as useGoogleMapsAttachment,T as useMapFirst,C as useMapFirstCore,S as useMapFirstProperties,h as useMapFirstSelectedProperty,k as useMapLibreAttachment,x as useMapboxAttachment,b as usePrimaryType,P as useSelectedMarker};
//# sourceMappingURL=index.mjs.map