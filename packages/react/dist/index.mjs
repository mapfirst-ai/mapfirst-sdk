import R from"react";import{MapFirstCore as Ge}from"@mapfirst.ai/core";import{processApiFilters as Dr,convertToApiFilters as Hr}from"@mapfirst.ai/core";import{useCallback as re}from"react";import de from"react";import he from"react";import{jsx as M,jsxs as V}from"react/jsx-runtime";var ne=({className:e,style:t})=>V("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:e,style:{width:"1em",height:"1em",...t},children:[M("circle",{cx:"11",cy:"11",r:"8"}),M("path",{d:"m21 21-4.35-4.35"})]}),oe=({className:e,style:t})=>V("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:e,style:{width:"1em",height:"1em",...t},children:[M("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),M("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]}),D=({className:e,style:t})=>V("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:e,style:{width:"1em",height:"1em",...t},children:[M("path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"}),M("path",{d:"M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"})]}),Q=({className:e,style:t})=>M("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:e,style:{width:"1em",height:"1em",...t},children:M("polyline",{points:"9 18 15 12 9 6"})}),ie=({className:e,style:t,fill:p="none"})=>M("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:p,stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:e,style:{width:"1em",height:"1em",...t},children:M("polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"})});import{jsx as ae}from"react/jsx-runtime";var be={position:"absolute",top:"-8px",right:"-8px",padding:"2px",borderRadius:"50%",backgroundColor:"white",border:"1px solid #03852e",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",transition:"background-color 0.2s"},Ce={width:"17px",height:"17px"},E=({onClick:e,style:t})=>{let[p,i]=he.useState(!1);return ae("button",{style:{...be,backgroundColor:p?"#e5e5e5":"white",...t},onClick:e,onMouseEnter:()=>i(!0),onMouseLeave:()=>i(!1),"aria-label":"Remove filter",children:ae(oe,{style:Ce})})};import{jsx as q,jsxs as ve}from"react/jsx-runtime";var xe={position:"relative",backgroundColor:"white",color:"black",fontSize:"14px",borderRadius:"9999px",padding:"0 16px",paddingRight:"20px",border:"1px solid #03852e",display:"flex",alignItems:"center",gap:"8px",flexShrink:0,height:"34px"},K=({label:e,icon:t,remove:p,style:i})=>ve("div",{style:{...xe,...i},children:[t&&q("span",{style:{display:"flex",alignItems:"center"},children:t}),q("span",{style:{whiteSpace:"nowrap"},children:e}),q(E,{onClick:p})]});import{useState as Le}from"react";import{useCallback as se,useState as Se}from"react";var ke={"smartFilter.typingPrompt":"Search for hotels, restaurants, or attractions...","smartFilter.nav.previous":"Previous filters","smartFilter.nav.next":"Next filters","smartFilter.toast.locationRequired":"Please select a location first","smartFilter.clearAll":"Clear all","smartFilter.minRating.suffix":"+","smartFilter.minRating.label":"{{value}}+","smartFilter.minRating.remove":"Remove rating filter","smartFilter.minRating.setTo":"Set rating to {{rating}}","smartFilter.priceRange.label":"Price Range","smartFilter.priceRange.remove":"Remove price filter","smartFilter.priceRange.edit":"Edit price","smartFilter.transformedQuery.remove":"Remove search query","smartFilter.transformedQuery.edit":"Edit search query","smartFilter.restaurantPriceLevel.label":"Price Level","smartFilter.restaurantPriceLevel.remove":"Remove price level filter","smartFilter.restaurantPriceLevel.none":"Any","smartFilter.restaurantPriceLevel.options.cheapEats":"Cheap Eats","smartFilter.restaurantPriceLevel.options.midRange":"Mid Range","smartFilter.restaurantPriceLevel.options.fineDining":"Fine Dining"},Fe=(e,t="USD")=>new Intl.NumberFormat("en-US",{style:"currency",currency:t,minimumFractionDigits:0,maximumFractionDigits:0}).format(e),w=(e,t)=>{let[p,i]=Se("en"),c=se((h,s)=>{let m={...ke,...e}[h]||h;return s&&Object.keys(s).forEach(g=>{m=m.replace(new RegExp(`{{${g}}}`,"g"),String(s[g]))}),m},[e]),y=se((h,s)=>t?t(h,s):Fe(h,s),[t]);return{t:c,locale:p,setLocale:i,formatCurrency:y}};import{jsx as H,jsxs as Pe}from"react/jsx-runtime";var Re=e=>{let t=[],p=Math.floor(e),i=e%1!==0,c={display:"block",width:"12px",height:"12px",borderRadius:"50%",border:"1px solid #03852e",pointerEvents:"none"},y={...c,backgroundColor:"#03852e"},h={...c,background:"linear-gradient(90deg, #03852e 50%, transparent 50%)"};for(let a=0;a<p;a+=1)t.push(H("span",{style:y},`full-${a}`));i&&t.push(H("span",{style:h},"half"));let s=Math.max(0,5-Math.ceil(e));for(let a=0;a<s;a+=1)t.push(H("span",{style:c},`empty-${a}`));return t},st=(e,t)=>Pe("span",{style:{display:"flex",alignItems:"center",gap:"4px"},children:[H("span",{style:{display:"flex",gap:"1px",userSelect:"none"},children:Re(e)})," ",t]}),$=e=>e.toFixed(1),lt=(e,t,p,i)=>`${i(e,p)} - ${i(t!=null?t:0,p)}`;import{jsx as T,jsxs as O}from"react/jsx-runtime";var we={position:"relative",backgroundColor:"white",color:"black",fontSize:"14px",borderRadius:"9999px",padding:"0 16px",paddingRight:"20px",border:"1px solid #03852e",display:"flex",gap:"8px",alignItems:"center",justifyContent:"center",flexShrink:0,height:"34px"},Me={display:"flex",gap:"1px",userSelect:"none"},U={display:"block",width:"12px",height:"12px",borderRadius:"50%",border:"1px solid #03852e",pointerEvents:"none"},z={position:"absolute",top:0,height:"100%",cursor:"pointer",backgroundColor:"transparent",border:"none",padding:0},_=({rating:e,onChange:t,onRemove:p,star:i=!1})=>{let[c,y]=Le(null),{t:h}=w(),s=c!=null?c:e,a=b=>i&&b?b.toString():h("smartFilter.minRating.label",{value:$(b)}),m=h("smartFilter.minRating.remove"),g=b=>h("smartFilter.minRating.setTo",{rating:$(b)}),x=b=>{let C=b+1;return s>=C?"full":s>=C-.5?"half":"empty"},f=b=>{y(null),b!==e&&t(b)},k=b=>{var v;let C=b.relatedTarget;(!C||!((v=b.currentTarget.closest("[data-min-rating-chip]"))!=null&&v.contains(C)))&&y(null)};return O("div",{style:we,"data-min-rating-chip":!0,children:[O("div",{style:{display:"flex",alignItems:"center",gap:"4px"},onMouseLeave:()=>y(null),children:[T("div",{style:Me,children:Array.from({length:5}).map((b,C)=>{let v=x(C),l=C+1,n=l-.5;if(i)return O("div",{style:{position:"relative",width:"16px",height:"16px"},children:[T(ie,{fill:s>=l?"#03852e":"none",style:{width:"16px",height:"16px",pointerEvents:"none"}}),T("button",{type:"button",style:{...z,left:0,width:"50%",borderRadius:"50% 0 0 50%"},onMouseEnter:()=>y(n),onFocus:()=>y(n),onBlur:k,onClick:()=>f(n),"aria-label":g(n),title:a(n)}),T("button",{type:"button",style:{...z,left:"50%",width:"50%",borderRadius:"0 50% 50% 0"},onMouseEnter:()=>y(l),onFocus:()=>y(l),onBlur:k,onClick:()=>f(l),"aria-label":g(l),title:a(l)})]},C);let S=v==="full"?{...U,backgroundColor:"#03852e"}:U,u={...U,background:"linear-gradient(90deg, #03852e 50%, transparent 50%)"};return O("div",{style:{position:"relative",width:"12px",height:"12px"},children:[T("span",{style:v==="half"?u:S}),T("button",{type:"button",style:{...z,left:0,width:"50%",borderRadius:"50% 0 0 50%",outline:"2px solid transparent",outlineOffset:"1px"},onMouseEnter:()=>y(n),onFocus:()=>y(n),onBlur:k,onClick:()=>f(n),"aria-label":g(n),title:a(n)}),T("button",{type:"button",style:{...z,left:"50%",width:"50%",borderRadius:"0 50% 50% 0",outline:"2px solid transparent",outlineOffset:"1px"},onMouseEnter:()=>y(l),onFocus:()=>y(l),onBlur:k,onClick:()=>f(l),"aria-label":g(l),title:a(l)})]},C)})}),T("span",{style:{whiteSpace:"nowrap"},children:a(s)})]}),T(E,{onClick:p})]})};import{useEffect as Ee,useState as G}from"react";import{Fragment as Ne,jsx as I,jsxs as Y}from"react/jsx-runtime";var Ie={position:"relative",backgroundColor:"white",color:"black",fontSize:"14px",borderRadius:"9999px",padding:"0 16px",border:"1px solid #03852e",display:"flex",alignItems:"center",gap:"8px",flexShrink:0,height:"34px"},Te={outline:"none",fontSize:"16px",backgroundColor:"transparent",borderRadius:"2px",padding:"2px 8px",width:"64px",textAlign:"center",border:"none"},Be={padding:"4px",borderRadius:"50%",cursor:"pointer",transition:"background-color 0.2s",border:"none",backgroundColor:"transparent",color:"#737373",display:"flex",alignItems:"center",justifyContent:"center"},le=({boundary:e,label:t,value:p,placeholder:i,currency:c,isOptional:y=!1,showRemoveButton:h=!1,removeLabel:s,editLabel:a,showAddWhenEmpty:m=!1,onCommit:g,onRemove:x})=>{let[f,k]=G(p!==void 0?String(p):""),[b,C]=G(!1),[v,l]=G(!1),n=p!==void 0;Ee(()=>{k(p!==void 0?String(p):""),C(!1)},[p]);let S=()=>{k(p!==void 0?String(p):"")},u=()=>{if(f.trim()===""){if(y){g(void 0),k("");return}S();return}let r=Number(f);if(!Number.isFinite(r)){S();return}let F=Math.max(0,r);if(F===p){S();return}g(F)};return Y("div",{style:Ie,children:[I("span",{style:{fontSize:"10px",textTransform:"uppercase",fontWeight:600,letterSpacing:"0.05em"},children:t}),b?I("input",{value:f,onChange:r=>{let F=r.target.value.replace(/[^\d]/g,"");k(F)},onBlur:()=>{u(),C(!1)},onKeyDown:r=>{if(r.key==="Enter"){r.preventDefault(),r.currentTarget.blur(),C(!1);return}if(r.key==="Escape"){r.preventDefault(),S(),r.currentTarget.blur(),C(!1);return}r.key.length===1&&/[0-9]/.test(r.key)||r.key==="Backspace"||r.key==="Delete"||r.key==="Tab"||r.key==="ArrowLeft"||r.key==="ArrowRight"||r.key==="Home"||r.key==="End"||r.preventDefault()},placeholder:i,inputMode:"numeric",pattern:"[0-9]*","aria-label":t,style:Te,autoFocus:!0}):n?Y("span",{style:{fontSize:"16px"},children:[c,p]}):m?I("button",{type:"button",style:{fontSize:"16px",color:"#737373",cursor:"pointer",border:"none",backgroundColor:"transparent",padding:0},onClick:()=>C(!0),"aria-label":a,children:"+"}):I("span",{style:{fontSize:"16px",color:"#737373"},children:"-"}),(!m||m&&b)&&I("span",{style:{color:"#737373",fontSize:"12px"},children:c}),!b&&(!m||n)&&I("button",{type:"button",style:{...Be,backgroundColor:v?"#e5e5e5":"transparent"},"aria-label":a,title:a,onClick:()=>C(!0),onMouseEnter:()=>l(!0),onMouseLeave:()=>l(!1),children:I(D,{})}),h&&I(E,{onClick:x})]})},Z=({priceRange:e,currency:t,onChange:p,onRemove:i})=>{let{t:c}=w(),y="Min",h="Max",s=c("smartFilter.priceRange.remove"),a=c("smartFilter.priceRange.edit"),m=(g,x)=>{let f={min:e.min,max:e.max};g==="min"?(f.min=x,x!==void 0&&e.max!==void 0&&x>e.max&&(f.max=x)):(f.max=x,x!==void 0&&e.min!==void 0&&x<e.min&&(f.min=x)),(f.min!==e.min||f.max!==e.max)&&p(f)};return Y(Ne,{children:[I(le,{boundary:"min",label:y,value:e.min,currency:t,editLabel:a,showRemoveButton:e.min!==void 0&&e.min!==0,onCommit:g=>m("min",g),onRemove:i}),I(le,{boundary:"max",label:h,value:e.max,currency:t,isOptional:!0,showRemoveButton:e.max!==void 0,removeLabel:s,editLabel:a,showAddWhenEmpty:!0,onCommit:g=>m("max",g),onRemove:i})]})};import{jsx as A,jsxs as W}from"react/jsx-runtime";var Ae={position:"relative",backgroundColor:"white",color:"black",fontSize:"14px",borderRadius:"9999px",padding:"0 16px",paddingRight:"20px",border:"1px solid #03852e",display:"flex",alignItems:"center",gap:"16px",flexShrink:0,height:"34px"},ce=[{value:"Cheap Eats",key:"cheapEats"},{value:"Mid Range",key:"midRange"},{value:"Fine Dining",key:"fineDining"}],j=({values:e,onChange:t,onRemove:p})=>{let{t:i}=w(),c=i("smartFilter.restaurantPriceLevel.label"),y=i("smartFilter.restaurantPriceLevel.remove"),h=i("smartFilter.restaurantPriceLevel.none"),s=a=>{let{value:m,checked:g}=a.target,x=m,f=new Set(e);g?f.add(x):f.delete(x);let k=ce.filter(b=>f.has(b.value)).map(b=>b.value);t(k)};return W("div",{style:Ae,children:[W("div",{style:{display:"flex",alignItems:"center",gap:"8px",flexWrap:"wrap"},children:[A("span",{style:{fontSize:"10px",textTransform:"uppercase",fontWeight:600,letterSpacing:"0.05em"},children:c}),W("div",{style:{display:"flex",gap:"12px"},children:[ce.map(a=>{let m=i(`smartFilter.restaurantPriceLevel.options.${a.key}`),g=`price-level-${a.key}`;return W("label",{htmlFor:g,style:{display:"flex",alignItems:"center",gap:"4px",fontSize:"12px",cursor:"pointer"},children:[A("input",{id:g,type:"checkbox",value:a.value,checked:e.includes(a.value),onChange:s,style:{accentColor:"#03852e",cursor:"pointer"}}),A("span",{children:m})]},a.value)}),e.length===0&&A("span",{style:{fontSize:"12px",color:"#737373"},children:h})]})]}),A(E,{onClick:p})]})};import{useEffect as De,useRef as He,useState as X}from"react";import{jsx as N,jsxs as We}from"react/jsx-runtime";var ze={position:"relative",backgroundColor:"white",color:"black",fontSize:"14px",borderRadius:"9999px",padding:"0 16px",paddingRight:"20px",border:"1px solid #03852e",display:"flex",alignItems:"center",gap:"8px",flexShrink:0,userSelect:"none",height:"34px"},Oe={backgroundColor:"#ececec",borderRadius:"2px",padding:"2px 8px",outline:"none",fontSize:"16px",minWidth:"8ch",border:"none"},_e={padding:"4px",borderRadius:"50%",cursor:"pointer",transition:"background-color 0.2s",color:"#737373",border:"none",backgroundColor:"transparent",display:"flex",alignItems:"center",justifyContent:"center"},J=({value:e,onChange:t,onRemove:p})=>{let i=He(null),[c,y]=X(e),[h,s]=X(!1),[a,m]=X(!1),{t:g}=w(),x=g("smartFilter.transformedQuery.remove"),f=g("smartFilter.transformedQuery.edit");De(()=>{y(e),s(!1)},[e]);let k=()=>{let v=c.trim();if(!v.length){y(e);return}v!==e&&t(v)};return We("div",{style:ze,children:[N(ne,{style:{width:"16px",height:"16px",color:"#03852e"}}),h?N("input",{ref:i,value:c,onChange:v=>{y(v.target.value)},onBlur:()=>{k(),s(!1)},onKeyDown:v=>{if(v.key==="Enter"){v.preventDefault(),v.currentTarget.blur();return}if(v.key==="Escape"){v.preventDefault(),y(e),v.currentTarget.blur();return}},"aria-label":f,style:Oe,autoFocus:!0}):N("span",{style:{fontSize:"16px"},children:e}),!h&&N("button",{type:"button",style:{..._e,backgroundColor:a?"#e5e5e5":"transparent"},"aria-label":f,title:f,onClick:()=>s(!0),onMouseEnter:()=>m(!0),onMouseLeave:()=>m(!1),children:N(D,{})}),N(E,{onClick:p})]})};import{useCallback as pe,useEffect as Qe,useRef as Ve,useState as ue}from"react";var ee=e=>{let t=Ve(null),[p,i]=ue(!0),[c,y]=ue(!0),h=pe(()=>{let a=t.current;if(!a){i(!0),y(!0);return}let{scrollLeft:m,scrollWidth:g,clientWidth:x}=a;i(m<=0),y(m+x>=g-1)},[]);Qe(()=>{let a=t.current;if(h(),!a)return;let m=()=>h();return a.addEventListener("scroll",m,{passive:!0}),window.addEventListener("resize",h),()=>{a.removeEventListener("scroll",m),window.removeEventListener("resize",h)}},[e,h]);let s=pe(a=>{let m=t.current;if(!m)return;let g=m.clientWidth*.7;m.scrollBy({left:a==="next"?g:-g,behavior:"smooth"})},[]);return{scrollerRef:t,atStart:p,atEnd:c,scrollByDir:s}};import{jsx as L,jsxs as ye}from"react/jsx-runtime";var qe={position:"relative",width:"100%"},Ke={display:"flex",gap:"8px",overflowX:"auto",alignItems:"center",width:"100%",scrollbarWidth:"none",msOverflowStyle:"none"},me={pointerEvents:"none",position:"absolute",top:0,bottom:0,width:"40px"},ge={position:"absolute",top:"50%",transform:"translateY(-50%)",backgroundColor:"white",color:"#003c30",border:"1px solid #003c30",padding:"4px",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",boxShadow:"0 1px 3px rgba(0,0,0,0.1)",cursor:"pointer"},te=({filters:e,currency:t,minRatingSuffix:p,clearAllLabel:i,previousFiltersLabel:c,nextFiltersLabel:y,formatCurrency:h,onFilterChange:s,onResetFilters:a,onClearAll:m})=>{let{scrollerRef:g,atStart:x,atEnd:f,scrollByDir:k}=ee(e.length),[b,C]=de.useState(null),[v,l]=de.useState(!1);return ye("div",{style:qe,children:[ye("div",{ref:g,style:{...Ke,padding:"8px",WebkitOverflowScrolling:"touch"},children:[L("style",{children:`
            div::-webkit-scrollbar {
              display: none;
            }
          `}),e.map(n=>{var u,o,d;let S=()=>L(K,{label:n.label,icon:n.icon,remove:()=>{s(e.filter(r=>r.id!==n.id))}},n.id);if(n.type==="minRating"){let r=(u=n.numericValue)!=null?u:Number(n.value);return Number.isFinite(r)?L(_,{rating:r,onChange:F=>{let P=e.map(B=>B.id===n.id?{...B,numericValue:F,value:String(F)}:B);s(P)},onRemove:()=>void s(e.filter(F=>F.id!==n.id))},n.id):S()}if(n.type==="starRating"){let r=(o=n.numericValue)!=null?o:Number(n.value);return Number.isFinite(r)?L(_,{star:!0,rating:r,onChange:F=>{let P=e.map(B=>B.id===n.id?{...B,numericValue:F,value:String(F)}:B);s(P)},onRemove:()=>void s(e.filter(F=>F.id!==n.id))},n.id):S()}return n.type==="priceRange"&&n.priceRange?L(Z,{priceRange:n.priceRange,currency:t,onChange:r=>{let F=e.map(P=>P.id===n.id?{...P,priceRange:r}:P);s(F)},onRemove:()=>void s(e.filter(r=>r.id!==n.id))},n.id):n.type==="transformed_query"?L(J,{value:n.value,onChange:r=>{let F=e.map(P=>P.id===n.id?{...P,value:r}:P);s(F)},onRemove:()=>void s(e.filter(r=>r.id!==n.id))},n.id):n.type==="selected_restaurant_price_levels"?L(j,{values:(d=n.priceLevels)!=null?d:[],onChange:r=>{let F=e.map(P=>P.id===n.id?{...P,priceLevels:r}:P);s(F)},onRemove:()=>void s(e.filter(r=>r.id!==n.id))},n.id):S()}),L("button",{style:{flexShrink:0,padding:"4px 16px",borderRadius:"9999px",cursor:"pointer",fontSize:"14px",userSelect:"none",backgroundColor:v?"#eee":"white",color:"black",border:"1px solid #03852e"},onClick:m,onMouseEnter:()=>l(!0),onMouseLeave:()=>l(!1),children:i})]}),!x&&L("div",{"aria-hidden":"true",style:{...me,left:0,background:"linear-gradient(to right, white, transparent)"}}),!f&&L("div",{"aria-hidden":"true",style:{...me,right:0,background:"linear-gradient(to left, white, transparent)"}}),!x&&L("button",{type:"button","aria-label":c,style:{...ge,left:"4px",transform:"translateY(-50%) rotate(180deg)",backgroundColor:b==="prev"?"#e5e5e5":"white"},onClick:()=>k("prev"),onMouseEnter:()=>C("prev"),onMouseLeave:()=>C(null),children:L(Q,{style:{width:"20px",height:"20px"}})}),!f&&L("button",{type:"button","aria-label":y,style:{...ge,right:"4px",backgroundColor:b==="next"?"#e5e5e5":"white"},onClick:()=>k("next"),onMouseEnter:()=>C("next"),onMouseLeave:()=>C(null),children:L(Q,{style:{width:"20px",height:"20px"}})})]})};import{jsx as fe}from"react/jsx-runtime";var $e={position:"relative",display:"flex",flexDirection:"column",gap:"8px",width:"100%"},Ue=({filters:e,isSearching:t=!1,onFilterChange:p,customTranslations:i,currency:c="USD",containerStyle:y,style:h})=>{let{t:s,formatCurrency:a}=w(i),m=s("smartFilter.minRating.suffix"),g=s("smartFilter.nav.previous"),x=s("smartFilter.nav.next"),f=s("smartFilter.clearAll"),k=re(async(v,l)=>{if(!t)try{await p(v)}catch(n){console.error("Filter change error:",n)}},[t,p]),b=re(()=>{k([])},[k]),C=re(()=>{k([],!0)},[k]);return fe("div",{style:{...$e,...y},children:e.length>0&&fe(te,{filters:e,currency:c,minRatingSuffix:m,clearAllLabel:f,previousFiltersLabel:g,nextFiltersLabel:x,formatCurrency:a,onFilterChange:k,onResetFilters:b,onClearAll:C})})};function Br(e){let t=R.useRef(null),[p,i]=R.useState(null),c=R.useRef(e);R.useEffect(()=>{c.current=e}),R.useEffect(()=>{let l=c.current,n={adapter:null,...l,callbacks:{...l.callbacks,onPropertiesChange:u=>{var o,d;i(r=>r?{...r,properties:u}:null),(d=(o=c.current.callbacks)==null?void 0:o.onPropertiesChange)==null||d.call(o,u)},onSelectedPropertyChange:u=>{var o,d;i(r=>r?{...r,selectedPropertyId:u}:null),(d=(o=c.current.callbacks)==null?void 0:o.onSelectedPropertyChange)==null||d.call(o,u)},onPrimaryTypeChange:u=>{var o,d;i(r=>r?{...r,primary:u}:null),(d=(o=c.current.callbacks)==null?void 0:o.onPrimaryTypeChange)==null||d.call(o,u)},onFiltersChange:u=>{var o,d;i(r=>r?{...r,filters:u}:null),(d=(o=c.current.callbacks)==null?void 0:o.onFiltersChange)==null||d.call(o,u)},onBoundsChange:u=>{var o,d;i(r=>r?{...r,bounds:u}:null),(d=(o=c.current.callbacks)==null?void 0:o.onBoundsChange)==null||d.call(o,u)},onPendingBoundsChange:u=>{var o,d;i(r=>r?{...r,pendingBounds:u}:null),(d=(o=c.current.callbacks)==null?void 0:o.onPendingBoundsChange)==null||d.call(o,u)},onCenterChange:(u,o)=>{var d,r;i(F=>F?{...F,center:u,zoom:o}:null),(r=(d=c.current.callbacks)==null?void 0:d.onCenterChange)==null||r.call(d,u,o)},onZoomChange:u=>{var o,d;i(r=>r?{...r,zoom:u}:null),(d=(o=c.current.callbacks)==null?void 0:o.onZoomChange)==null||d.call(o,u)},onActiveLocationChange:u=>{var o,d;i(r=>r?{...r,activeLocation:u}:null),(d=(o=c.current.callbacks)==null?void 0:o.onActiveLocationChange)==null||d.call(o,u)},onLoadingStateChange:u=>{var o,d;i(r=>r?{...r,initialLoading:u}:null),(d=(o=c.current.callbacks)==null?void 0:o.onLoadingStateChange)==null||d.call(o,u)},onSearchingStateChange:u=>{var o,d;i(r=>r?{...r,isSearching:u}:null),(d=(o=c.current.callbacks)==null?void 0:o.onSearchingStateChange)==null||d.call(o,u)}}},S=new Ge(n);return t.current=S,i(S.getState()),()=>{S.destroy(),t.current=null,i(null)}},[]);let y=R.useCallback(l=>{t.current&&t.current.setPrimaryType(l)},[]),h=R.useCallback(l=>{t.current&&t.current.setSelectedMarker(l)},[]),s=R.useCallback((l,n=!0)=>{t.current&&t.current.setUseApi(l,n)},[]),a=R.useMemo(()=>({search:async l=>{if(!t.current)throw new Error("MapFirst instance not available");return await t.current.runPropertiesSearch(l)}}),[]),m=R.useMemo(()=>({search:async l=>{if(!t.current)throw new Error("MapFirst instance not available");return await t.current.runSmartFilterSearch(l)}}),[]),g=R.useMemo(()=>({perform:async()=>t.current?await t.current.performBoundsSearch():null}),[]),x=R.useRef(!1),f=R.useCallback((l,n,S)=>{t.current&&l&&!x.current&&(t.current.attachMap(l,{platform:"maplibre",maplibregl:n,onMarkerClick:S==null?void 0:S.onMarkerClick}),x.current=!0)},[]),k=R.useRef(!1),b=R.useCallback((l,n,S)=>{t.current&&l&&!k.current&&(t.current.attachMap(l,{platform:"google",google:n,onMarkerClick:S==null?void 0:S.onMarkerClick}),k.current=!0)},[]),C=R.useRef(!1),v=R.useCallback((l,n,S)=>{t.current&&l&&!C.current&&(t.current.attachMap(l,{platform:"mapbox",mapboxgl:n,onMarkerClick:S==null?void 0:S.onMarkerClick}),C.current=!0)},[]);return{instance:t.current,state:p,setPrimaryType:y,setSelectedMarker:h,setUseApi:s,propertiesSearch:a,smartFilterSearch:m,boundsSearch:g,attachMapLibre:f,attachGoogle:b,attachMapbox:v}}export{K as Chip,oe as CloseIcon,D as EditIcon,te as FilterChips,_ as MinRatingFilterChip,Q as NextIcon,Z as PriceRangeFilterChip,j as RestaurantPriceLevelChip,ne as SearchIcon,Ue as SmartFilter,ie as StarIcon,J as TransformedQueryChip,Hr as convertToApiFilters,st as createMinRatingFilterLabel,lt as createPriceRangeFilterLabel,$ as formatRatingValue,Dr as processApiFilters,Re as renderStars,ee as useFilterScroll,Br as useMapFirst,w as useTranslation};
//# sourceMappingURL=index.mjs.map