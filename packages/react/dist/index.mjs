import f from"react";import{MapFirstCore as we}from"@mapfirst.ai/core";import{useCallback as de,useState as it}from"react";import ce from"react";import Le from"react";import{jsx as E,jsxs as j}from"react/jsx-runtime";var V=({className:e,style:r})=>j("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:e,style:{width:"1em",height:"1em",...r},children:[E("circle",{cx:"11",cy:"11",r:"8"}),E("path",{d:"m21 21-4.35-4.35"})]}),me=({className:e,style:r})=>j("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:e,style:{width:"1em",height:"1em",...r},children:[E("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),E("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]}),q=({className:e,style:r})=>j("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:e,style:{width:"1em",height:"1em",...r},children:[E("path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"}),E("path",{d:"M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"})]}),Z=({className:e,style:r})=>E("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:e,style:{width:"1em",height:"1em",...r},children:E("polyline",{points:"9 18 15 12 9 6"})}),fe=({className:e,style:r,fill:o="none"})=>E("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:o,stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:e,style:{width:"1em",height:"1em",...r},children:E("polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"})});import{jsx as ge}from"react/jsx-runtime";var Ee={position:"absolute",top:"-8px",right:"-8px",padding:"2px",borderRadius:"50%",backgroundColor:"white",border:"1px solid #03852e",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",transition:"background-color 0.2s"},Me={width:"17px",height:"17px"},M=({onClick:e,style:r})=>{let[o,i]=Le.useState(!1);return ge("button",{style:{...Ee,backgroundColor:o?"#e5e5e5":"white",...r},onClick:e,onMouseEnter:()=>i(!0),onMouseLeave:()=>i(!1),"aria-label":"Remove filter",children:ge(me,{style:Me})})};import{jsx as X,jsxs as Te}from"react/jsx-runtime";var Ie={position:"relative",backgroundColor:"white",color:"black",fontSize:"14px",borderRadius:"9999px",padding:"0 16px",paddingRight:"20px",border:"1px solid #03852e",display:"flex",alignItems:"center",gap:"8px",flexShrink:0,height:"34px"},J=({label:e,icon:r,remove:o,style:i})=>Te("div",{style:{...Ie,...i},children:[r&&X("span",{style:{display:"flex",alignItems:"center"},children:r}),X("span",{style:{whiteSpace:"nowrap"},children:e}),X(M,{onClick:o})]});import{useState as Ae}from"react";import{useCallback as ye,useState as Be}from"react";var He={"smartFilter.typingPrompt":"Search for hotels, restaurants, or attractions...","smartFilter.nav.previous":"Previous filters","smartFilter.nav.next":"Next filters","smartFilter.toast.locationRequired":"Please select a location first","smartFilter.clearAll":"Clear all","smartFilter.minRating.suffix":"+","smartFilter.minRating.label":"{{value}}+","smartFilter.minRating.remove":"Remove rating filter","smartFilter.minRating.setTo":"Set rating to {{rating}}","smartFilter.priceRange.label":"Price Range","smartFilter.priceRange.remove":"Remove price filter","smartFilter.priceRange.edit":"Edit price","smartFilter.transformedQuery.remove":"Remove search query","smartFilter.transformedQuery.edit":"Edit search query","smartFilter.restaurantPriceLevel.label":"Price Level","smartFilter.restaurantPriceLevel.remove":"Remove price level filter","smartFilter.restaurantPriceLevel.none":"Any","smartFilter.restaurantPriceLevel.options.cheapEats":"Cheap Eats","smartFilter.restaurantPriceLevel.options.midRange":"Mid Range","smartFilter.restaurantPriceLevel.options.fineDining":"Fine Dining"},Ne=(e,r="USD")=>new Intl.NumberFormat("en-US",{style:"currency",currency:r,minimumFractionDigits:0,maximumFractionDigits:0}).format(e),R=(e,r)=>{let[o,i]=Be("en"),a=ye((u,p)=>{let n={...He,...e}[u]||u;return p&&Object.keys(p).forEach(s=>{n=n.replace(new RegExp(`{{${s}}}`,"g"),String(p[s]))}),n},[e]),d=ye((u,p)=>r?r(u,p):Ne(u,p),[r]);return{t:a,locale:o,setLocale:i,formatCurrency:d}};import{jsx as Q,jsxs as ze}from"react/jsx-runtime";var De=e=>{let r=[],o=Math.floor(e),i=e%1!==0,a={display:"block",width:"12px",height:"12px",borderRadius:"50%",border:"1px solid #03852e",pointerEvents:"none"},d={...a,backgroundColor:"#03852e"},u={...a,background:"linear-gradient(90deg, #03852e 50%, transparent 50%)"};for(let t=0;t<o;t+=1)r.push(Q("span",{style:d},`full-${t}`));i&&r.push(Q("span",{style:u},"half"));let p=Math.max(0,5-Math.ceil(e));for(let t=0;t<p;t+=1)r.push(Q("span",{style:a},`empty-${t}`));return r},Rt=(e,r)=>ze("span",{style:{display:"flex",alignItems:"center",gap:"4px"},children:[Q("span",{style:{display:"flex",gap:"1px",userSelect:"none"},children:De(e)})," ",r]}),ee=e=>e.toFixed(1),wt=(e,r,o,i)=>`${i(e,o)} - ${i(r!=null?r:0,o)}`;import{jsx as T,jsxs as $}from"react/jsx-runtime";var Oe={position:"relative",backgroundColor:"white",color:"black",fontSize:"14px",borderRadius:"9999px",padding:"0 16px",paddingRight:"20px",border:"1px solid #03852e",display:"flex",gap:"8px",alignItems:"center",justifyContent:"center",flexShrink:0,height:"34px"},We={display:"flex",gap:"1px",userSelect:"none"},te={display:"block",width:"12px",height:"12px",borderRadius:"50%",border:"1px solid #03852e",pointerEvents:"none"},K={position:"absolute",top:0,height:"100%",cursor:"pointer",backgroundColor:"transparent",border:"none",padding:0},G=({rating:e,onChange:r,onRemove:o,star:i=!1})=>{let[a,d]=Ae(null),{t:u}=R(),p=a!=null?a:e,t=g=>i&&g?g.toString():u("smartFilter.minRating.label",{value:ee(g)}),n=u("smartFilter.minRating.remove"),s=g=>u("smartFilter.minRating.setTo",{rating:ee(g)}),c=g=>{let b=g+1;return p>=b?"full":p>=b-.5?"half":"empty"},m=g=>{d(null),g!==e&&r(g)},C=g=>{var y;let b=g.relatedTarget;(!b||!((y=g.currentTarget.closest("[data-min-rating-chip]"))!=null&&y.contains(b)))&&d(null)};return $("div",{style:Oe,"data-min-rating-chip":!0,children:[$("div",{style:{display:"flex",alignItems:"center",gap:"4px"},onMouseLeave:()=>d(null),children:[T("div",{style:We,children:Array.from({length:5}).map((g,b)=>{let y=c(b),h=b+1,v=h-.5;if(i)return $("div",{style:{position:"relative",width:"16px",height:"16px"},children:[T(fe,{fill:p>=h?"#03852e":"none",style:{width:"16px",height:"16px",pointerEvents:"none"}}),T("button",{type:"button",style:{...K,left:0,width:"50%",borderRadius:"50% 0 0 50%"},onMouseEnter:()=>d(v),onFocus:()=>d(v),onBlur:C,onClick:()=>m(v),"aria-label":s(v),title:t(v)}),T("button",{type:"button",style:{...K,left:"50%",width:"50%",borderRadius:"0 50% 50% 0"},onMouseEnter:()=>d(h),onFocus:()=>d(h),onBlur:C,onClick:()=>m(h),"aria-label":s(h),title:t(h)})]},b);let F=y==="full"?{...te,backgroundColor:"#03852e"}:te,H={...te,background:"linear-gradient(90deg, #03852e 50%, transparent 50%)"};return $("div",{style:{position:"relative",width:"12px",height:"12px"},children:[T("span",{style:y==="half"?H:F}),T("button",{type:"button",style:{...K,left:0,width:"50%",borderRadius:"50% 0 0 50%",outline:"2px solid transparent",outlineOffset:"1px"},onMouseEnter:()=>d(v),onFocus:()=>d(v),onBlur:C,onClick:()=>m(v),"aria-label":s(v),title:t(v)}),T("button",{type:"button",style:{...K,left:"50%",width:"50%",borderRadius:"0 50% 50% 0",outline:"2px solid transparent",outlineOffset:"1px"},onMouseEnter:()=>d(h),onFocus:()=>d(h),onBlur:C,onClick:()=>m(h),"aria-label":s(h),title:t(h)})]},b)})}),T("span",{style:{whiteSpace:"nowrap"},children:t(p)})]}),T(M,{onClick:o})]})};import{useEffect as _e,useState as re}from"react";import{Fragment as Ke,jsx as I,jsxs as ne}from"react/jsx-runtime";var Ve={position:"relative",backgroundColor:"white",color:"black",fontSize:"14px",borderRadius:"9999px",padding:"0 16px",border:"1px solid #03852e",display:"flex",alignItems:"center",gap:"8px",flexShrink:0,height:"34px"},qe={outline:"none",fontSize:"16px",backgroundColor:"transparent",borderRadius:"2px",padding:"2px 8px",width:"64px",textAlign:"center",border:"none"},Qe={padding:"4px",borderRadius:"50%",cursor:"pointer",transition:"background-color 0.2s",border:"none",backgroundColor:"transparent",color:"#737373",display:"flex",alignItems:"center",justifyContent:"center"},he=({boundary:e,label:r,value:o,placeholder:i,currency:a,isOptional:d=!1,showRemoveButton:u=!1,removeLabel:p,editLabel:t,showAddWhenEmpty:n=!1,onCommit:s,onRemove:c})=>{let[m,C]=re(o!==void 0?String(o):""),[g,b]=re(!1),[y,h]=re(!1),v=o!==void 0;_e(()=>{C(o!==void 0?String(o):""),b(!1)},[o]);let F=()=>{C(o!==void 0?String(o):"")},H=()=>{if(m.trim()===""){if(d){s(void 0),C("");return}F();return}let l=Number(m);if(!Number.isFinite(l)){F();return}let w=Math.max(0,l);if(w===o){F();return}s(w)};return ne("div",{style:Ve,children:[I("span",{style:{fontSize:"10px",textTransform:"uppercase",fontWeight:600,letterSpacing:"0.05em"},children:r}),g?I("input",{value:m,onChange:l=>{let w=l.target.value.replace(/[^\d]/g,"");C(w)},onBlur:()=>{H(),b(!1)},onKeyDown:l=>{if(l.key==="Enter"){l.preventDefault(),l.currentTarget.blur(),b(!1);return}if(l.key==="Escape"){l.preventDefault(),F(),l.currentTarget.blur(),b(!1);return}l.key.length===1&&/[0-9]/.test(l.key)||l.key==="Backspace"||l.key==="Delete"||l.key==="Tab"||l.key==="ArrowLeft"||l.key==="ArrowRight"||l.key==="Home"||l.key==="End"||l.preventDefault()},placeholder:i,inputMode:"numeric",pattern:"[0-9]*","aria-label":r,style:qe,autoFocus:!0}):v?ne("span",{style:{fontSize:"16px"},children:[a,o]}):n?I("button",{type:"button",style:{fontSize:"16px",color:"#737373",cursor:"pointer",border:"none",backgroundColor:"transparent",padding:0},onClick:()=>b(!0),"aria-label":t,children:"+"}):I("span",{style:{fontSize:"16px",color:"#737373"},children:"-"}),(!n||n&&g)&&I("span",{style:{color:"#737373",fontSize:"12px"},children:a}),!g&&(!n||v)&&I("button",{type:"button",style:{...Qe,backgroundColor:y?"#e5e5e5":"transparent"},"aria-label":t,title:t,onClick:()=>b(!0),onMouseEnter:()=>h(!0),onMouseLeave:()=>h(!1),children:I(q,{})}),u&&I(M,{onClick:c})]})},oe=({priceRange:e,currency:r,onChange:o,onRemove:i})=>{let{t:a}=R(),d="Min",u="Max",p=a("smartFilter.priceRange.remove"),t=a("smartFilter.priceRange.edit"),n=(s,c)=>{let m={min:e.min,max:e.max};s==="min"?(m.min=c,c!==void 0&&e.max!==void 0&&c>e.max&&(m.max=c)):(m.max=c,c!==void 0&&e.min!==void 0&&c<e.min&&(m.min=c)),(m.min!==e.min||m.max!==e.max)&&o(m)};return ne(Ke,{children:[I(he,{boundary:"min",label:d,value:e.min,currency:r,editLabel:t,showRemoveButton:e.min!==void 0&&e.min!==0,onCommit:s=>n("min",s),onRemove:i}),I(he,{boundary:"max",label:u,value:e.max,currency:r,isOptional:!0,showRemoveButton:e.max!==void 0,removeLabel:p,editLabel:t,showAddWhenEmpty:!0,onCommit:s=>n("max",s),onRemove:i})]})};import{jsx as A,jsxs as U}from"react/jsx-runtime";var $e={position:"relative",backgroundColor:"white",color:"black",fontSize:"14px",borderRadius:"9999px",padding:"0 16px",paddingRight:"20px",border:"1px solid #03852e",display:"flex",alignItems:"center",gap:"16px",flexShrink:0,height:"34px"},be=[{value:"Cheap Eats",key:"cheapEats"},{value:"Mid Range",key:"midRange"},{value:"Fine Dining",key:"fineDining"}],ie=({values:e,onChange:r,onRemove:o})=>{let{t:i}=R(),a=i("smartFilter.restaurantPriceLevel.label"),d=i("smartFilter.restaurantPriceLevel.remove"),u=i("smartFilter.restaurantPriceLevel.none"),p=t=>{let{value:n,checked:s}=t.target,c=n,m=new Set(e);s?m.add(c):m.delete(c);let C=be.filter(g=>m.has(g.value)).map(g=>g.value);r(C)};return U("div",{style:$e,children:[U("div",{style:{display:"flex",alignItems:"center",gap:"8px",flexWrap:"wrap"},children:[A("span",{style:{fontSize:"10px",textTransform:"uppercase",fontWeight:600,letterSpacing:"0.05em"},children:a}),U("div",{style:{display:"flex",gap:"12px"},children:[be.map(t=>{let n=i(`smartFilter.restaurantPriceLevel.options.${t.key}`),s=`price-level-${t.key}`;return U("label",{htmlFor:s,style:{display:"flex",alignItems:"center",gap:"4px",fontSize:"12px",cursor:"pointer"},children:[A("input",{id:s,type:"checkbox",value:t.value,checked:e.includes(t.value),onChange:p,style:{accentColor:"#03852e",cursor:"pointer"}}),A("span",{children:n})]},t.value)}),e.length===0&&A("span",{style:{fontSize:"12px",color:"#737373"},children:u})]})]}),A(M,{onClick:o})]})};import{useEffect as Ge,useRef as Ue,useState as ae}from"react";import{jsx as D,jsxs as Xe}from"react/jsx-runtime";var Ye={position:"relative",backgroundColor:"white",color:"black",fontSize:"14px",borderRadius:"9999px",padding:"0 16px",paddingRight:"20px",border:"1px solid #03852e",display:"flex",alignItems:"center",gap:"8px",flexShrink:0,userSelect:"none",height:"34px"},Ze={backgroundColor:"#ececec",borderRadius:"2px",padding:"2px 8px",outline:"none",fontSize:"16px",minWidth:"8ch",border:"none"},je={padding:"4px",borderRadius:"50%",cursor:"pointer",transition:"background-color 0.2s",color:"#737373",border:"none",backgroundColor:"transparent",display:"flex",alignItems:"center",justifyContent:"center"},se=({value:e,onChange:r,onRemove:o})=>{let i=Ue(null),[a,d]=ae(e),[u,p]=ae(!1),[t,n]=ae(!1),{t:s}=R(),c=s("smartFilter.transformedQuery.remove"),m=s("smartFilter.transformedQuery.edit");Ge(()=>{d(e),p(!1)},[e]);let C=()=>{let y=a.trim();if(!y.length){d(e);return}y!==e&&r(y)};return Xe("div",{style:Ye,children:[D(V,{style:{width:"16px",height:"16px",color:"#03852e"}}),u?D("input",{ref:i,value:a,onChange:y=>{d(y.target.value)},onBlur:()=>{C(),p(!1)},onKeyDown:y=>{if(y.key==="Enter"){y.preventDefault(),y.currentTarget.blur();return}if(y.key==="Escape"){y.preventDefault(),d(e),y.currentTarget.blur();return}},"aria-label":m,style:Ze,autoFocus:!0}):D("span",{style:{fontSize:"16px"},children:e}),!u&&D("button",{type:"button",style:{...je,backgroundColor:t?"#e5e5e5":"transparent"},"aria-label":m,title:m,onClick:()=>p(!0),onMouseEnter:()=>n(!0),onMouseLeave:()=>n(!1),children:D(q,{})}),D(M,{onClick:o})]})};import{useCallback as Se,useEffect as Je,useRef as et,useState as xe}from"react";var le=e=>{let r=et(null),[o,i]=xe(!0),[a,d]=xe(!0),u=Se(()=>{let t=r.current;if(!t){i(!0),d(!0);return}let{scrollLeft:n,scrollWidth:s,clientWidth:c}=t;i(n<=0),d(n+c>=s-1)},[]);Je(()=>{let t=r.current;if(u(),!t)return;let n=()=>u();return t.addEventListener("scroll",n,{passive:!0}),window.addEventListener("resize",u),()=>{t.removeEventListener("scroll",n),window.removeEventListener("resize",u)}},[e,u]);let p=Se(t=>{let n=r.current;if(!n)return;let s=n.clientWidth*.7;n.scrollBy({left:t==="next"?s:-s,behavior:"smooth"})},[]);return{scrollerRef:r,atStart:o,atEnd:a,scrollByDir:p}};import{jsx as k,jsxs as Pe}from"react/jsx-runtime";var tt={position:"relative",width:"100%"},rt={display:"flex",gap:"8px",overflowX:"auto",alignItems:"center",width:"100%",scrollbarWidth:"none",msOverflowStyle:"none"},Ce={pointerEvents:"none",position:"absolute",top:0,bottom:0,width:"40px"},ve={position:"absolute",top:"50%",transform:"translateY(-50%)",backgroundColor:"white",color:"#003c30",border:"1px solid #003c30",padding:"4px",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",boxShadow:"0 1px 3px rgba(0,0,0,0.1)",cursor:"pointer"},pe=({filters:e,isPortrait:r,currency:o,minRatingSuffix:i,clearAllLabel:a,previousFiltersLabel:d,nextFiltersLabel:u,formatCurrency:p,onFilterChange:t,onResetFilters:n,onClearAll:s})=>{let{scrollerRef:c,atStart:m,atEnd:C,scrollByDir:g}=le(e.length),{t:b}=R(),[y,h]=ce.useState(null),[v,F]=ce.useState(!1),[H,z]=ce.useState(!1),O={...rt,padding:r?"8px 16px":"8px"};return Pe("div",{style:tt,children:[Pe("div",{ref:c,style:{...O,WebkitOverflowScrolling:"touch"},children:[k("style",{children:`
            div::-webkit-scrollbar {
              display: none;
            }
          `}),k("button",{style:{flexShrink:0,backgroundColor:v?"#03a03e":"#03852e",borderRadius:"50%",padding:"8px",cursor:"pointer",border:"none",display:"flex",alignItems:"center",justifyContent:"center",transition:"background-color 0.2s"},onClick:n,onMouseEnter:()=>F(!0),onMouseLeave:()=>F(!1),children:k(V,{style:{width:"20px",height:"20px",color:"white"}})}),e.map(l=>{var W,_,B;let w=()=>k(J,{label:l.label,icon:l.icon,remove:()=>{t(e.filter(S=>S.id!==l.id))}},l.id);if(l.type==="minRating"){let S=(W=l.numericValue)!=null?W:Number(l.value);return Number.isFinite(S)?k(G,{rating:S,onChange:P=>{let x=e.map(L=>L.id===l.id?{...L,numericValue:P,value:String(P)}:L);t(x)},onRemove:()=>void t(e.filter(P=>P.id!==l.id))},l.id):w()}if(l.type==="starRating"){let S=(_=l.numericValue)!=null?_:Number(l.value);return Number.isFinite(S)?k(G,{star:!0,rating:S,onChange:P=>{let x=e.map(L=>L.id===l.id?{...L,numericValue:P,value:String(P)}:L);t(x)},onRemove:()=>void t(e.filter(P=>P.id!==l.id))},l.id):w()}return l.type==="priceRange"&&l.priceRange?k(oe,{priceRange:l.priceRange,currency:o,onChange:S=>{let P=e.map(x=>x.id===l.id?{...x,priceRange:S}:x);t(P)},onRemove:()=>void t(e.filter(S=>S.id!==l.id))},l.id):l.type==="transformed_query"?k(se,{value:l.value,onChange:S=>{let P=e.map(x=>x.id===l.id?{...x,value:S}:x);t(P)},onRemove:()=>void t(e.filter(S=>S.id!==l.id))},l.id):l.type==="selected_restaurant_price_levels"?k(ie,{values:(B=l.priceLevels)!=null?B:[],onChange:S=>{let P=e.map(x=>x.id===l.id?{...x,priceLevels:S}:x);t(P)},onRemove:()=>void t(e.filter(S=>S.id!==l.id))},l.id):w()}),k("button",{style:{flexShrink:0,padding:"4px 16px",borderRadius:"9999px",cursor:"pointer",fontSize:"14px",userSelect:"none",border:"none",backgroundColor:H?"#e5e5e5":"transparent",transition:"background-color 0.2s"},onClick:s,onMouseEnter:()=>z(!0),onMouseLeave:()=>z(!1),children:a})]}),!m&&k("div",{"aria-hidden":"true",style:{...Ce,left:0,background:"linear-gradient(to right, white, transparent)"}}),!C&&k("div",{"aria-hidden":"true",style:{...Ce,right:0,background:"linear-gradient(to left, white, transparent)"}}),!m&&k("button",{type:"button","aria-label":d,style:{...ve,left:"4px",transform:"translateY(-50%) rotate(180deg)",backgroundColor:y==="prev"?"#e5e5e5":"white"},onClick:()=>g("prev"),onMouseEnter:()=>h("prev"),onMouseLeave:()=>h(null),children:k(Z,{style:{width:"20px",height:"20px"}})}),!C&&k("button",{type:"button","aria-label":u,style:{...ve,right:"4px",backgroundColor:y==="next"?"#e5e5e5":"white"},onClick:()=>g("next"),onMouseEnter:()=>h("next"),onMouseLeave:()=>h(null),children:k(Z,{style:{width:"20px",height:"20px"}})})]})};import{useEffect as nt,useState as ot}from"react";var ue=()=>{let[e,r]=ot(typeof window!="undefined"?window.innerHeight>window.innerWidth:!1);return nt(()=>{if(typeof window=="undefined")return;let o=()=>{r(window.innerHeight>window.innerWidth)};return window.addEventListener("resize",o),()=>window.removeEventListener("resize",o)},[]),e};import{jsx as N,jsxs as ke}from"react/jsx-runtime";var at={position:"relative",display:"flex",flexDirection:"column",gap:"8px",width:"100%"},st={position:"relative",display:"flex",alignItems:"center",gap:"8px",width:"100%"},lt={position:"relative",display:"flex",alignItems:"center",flex:1,backgroundColor:"white",borderRadius:"24px",border:"1px solid #e5e5e5",padding:"0 16px",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},ct={flex:1,border:"none",outline:"none",fontSize:"16px",backgroundColor:"transparent",color:"#000",padding:"10px"},pt={position:"absolute",right:"16px",top:"50%",transform:"translateY(-50%)"},ut={width:"20px",height:"20px",border:"2px solid #e5e5e5",borderTop:"2px solid #03852e",borderRadius:"50%",animation:"spin 1s linear infinite"},dt={position:"absolute",padding:"10px",color:"#737373",pointerEvents:"none",fontSize:"16px"},mt=({mapFirst:e,filters:r,value:o,isSearching:i=!1,placeholder:a,onSearch:d,onFilterChange:u,onValueChange:p,showTypingPrompt:t=!0,customTranslations:n,currency:s="USD",style:c,inputStyle:m,containerStyle:C})=>{let[g,b]=it(""),y=o!==void 0?o:g,h=p||b,v=ue(),{t:F,formatCurrency:H}=R(n),z=F("smartFilter.minRating.suffix"),O=a||F("smartFilter.typingPrompt"),l=F("smartFilter.nav.previous"),w=F("smartFilter.nav.next"),W=F("smartFilter.clearAll"),_=async x=>{x.preventDefault();let L=y.trim();if(!(!L||i))try{await d(L)}catch(Y){console.error("Search error:",Y)}},B=de(async(x,L)=>{if(!i)try{await u(x)}catch(Y){console.error("Filter change error:",Y)}},[i,u]),S=de(()=>{B([])},[B]),P=de(()=>{B([],!0),h("")},[B,h]);return ke("div",{style:{...at,...C},children:[N("style",{children:`
          @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
          }
        `}),N("form",{onSubmit:_,style:{...st,...c},children:ke("div",{style:lt,children:[N("input",{type:"text",value:y,onChange:x=>h(x.target.value),disabled:i,style:{...ct,...m},autoComplete:"off","aria-label":"Smart search"}),t&&y.length===0&&!i&&N("span",{style:dt,children:O}),i&&N("div",{style:pt,children:N("div",{style:ut})})]})}),r.length>0&&N(pe,{filters:r,isPortrait:v,currency:s,minRatingSuffix:z,clearAllLabel:W,previousFiltersLabel:l,nextFiltersLabel:w,formatCurrency:H,onFilterChange:B,onResetFilters:S,onClearAll:P})]})};import{jsx as Fe,jsxs as Re}from"react/jsx-runtime";function on(e){let r=f.useRef(null),[o,i]=f.useState(null),a=f.useRef(e);return f.useEffect(()=>{a.current=e}),f.useEffect(()=>{let d=a.current,u={adapter:null,...d,callbacks:{...d.callbacks,onPropertiesChange:t=>{var n,s;i(c=>c?{...c,properties:t}:null),(s=(n=a.current.callbacks)==null?void 0:n.onPropertiesChange)==null||s.call(n,t)},onSelectedPropertyChange:t=>{var n,s;i(c=>c?{...c,selectedPropertyId:t}:null),(s=(n=a.current.callbacks)==null?void 0:n.onSelectedPropertyChange)==null||s.call(n,t)},onPrimaryTypeChange:t=>{var n,s;i(c=>c?{...c,primary:t}:null),(s=(n=a.current.callbacks)==null?void 0:n.onPrimaryTypeChange)==null||s.call(n,t)},onFiltersChange:t=>{var n,s;i(c=>c?{...c,filters:t}:null),(s=(n=a.current.callbacks)==null?void 0:n.onFiltersChange)==null||s.call(n,t)},onBoundsChange:t=>{var n,s;i(c=>c?{...c,bounds:t}:null),(s=(n=a.current.callbacks)==null?void 0:n.onBoundsChange)==null||s.call(n,t)},onPendingBoundsChange:t=>{var n,s;i(c=>c?{...c,pendingBounds:t}:null),(s=(n=a.current.callbacks)==null?void 0:n.onPendingBoundsChange)==null||s.call(n,t)},onCenterChange:(t,n)=>{var s,c;i(m=>m?{...m,center:t,zoom:n}:null),(c=(s=a.current.callbacks)==null?void 0:s.onCenterChange)==null||c.call(s,t,n)},onZoomChange:t=>{var n,s;i(c=>c?{...c,zoom:t}:null),(s=(n=a.current.callbacks)==null?void 0:n.onZoomChange)==null||s.call(n,t)},onActiveLocationChange:t=>{var n,s;i(c=>c?{...c,activeLocation:t}:null),(s=(n=a.current.callbacks)==null?void 0:n.onActiveLocationChange)==null||s.call(n,t)},onLoadingStateChange:t=>{var n,s;i(c=>c?{...c,initialLoading:t}:null),(s=(n=a.current.callbacks)==null?void 0:n.onLoadingStateChange)==null||s.call(n,t)},onSearchingStateChange:t=>{var n,s;i(c=>c?{...c,isSearching:t}:null),(s=(n=a.current.callbacks)==null?void 0:n.onSearchingStateChange)==null||s.call(n,t)}}},p=new we(u);return r.current=p,i(p.getState()),()=>{p.destroy(),r.current=null,i(null)}},[]),{mapFirst:r.current,state:o}}function an(e){let[r,o]=f.useState([]);return f.useEffect(()=>{if(!e){o([]);return}o(e.getState().properties)},[e]),r}function sn(e){let[r,o]=f.useState(null);return f.useEffect(()=>{if(!e){o(null);return}o(e.getState().selectedPropertyId)},[e]),r}function ln(e){let[r,o]=f.useState("Accommodation");f.useEffect(()=>{if(!e){o("Accommodation");return}o(e.getState().primary)},[e]);let i=f.useCallback(a=>{e&&(e.setPrimaryType(a),o(a))},[e]);return[r,i]}function cn(e){let[r,o]=f.useState(null);f.useEffect(()=>{if(!e){o(null);return}o(e.getState().selectedPropertyId)},[e]);let i=f.useCallback(a=>{e&&e.setSelectedMarker(a)},[e]);return[r,i]}function pn({mapFirst:e,map:r,maplibregl:o,onMarkerClick:i}){let a=f.useRef(!1);f.useEffect(()=>{!e||!r||a.current||(e.attachMap(r,{platform:"maplibre",maplibregl:o,onMarkerClick:i}),a.current=!0)},[e,r,o,i])}function un({mapFirst:e,map:r,google:o,onMarkerClick:i}){let a=f.useRef(!1);f.useEffect(()=>{!e||!r||a.current||(e.attachMap(r,{platform:"google",google:o,onMarkerClick:i}),a.current=!0)},[e,r,o,i])}function dn({mapFirst:e,map:r,mapboxgl:o,onMarkerClick:i}){let a=f.useRef(!1);f.useEffect(()=>{!e||!r||a.current||(e.attachMap(r,{platform:"mapbox",mapboxgl:o,onMarkerClick:i}),a.current=!0)},[e,r,o,i])}function mn(e){let r=f.useRef(null);return f.useEffect(()=>{if(!e)return;let o=new we(e);return r.current=o,()=>{o.destroy(),r.current=null}},[e]),r}function fn(e){let[r,o]=f.useState(!1),[i,a]=f.useState(null);return{search:f.useCallback(async u=>{if(!e){let p=new Error("MapFirst instance not available");throw a(p),p}o(!0),a(null);try{return await e.runPropertiesSearch({...u,onError:t=>{let n=t instanceof Error?t:new Error(String(t));a(n)}})}catch(p){let t=p instanceof Error?p:new Error(String(p));throw a(t),t}finally{o(!1)}},[e]),isLoading:r,error:i}}function gn(e){let[r,o]=f.useState(!1),[i,a]=f.useState(null);return{search:f.useCallback(async u=>{if(!e){let p=new Error("MapFirst instance not available");throw a(p),p}o(!0),a(null);try{return await e.runSmartFilterSearch({...u,onError:t=>{let n=t instanceof Error?t:new Error(String(t));a(n)}})}catch(p){let t=p instanceof Error?p:new Error(String(p));throw a(t),t}finally{o(!1)}},[e]),isLoading:r,error:i}}function yn(e){let[r,o]=f.useState(!1),[i,a]=f.useState(null);return{performBoundsSearch:f.useCallback(async()=>{if(!e)return null;o(!0),a(null);try{return await e.performBoundsSearch()}catch(u){let p=u instanceof Error?u:new Error(String(u));throw a(p),p}finally{o(!1)}},[e]),isSearching:r,error:i}}function hn({markers:e}){return Re("div",{style:{fontFamily:"sans-serif",fontSize:14},children:[Fe("strong",{children:"Markers"}),Fe("ul",{children:e.map(r=>{var o,i,a,d,u,p;return Re("li",{children:[r.name," \u2014 ",(a=(i=(o=r.location)==null?void 0:o.lat)==null?void 0:i.toFixed(3))!=null?a:"n/a",","," ",(p=(u=(d=r.location)==null?void 0:d.lon)==null?void 0:u.toFixed(3))!=null?p:"n/a"]},String(r.tripadvisor_id))})})]})}export{J as Chip,me as CloseIcon,q as EditIcon,pe as FilterChips,hn as MarkerDebugList,G as MinRatingFilterChip,Z as NextIcon,oe as PriceRangeFilterChip,ie as RestaurantPriceLevelChip,V as SearchIcon,mt as SmartFilter,fe as StarIcon,se as TransformedQueryChip,Rt as createMinRatingFilterLabel,wt as createPriceRangeFilterLabel,ee as formatRatingValue,De as renderStars,le as useFilterScroll,un as useGoogleMapsAttachment,ue as useIsPortrait,mn as useMapFirst,yn as useMapFirstBoundsSearch,on as useMapFirstCore,an as useMapFirstProperties,sn as useMapFirstSelectedProperty,pn as useMapLibreAttachment,dn as useMapboxAttachment,ln as usePrimaryType,fn as usePropertiesSearch,cn as useSelectedMarker,gn as useSmartFilterSearch,R as useTranslation};
//# sourceMappingURL=index.mjs.map