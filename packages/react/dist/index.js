"use strict";var S=Object.create;var d=Object.defineProperty;var h=Object.getOwnPropertyDescriptor;var b=Object.getOwnPropertyNames;var P=Object.getPrototypeOf,k=Object.prototype.hasOwnProperty;var m=(e,n)=>{for(var r in n)d(e,r,{get:n[r],enumerable:!0})},C=(e,n,r,l)=>{if(n&&typeof n=="object"||typeof n=="function")for(let a of b(n))!k.call(e,a)&&a!==r&&d(e,a,{get:()=>n[a],enumerable:!(l=h(n,a))||l.enumerable});return e};var x=(e,n,r)=>(r=e!=null?S(P(e)):{},C(n||!e||!e.__esModule?d(r,"default",{value:e,enumerable:!0}):r,e)),R=e=>C(d({},"__esModule",{value:!0}),e);var v={};m(v,{MarkerDebugList:()=>G,useGoogleMapsAttachment:()=>O,useMapFirst:()=>B,useMapFirstCore:()=>T,useMapFirstProperties:()=>E,useMapFirstSelectedProperty:()=>L,useMapLibreAttachment:()=>N,useMapboxAttachment:()=>I,usePrimaryType:()=>F,useSelectedMarker:()=>A});module.exports=R(v);var s=x(require("react")),M=require("@mapfirst.ai/core"),p=require("react/jsx-runtime");function T(e){let n=s.default.useRef(null),[r,l]=s.default.useState(null),a=s.default.useRef(e);return s.default.useEffect(()=>{a.current=e}),s.default.useEffect(()=>{let f=a.current,y={adapter:null,...f,callbacks:{...f.callbacks,onPropertiesChange:u=>{var t,o;l(c=>c?{...c,properties:u}:null),(o=(t=a.current.callbacks)==null?void 0:t.onPropertiesChange)==null||o.call(t,u)},onSelectedPropertyChange:u=>{var t,o;l(c=>c?{...c,selectedPropertyId:u}:null),(o=(t=a.current.callbacks)==null?void 0:t.onSelectedPropertyChange)==null||o.call(t,u)},onPrimaryTypeChange:u=>{var t,o;l(c=>c?{...c,primary:u}:null),(o=(t=a.current.callbacks)==null?void 0:t.onPrimaryTypeChange)==null||o.call(t,u)},onFiltersChange:u=>{var t,o;l(c=>c?{...c,filters:u}:null),(o=(t=a.current.callbacks)==null?void 0:t.onFiltersChange)==null||o.call(t,u)},onBoundsChange:u=>{var t,o;l(c=>c?{...c,bounds:u}:null),(o=(t=a.current.callbacks)==null?void 0:t.onBoundsChange)==null||o.call(t,u)},onCenterChange:(u,t)=>{var o,c;l(g=>g?{...g,center:u,zoom:t}:null),(c=(o=a.current.callbacks)==null?void 0:o.onCenterChange)==null||c.call(o,u,t)},onZoomChange:u=>{var t,o;l(c=>c?{...c,zoom:u}:null),(o=(t=a.current.callbacks)==null?void 0:t.onZoomChange)==null||o.call(t,u)},onActiveLocationChange:u=>{var t,o;l(c=>c?{...c,activeLocation:u}:null),(o=(t=a.current.callbacks)==null?void 0:t.onActiveLocationChange)==null||o.call(t,u)},onLoadingStateChange:u=>{var t,o;l(c=>c?{...c,initialLoading:u}:null),(o=(t=a.current.callbacks)==null?void 0:t.onLoadingStateChange)==null||o.call(t,u)},onSearchingStateChange:u=>{var t,o;l(c=>c?{...c,isSearching:u}:null),(o=(t=a.current.callbacks)==null?void 0:t.onSearchingStateChange)==null||o.call(t,u)}}},i=new M.MapFirstCore(y);return n.current=i,l(i.getState()),()=>{i.destroy(),n.current=null,l(null)}},[]),{mapFirst:n.current,state:r}}function E(e){let[n,r]=s.default.useState([]);return s.default.useEffect(()=>{if(!e){r([]);return}r(e.getState().properties)},[e]),n}function L(e){let[n,r]=s.default.useState(null);return s.default.useEffect(()=>{if(!e){r(null);return}r(e.getState().selectedPropertyId)},[e]),n}function F(e){let[n,r]=s.default.useState("Accommodation");s.default.useEffect(()=>{if(!e){r("Accommodation");return}r(e.getState().primary)},[e]);let l=s.default.useCallback(a=>{e&&(e.setPrimaryType(a),r(a))},[e]);return[n,l]}function A(e){let[n,r]=s.default.useState(null);s.default.useEffect(()=>{if(!e){r(null);return}console.log("useSelectedMarker: mapFirst available"),r(e.getState().selectedPropertyId)},[e]);let l=s.default.useCallback(a=>{e&&e.setSelectedMarker(a)},[e]);return[n,l]}function N({mapFirst:e,map:n,maplibregl:r,onMarkerClick:l}){let a=s.default.useRef(!1);s.default.useEffect(()=>{!e||!n||a.current||(e.attachMap(n,{platform:"maplibre",maplibregl:r,onMarkerClick:l}),a.current=!0)},[e,n,r,l])}function O({mapFirst:e,map:n,google:r,onMarkerClick:l}){let a=s.default.useRef(!1);s.default.useEffect(()=>{!e||!n||a.current||(e.attachMap(n,{platform:"google",google:r,onMarkerClick:l}),a.current=!0)},[e,n,r,l])}function I({mapFirst:e,map:n,mapboxgl:r,onMarkerClick:l}){let a=s.default.useRef(!1);s.default.useEffect(()=>{!e||!n||a.current||(e.attachMap(n,{platform:"mapbox",mapboxgl:r,onMarkerClick:l}),a.current=!0)},[e,n,r,l])}function B(e){let n=s.default.useRef(null);return s.default.useEffect(()=>{if(!e)return;let r=new M.MapFirstCore(e);return n.current=r,()=>{r.destroy(),n.current=null}},[e]),n}function G({markers:e}){return(0,p.jsxs)("div",{style:{fontFamily:"sans-serif",fontSize:14},children:[(0,p.jsx)("strong",{children:"Markers"}),(0,p.jsx)("ul",{children:e.map(n=>{var r,l,a,f,y,i;return(0,p.jsxs)("li",{children:[n.name," \u2014 ",(a=(l=(r=n.location)==null?void 0:r.lat)==null?void 0:l.toFixed(3))!=null?a:"n/a",","," ",(i=(y=(f=n.location)==null?void 0:f.lon)==null?void 0:y.toFixed(3))!=null?i:"n/a"]},String(n.tripadvisor_id))})})]})}0&&(module.exports={MarkerDebugList,useGoogleMapsAttachment,useMapFirst,useMapFirstCore,useMapFirstProperties,useMapFirstSelectedProperty,useMapLibreAttachment,useMapboxAttachment,usePrimaryType,useSelectedMarker});
//# sourceMappingURL=index.js.map