"use strict";var Ee=Object.create;var J=Object.defineProperty;var Me=Object.getOwnPropertyDescriptor;var Ie=Object.getOwnPropertyNames;var Te=Object.getPrototypeOf,Be=Object.prototype.hasOwnProperty;var Ne=(e,t)=>{for(var i in t)J(e,i,{get:t[i],enumerable:!0})},Se=(e,t,i,r)=>{if(t&&typeof t=="object"||typeof t=="function")for(let a of Ie(t))!Be.call(e,a)&&a!==i&&J(e,a,{get:()=>t[a],enumerable:!(r=Me(t,a))||r.enumerable});return e};var ue=(e,t,i)=>(i=e!=null?Ee(Te(e)):{},Se(t||!e||!e.__esModule?J(i,"default",{value:e,enumerable:!0}):i,e)),He=e=>Se(J({},"__esModule",{value:!0}),e);var lt={};Ne(lt,{Chip:()=>te,CloseIcon:()=>me,EditIcon:()=>Z,FilterChips:()=>le,MinRatingFilterChip:()=>X,NextIcon:()=>ee,PriceRangeFilterChip:()=>oe,RestaurantPriceLevelChip:()=>ie,SearchIcon:()=>de,SmartFilter:()=>Le,StarIcon:()=>ge,TransformedQueryChip:()=>ae,convertToApiFilters:()=>ce.convertToApiFilters,createMinRatingFilterLabel:()=>_e,createPriceRangeFilterLabel:()=>We,formatRatingValue:()=>re,processApiFilters:()=>ce.processApiFilters,renderStars:()=>xe,useFilterScroll:()=>se,useMapFirst:()=>st,useTranslation:()=>D});module.exports=He(lt);var L=ue(require("react")),we=require("@mapfirst.ai/core"),ce=require("@mapfirst.ai/core");var Y=require("react");var he=ue(require("react"));var Ce=ue(require("react"));var N=require("react/jsx-runtime"),de=({className:e,style:t})=>(0,N.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:e,style:{width:"1em",height:"1em",...t},children:[(0,N.jsx)("circle",{cx:"11",cy:"11",r:"8"}),(0,N.jsx)("path",{d:"m21 21-4.35-4.35"})]}),me=({className:e,style:t})=>(0,N.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:e,style:{width:"1em",height:"1em",...t},children:[(0,N.jsx)("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),(0,N.jsx)("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]}),Z=({className:e,style:t})=>(0,N.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:e,style:{width:"1em",height:"1em",...t},children:[(0,N.jsx)("path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"}),(0,N.jsx)("path",{d:"M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"})]}),ee=({className:e,style:t})=>(0,N.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:e,style:{width:"1em",height:"1em",...t},children:(0,N.jsx)("polyline",{points:"9 18 15 12 9 6"})}),ge=({className:e,style:t,fill:i="none"})=>(0,N.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:i,stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:e,style:{width:"1em",height:"1em",...t},children:(0,N.jsx)("polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"})});var ye=require("react/jsx-runtime"),De={position:"absolute",top:"-8px",right:"-8px",padding:"2px",borderRadius:"50%",backgroundColor:"white",border:"1px solid #03852e",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",transition:"background-color 0.2s"},Ae={width:"17px",height:"17px"},V=({onClick:e,style:t})=>{let[i,r]=Ce.default.useState(!1);return(0,ye.jsx)("button",{style:{...De,backgroundColor:i?"#e5e5e5":"white",...t},onClick:e,onMouseEnter:()=>r(!0),onMouseLeave:()=>r(!1),"aria-label":"Remove filter",children:(0,ye.jsx)(me,{style:Ae})})};var G=require("react/jsx-runtime"),ze={position:"relative",backgroundColor:"white",color:"black",fontSize:"14px",borderRadius:"9999px",padding:"0 16px",paddingRight:"20px",border:"1px solid #03852e",display:"flex",alignItems:"center",gap:"8px",flexShrink:0,height:"34px"},te=({label:e,icon:t,remove:i,style:r})=>(0,G.jsxs)("div",{style:{...ze,...r},children:[t&&(0,G.jsx)("span",{style:{display:"flex",alignItems:"center"},children:t}),(0,G.jsx)("span",{style:{whiteSpace:"nowrap"},children:e}),(0,G.jsx)(V,{onClick:i})]});var ve=require("react");var j=require("react"),Oe={"smartFilter.typingPrompt":"Search for hotels, restaurants, or attractions...","smartFilter.nav.previous":"Previous filters","smartFilter.nav.next":"Next filters","smartFilter.toast.locationRequired":"Please select a location first","smartFilter.clearAll":"Clear all","smartFilter.minRating.suffix":"+","smartFilter.minRating.label":"{{value}}+","smartFilter.minRating.remove":"Remove rating filter","smartFilter.minRating.setTo":"Set rating to {{rating}}","smartFilter.priceRange.label":"Price Range","smartFilter.priceRange.remove":"Remove price filter","smartFilter.priceRange.edit":"Edit price","smartFilter.transformedQuery.remove":"Remove search query","smartFilter.transformedQuery.edit":"Edit search query","smartFilter.restaurantPriceLevel.label":"Price Level","smartFilter.restaurantPriceLevel.remove":"Remove price level filter","smartFilter.restaurantPriceLevel.none":"Any","smartFilter.restaurantPriceLevel.options.cheapEats":"Cheap Eats","smartFilter.restaurantPriceLevel.options.midRange":"Mid Range","smartFilter.restaurantPriceLevel.options.fineDining":"Fine Dining"},Ve=(e,t="USD")=>new Intl.NumberFormat("en-US",{style:"currency",currency:t,minimumFractionDigits:0,maximumFractionDigits:0}).format(e),D=(e,t)=>{let[i,r]=(0,j.useState)("en"),a=(0,j.useCallback)((f,c)=>{let d={...Oe,...e}[f]||f;return c&&Object.keys(c).forEach(u=>{d=d.replace(new RegExp(`{{${u}}}`,"g"),String(c[u]))}),d},[e]),m=(0,j.useCallback)((f,c)=>t?t(f,c):Ve(f,c),[t]);return{t:a,locale:i,setLocale:r,formatCurrency:m}};var $=require("react/jsx-runtime"),xe=e=>{let t=[],i=Math.floor(e),r=e%1!==0,a={display:"block",width:"12px",height:"12px",borderRadius:"50%",border:"1px solid #03852e",pointerEvents:"none"},m={...a,backgroundColor:"#03852e"},f={...a,background:"linear-gradient(90deg, #03852e 50%, transparent 50%)"};for(let s=0;s<i;s+=1)t.push((0,$.jsx)("span",{style:m},`full-${s}`));r&&t.push((0,$.jsx)("span",{style:f},"half"));let c=Math.max(0,5-Math.ceil(e));for(let s=0;s<c;s+=1)t.push((0,$.jsx)("span",{style:a},`empty-${s}`));return t},_e=(e,t)=>(0,$.jsxs)("span",{style:{display:"flex",alignItems:"center",gap:"4px"},children:[(0,$.jsx)("span",{style:{display:"flex",gap:"1px",userSelect:"none"},children:xe(e)})," ",t]}),re=e=>e.toFixed(1),We=(e,t,i,r)=>`${r(e,i)} - ${r(t!=null?t:0,i)}`;var H=require("react/jsx-runtime"),qe={position:"relative",backgroundColor:"white",color:"black",fontSize:"14px",borderRadius:"9999px",padding:"0 16px",paddingRight:"20px",border:"1px solid #03852e",display:"flex",gap:"8px",alignItems:"center",justifyContent:"center",flexShrink:0,height:"34px"},Qe={display:"flex",gap:"1px",userSelect:"none"},fe={display:"block",width:"12px",height:"12px",borderRadius:"50%",border:"1px solid #03852e",pointerEvents:"none"},ne={position:"absolute",top:0,height:"100%",cursor:"pointer",backgroundColor:"transparent",border:"none",padding:0},X=({rating:e,onChange:t,onRemove:i,star:r=!1})=>{let[a,m]=(0,ve.useState)(null),{t:f}=D(),c=a!=null?a:e,s=C=>r&&C?C.toString():f("smartFilter.minRating.label",{value:re(C)}),d=f("smartFilter.minRating.remove"),u=C=>f("smartFilter.minRating.setTo",{rating:re(C)}),P=C=>{let x=C+1;return c>=x?"full":c>=x-.5?"half":"empty"},h=C=>{m(null),C!==e&&t(C)},w=C=>{var v;let x=C.relatedTarget;(!x||!((v=C.currentTarget.closest("[data-min-rating-chip]"))!=null&&v.contains(x)))&&m(null)};return(0,H.jsxs)("div",{style:qe,"data-min-rating-chip":!0,children:[(0,H.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"4px"},onMouseLeave:()=>m(null),children:[(0,H.jsx)("div",{style:Qe,children:Array.from({length:5}).map((C,x)=>{let v=P(x),R=x+1,n=R-.5;if(r)return(0,H.jsxs)("div",{style:{position:"relative",width:"16px",height:"16px"},children:[(0,H.jsx)(ge,{fill:c>=R?"#03852e":"none",style:{width:"16px",height:"16px",pointerEvents:"none"}}),(0,H.jsx)("button",{type:"button",style:{...ne,left:0,width:"50%",borderRadius:"50% 0 0 50%"},onMouseEnter:()=>m(n),onFocus:()=>m(n),onBlur:w,onClick:()=>h(n),"aria-label":u(n),title:s(n)}),(0,H.jsx)("button",{type:"button",style:{...ne,left:"50%",width:"50%",borderRadius:"0 50% 50% 0"},onMouseEnter:()=>m(R),onFocus:()=>m(R),onBlur:w,onClick:()=>h(R),"aria-label":u(R),title:s(R)})]},x);let B=v==="full"?{...fe,backgroundColor:"#03852e"}:fe,A={...fe,background:"linear-gradient(90deg, #03852e 50%, transparent 50%)"};return(0,H.jsxs)("div",{style:{position:"relative",width:"12px",height:"12px"},children:[(0,H.jsx)("span",{style:v==="half"?A:B}),(0,H.jsx)("button",{type:"button",style:{...ne,left:0,width:"50%",borderRadius:"50% 0 0 50%",outline:"2px solid transparent",outlineOffset:"1px"},onMouseEnter:()=>m(n),onFocus:()=>m(n),onBlur:w,onClick:()=>h(n),"aria-label":u(n),title:s(n)}),(0,H.jsx)("button",{type:"button",style:{...ne,left:"50%",width:"50%",borderRadius:"0 50% 50% 0",outline:"2px solid transparent",outlineOffset:"1px"},onMouseEnter:()=>m(R),onFocus:()=>m(R),onBlur:w,onClick:()=>h(R),"aria-label":u(R),title:s(R)})]},x)})}),(0,H.jsx)("span",{style:{whiteSpace:"nowrap"},children:s(c)})]}),(0,H.jsx)(V,{onClick:i})]})};var U=require("react");var I=require("react/jsx-runtime"),Ke={position:"relative",backgroundColor:"white",color:"black",fontSize:"14px",borderRadius:"9999px",padding:"0 16px",border:"1px solid #03852e",display:"flex",alignItems:"center",gap:"8px",flexShrink:0,height:"34px"},$e={outline:"none",fontSize:"16px",backgroundColor:"transparent",borderRadius:"2px",padding:"2px 8px",width:"64px",textAlign:"center",border:"none"},Ge={padding:"4px",borderRadius:"50%",cursor:"pointer",transition:"background-color 0.2s",border:"none",backgroundColor:"transparent",color:"#737373",display:"flex",alignItems:"center",justifyContent:"center"},ke=({boundary:e,label:t,value:i,placeholder:r,currency:a,isOptional:m=!1,showRemoveButton:f=!1,removeLabel:c,editLabel:s,showAddWhenEmpty:d=!1,onCommit:u,onRemove:P})=>{let[h,w]=(0,U.useState)(i!==void 0?String(i):""),[C,x]=(0,U.useState)(!1),[v,R]=(0,U.useState)(!1),n=i!==void 0;(0,U.useEffect)(()=>{w(i!==void 0?String(i):""),x(!1)},[i]);let B=()=>{w(i!==void 0?String(i):"")},A=()=>{if(h.trim()===""){if(m){u(void 0),w("");return}B();return}let l=Number(h);if(!Number.isFinite(l)){B();return}let k=Math.max(0,l);if(k===i){B();return}u(k)};return(0,I.jsxs)("div",{style:Ke,children:[(0,I.jsx)("span",{style:{fontSize:"10px",textTransform:"uppercase",fontWeight:600,letterSpacing:"0.05em"},children:t}),C?(0,I.jsx)("input",{value:h,onChange:l=>{let k=l.target.value.replace(/[^\d]/g,"");w(k)},onBlur:()=>{A(),x(!1)},onKeyDown:l=>{if(l.key==="Enter"){l.preventDefault(),l.currentTarget.blur(),x(!1);return}if(l.key==="Escape"){l.preventDefault(),B(),l.currentTarget.blur(),x(!1);return}l.key.length===1&&/[0-9]/.test(l.key)||l.key==="Backspace"||l.key==="Delete"||l.key==="Tab"||l.key==="ArrowLeft"||l.key==="ArrowRight"||l.key==="Home"||l.key==="End"||l.preventDefault()},placeholder:r,inputMode:"numeric",pattern:"[0-9]*","aria-label":t,style:$e,autoFocus:!0}):n?(0,I.jsxs)("span",{style:{fontSize:"16px"},children:[a,i]}):d?(0,I.jsx)("button",{type:"button",style:{fontSize:"16px",color:"#737373",cursor:"pointer",border:"none",backgroundColor:"transparent",padding:0},onClick:()=>x(!0),"aria-label":s,children:"+"}):(0,I.jsx)("span",{style:{fontSize:"16px",color:"#737373"},children:"-"}),(!d||d&&C)&&(0,I.jsx)("span",{style:{color:"#737373",fontSize:"12px"},children:a}),!C&&(!d||n)&&(0,I.jsx)("button",{type:"button",style:{...Ge,backgroundColor:v?"#e5e5e5":"transparent"},"aria-label":s,title:s,onClick:()=>x(!0),onMouseEnter:()=>R(!0),onMouseLeave:()=>R(!1),children:(0,I.jsx)(Z,{})}),f&&(0,I.jsx)(V,{onClick:P})]})},oe=({priceRange:e,currency:t,onChange:i,onRemove:r})=>{let{t:a}=D(),m="Min",f="Max",c=a("smartFilter.priceRange.remove"),s=a("smartFilter.priceRange.edit"),d=(u,P)=>{let h={min:e.min,max:e.max};u==="min"?(h.min=P,P!==void 0&&e.max!==void 0&&P>e.max&&(h.max=P)):(h.max=P,P!==void 0&&e.min!==void 0&&P<e.min&&(h.min=P)),(h.min!==e.min||h.max!==e.max)&&i(h)};return(0,I.jsxs)(I.Fragment,{children:[(0,I.jsx)(ke,{boundary:"min",label:m,value:e.min,currency:t,editLabel:s,showRemoveButton:e.min!==void 0&&e.min!==0,onCommit:u=>d("min",u),onRemove:r}),(0,I.jsx)(ke,{boundary:"max",label:f,value:e.max,currency:t,isOptional:!0,showRemoveButton:e.max!==void 0,removeLabel:c,editLabel:s,showAddWhenEmpty:!0,onCommit:u=>d("max",u),onRemove:r})]})};var z=require("react/jsx-runtime"),Ue={position:"relative",backgroundColor:"white",color:"black",fontSize:"14px",borderRadius:"9999px",padding:"0 16px",paddingRight:"20px",border:"1px solid #03852e",display:"flex",alignItems:"center",gap:"16px",flexShrink:0,height:"34px"},Fe=[{value:"Cheap Eats",key:"cheapEats"},{value:"Mid Range",key:"midRange"},{value:"Fine Dining",key:"fineDining"}],ie=({values:e,onChange:t,onRemove:i})=>{let{t:r}=D(),a=r("smartFilter.restaurantPriceLevel.label"),m=r("smartFilter.restaurantPriceLevel.remove"),f=r("smartFilter.restaurantPriceLevel.none"),c=s=>{let{value:d,checked:u}=s.target,P=d,h=new Set(e);u?h.add(P):h.delete(P);let w=Fe.filter(C=>h.has(C.value)).map(C=>C.value);t(w)};return(0,z.jsxs)("div",{style:Ue,children:[(0,z.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"8px",flexWrap:"wrap"},children:[(0,z.jsx)("span",{style:{fontSize:"10px",textTransform:"uppercase",fontWeight:600,letterSpacing:"0.05em"},children:a}),(0,z.jsxs)("div",{style:{display:"flex",gap:"12px"},children:[Fe.map(s=>{let d=r(`smartFilter.restaurantPriceLevel.options.${s.key}`),u=`price-level-${s.key}`;return(0,z.jsxs)("label",{htmlFor:u,style:{display:"flex",alignItems:"center",gap:"4px",fontSize:"12px",cursor:"pointer"},children:[(0,z.jsx)("input",{id:u,type:"checkbox",value:s.value,checked:e.includes(s.value),onChange:c,style:{accentColor:"#03852e",cursor:"pointer"}}),(0,z.jsx)("span",{children:d})]},s.value)}),e.length===0&&(0,z.jsx)("span",{style:{fontSize:"12px",color:"#737373"},children:f})]})]}),(0,z.jsx)(V,{onClick:i})]})};var Q=require("react");var W=require("react/jsx-runtime"),Ye={position:"relative",backgroundColor:"white",color:"black",fontSize:"14px",borderRadius:"9999px",padding:"0 16px",paddingRight:"20px",border:"1px solid #03852e",display:"flex",alignItems:"center",gap:"8px",flexShrink:0,userSelect:"none",height:"34px"},Ze={backgroundColor:"#ececec",borderRadius:"2px",padding:"2px 8px",outline:"none",fontSize:"16px",minWidth:"8ch",border:"none"},je={padding:"4px",borderRadius:"50%",cursor:"pointer",transition:"background-color 0.2s",color:"#737373",border:"none",backgroundColor:"transparent",display:"flex",alignItems:"center",justifyContent:"center"},ae=({value:e,onChange:t,onRemove:i})=>{let r=(0,Q.useRef)(null),[a,m]=(0,Q.useState)(e),[f,c]=(0,Q.useState)(!1),[s,d]=(0,Q.useState)(!1),{t:u}=D(),P=u("smartFilter.transformedQuery.remove"),h=u("smartFilter.transformedQuery.edit");(0,Q.useEffect)(()=>{m(e),c(!1)},[e]);let w=()=>{let v=a.trim();if(!v.length){m(e);return}v!==e&&t(v)};return(0,W.jsxs)("div",{style:Ye,children:[(0,W.jsx)(de,{style:{width:"16px",height:"16px",color:"#03852e"}}),f?(0,W.jsx)("input",{ref:r,value:a,onChange:v=>{m(v.target.value)},onBlur:()=>{w(),c(!1)},onKeyDown:v=>{if(v.key==="Enter"){v.preventDefault(),v.currentTarget.blur();return}if(v.key==="Escape"){v.preventDefault(),m(e),v.currentTarget.blur();return}},"aria-label":h,style:Ze,autoFocus:!0}):(0,W.jsx)("span",{style:{fontSize:"16px"},children:e}),!f&&(0,W.jsx)("button",{type:"button",style:{...je,backgroundColor:s?"#e5e5e5":"transparent"},"aria-label":h,title:h,onClick:()=>c(!0),onMouseEnter:()=>d(!0),onMouseLeave:()=>d(!1),children:(0,W.jsx)(Z,{})}),(0,W.jsx)(V,{onClick:i})]})};var _=require("react"),se=e=>{let t=(0,_.useRef)(null),[i,r]=(0,_.useState)(!0),[a,m]=(0,_.useState)(!0),f=(0,_.useCallback)(()=>{let s=t.current;if(!s){r(!0),m(!0);return}let{scrollLeft:d,scrollWidth:u,clientWidth:P}=s;r(d<=0),m(d+P>=u-1)},[]);(0,_.useEffect)(()=>{let s=t.current;if(f(),!s)return;let d=()=>f();return s.addEventListener("scroll",d,{passive:!0}),window.addEventListener("resize",f),()=>{s.removeEventListener("scroll",d),window.removeEventListener("resize",f)}},[e,f]);let c=(0,_.useCallback)(s=>{let d=t.current;if(!d)return;let u=d.clientWidth*.7;d.scrollBy({left:s==="next"?u:-u,behavior:"smooth"})},[]);return{scrollerRef:t,atStart:i,atEnd:a,scrollByDir:c}};var M=require("react/jsx-runtime"),Xe={position:"relative",width:"100%"},Je={display:"flex",gap:"8px",overflowX:"auto",alignItems:"center",width:"100%",scrollbarWidth:"none",msOverflowStyle:"none"},Pe={pointerEvents:"none",position:"absolute",top:0,bottom:0,width:"40px"},Re={position:"absolute",top:"50%",transform:"translateY(-50%)",backgroundColor:"white",color:"#003c30",border:"1px solid #003c30",padding:"4px",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",boxShadow:"0 1px 3px rgba(0,0,0,0.1)",cursor:"pointer"},le=({filters:e,currency:t,minRatingSuffix:i,clearAllLabel:r,previousFiltersLabel:a,nextFiltersLabel:m,formatCurrency:f,onFilterChange:c,onResetFilters:s,onClearAll:d})=>{let{scrollerRef:u,atStart:P,atEnd:h,scrollByDir:w}=se(e.length),[C,x]=he.default.useState(null),[v,R]=he.default.useState(!1);return(0,M.jsxs)("div",{style:Xe,children:[(0,M.jsxs)("div",{ref:u,style:{...Je,padding:"8px",WebkitOverflowScrolling:"touch"},children:[(0,M.jsx)("style",{children:`
            div::-webkit-scrollbar {
              display: none;
            }
          `}),e.map(n=>{var A,K,q;let B=()=>(0,M.jsx)(te,{label:n.label,icon:n.icon,remove:()=>{c(e.filter(l=>l.id!==n.id))}},n.id);if(n.type==="minRating"){let l=(A=n.numericValue)!=null?A:Number(n.value);return Number.isFinite(l)?(0,M.jsx)(X,{rating:l,onChange:k=>{let E=e.map(T=>T.id===n.id?{...T,numericValue:k,value:String(k)}:T);c(E)},onRemove:()=>void c(e.filter(k=>k.id!==n.id))},n.id):B()}if(n.type==="starRating"){let l=(K=n.numericValue)!=null?K:Number(n.value);return Number.isFinite(l)?(0,M.jsx)(X,{star:!0,rating:l,onChange:k=>{let E=e.map(T=>T.id===n.id?{...T,numericValue:k,value:String(k)}:T);c(E)},onRemove:()=>void c(e.filter(k=>k.id!==n.id))},n.id):B()}return n.type==="priceRange"&&n.priceRange?(0,M.jsx)(oe,{priceRange:n.priceRange,currency:t,onChange:l=>{let k=e.map(E=>E.id===n.id?{...E,priceRange:l}:E);c(k)},onRemove:()=>void c(e.filter(l=>l.id!==n.id))},n.id):n.type==="transformed_query"?(0,M.jsx)(ae,{value:n.value,onChange:l=>{let k=e.map(E=>E.id===n.id?{...E,value:l}:E);c(k)},onRemove:()=>void c(e.filter(l=>l.id!==n.id))},n.id):n.type==="selected_restaurant_price_levels"?(0,M.jsx)(ie,{values:(q=n.priceLevels)!=null?q:[],onChange:l=>{let k=e.map(E=>E.id===n.id?{...E,priceLevels:l}:E);c(k)},onRemove:()=>void c(e.filter(l=>l.id!==n.id))},n.id):B()}),(0,M.jsx)("button",{style:{flexShrink:0,padding:"4px 16px",borderRadius:"9999px",cursor:"pointer",fontSize:"14px",userSelect:"none",backgroundColor:v?"#eee":"white",color:"black",border:"1px solid #03852e"},onClick:d,onMouseEnter:()=>R(!0),onMouseLeave:()=>R(!1),children:r})]}),!P&&(0,M.jsx)("div",{"aria-hidden":"true",style:{...Pe,left:0,background:"linear-gradient(to right, white, transparent)"}}),!h&&(0,M.jsx)("div",{"aria-hidden":"true",style:{...Pe,right:0,background:"linear-gradient(to left, white, transparent)"}}),!P&&(0,M.jsx)("button",{type:"button","aria-label":a,style:{...Re,left:"4px",transform:"translateY(-50%) rotate(180deg)",backgroundColor:C==="prev"?"#e5e5e5":"white"},onClick:()=>w("prev"),onMouseEnter:()=>x("prev"),onMouseLeave:()=>x(null),children:(0,M.jsx)(ee,{style:{width:"20px",height:"20px"}})}),!h&&(0,M.jsx)("button",{type:"button","aria-label":m,style:{...Re,right:"4px",backgroundColor:C==="next"?"#e5e5e5":"white"},onClick:()=>w("next"),onMouseEnter:()=>x("next"),onMouseLeave:()=>x(null),children:(0,M.jsx)(ee,{style:{width:"20px",height:"20px"}})})]})};var O=require("react/jsx-runtime"),et={position:"relative",display:"flex",flexDirection:"column",gap:"8px",width:"100%"},tt={position:"relative",display:"flex",alignItems:"center",gap:"8px",width:"100%"},rt={position:"relative",display:"flex",alignItems:"center",flex:1,backgroundColor:"white",borderRadius:"24px",border:"1px solid #e5e5e5",padding:"0 16px",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},nt={flex:1,border:"none",outline:"none",fontSize:"16px",backgroundColor:"transparent",color:"#000",padding:"10px"},ot={position:"absolute",right:"16px",top:"50%",transform:"translateY(-50%)"},it={width:"20px",height:"20px",border:"2px solid #e5e5e5",borderTop:"2px solid #03852e",borderRadius:"50%",animation:"spin 1s linear infinite"},at={position:"absolute",padding:"10px",color:"#737373",pointerEvents:"none",fontSize:"16px"},Le=({mapFirst:e,filters:t,value:i,isSearching:r=!1,placeholder:a,onSearch:m,onFilterChange:f,onValueChange:c,showTypingPrompt:s=!0,customTranslations:d,currency:u="USD",style:P,inputStyle:h,containerStyle:w})=>{let[C,x]=(0,Y.useState)(""),v=i!==void 0?i:C,R=c||x,{t:n,formatCurrency:B}=D(d),A=n("smartFilter.minRating.suffix"),K=a||n("smartFilter.typingPrompt"),q=n("smartFilter.nav.previous"),l=n("smartFilter.nav.next"),k=n("smartFilter.clearAll"),E=async b=>{b.preventDefault();let y=v.trim();if(!(!y||r))try{await m(y)}catch(p){console.error("Search error:",p)}},T=(0,Y.useCallback)(async(b,y)=>{if(!r)try{await f(b)}catch(p){console.error("Filter change error:",p)}},[r,f]),pe=(0,Y.useCallback)(()=>{T([])},[T]),F=(0,Y.useCallback)(()=>{T([],!0),R("")},[T,R]);return(0,O.jsxs)("div",{style:{...et,...w},children:[(0,O.jsx)("style",{children:`
          @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
          }
        `}),t.length===0&&(0,O.jsx)("form",{onSubmit:E,style:{...tt,...P},children:(0,O.jsxs)("div",{style:rt,children:[(0,O.jsx)("input",{type:"text",value:v,onChange:b=>R(b.target.value),disabled:r,style:{...nt,...h},autoComplete:"off","aria-label":"Smart search"}),s&&v.length===0&&!r&&(0,O.jsx)("span",{style:at,children:K}),r&&(0,O.jsx)("div",{style:ot,children:(0,O.jsx)("div",{style:it})})]})}),t.length>0&&(0,O.jsx)(le,{filters:t,currency:u,minRatingSuffix:A,clearAllLabel:k,previousFiltersLabel:q,nextFiltersLabel:l,formatCurrency:B,onFilterChange:T,onResetFilters:pe,onClearAll:F})]})};function st(e){let t=L.default.useRef(null),[i,r]=L.default.useState(null),a=L.default.useRef(e);L.default.useEffect(()=>{a.current=e}),L.default.useEffect(()=>{let F=a.current,b={adapter:null,...F,callbacks:{...F.callbacks,onPropertiesChange:p=>{var o,g;r(S=>S?{...S,properties:p}:null),(g=(o=a.current.callbacks)==null?void 0:o.onPropertiesChange)==null||g.call(o,p)},onSelectedPropertyChange:p=>{var o,g;r(S=>S?{...S,selectedPropertyId:p}:null),(g=(o=a.current.callbacks)==null?void 0:o.onSelectedPropertyChange)==null||g.call(o,p)},onPrimaryTypeChange:p=>{var o,g;r(S=>S?{...S,primary:p}:null),(g=(o=a.current.callbacks)==null?void 0:o.onPrimaryTypeChange)==null||g.call(o,p)},onFiltersChange:p=>{var o,g;r(S=>S?{...S,filters:p}:null),(g=(o=a.current.callbacks)==null?void 0:o.onFiltersChange)==null||g.call(o,p)},onBoundsChange:p=>{var o,g;r(S=>S?{...S,bounds:p}:null),(g=(o=a.current.callbacks)==null?void 0:o.onBoundsChange)==null||g.call(o,p)},onPendingBoundsChange:p=>{var o,g;r(S=>S?{...S,pendingBounds:p}:null),(g=(o=a.current.callbacks)==null?void 0:o.onPendingBoundsChange)==null||g.call(o,p)},onCenterChange:(p,o)=>{var g,S;r(be=>be?{...be,center:p,zoom:o}:null),(S=(g=a.current.callbacks)==null?void 0:g.onCenterChange)==null||S.call(g,p,o)},onZoomChange:p=>{var o,g;r(S=>S?{...S,zoom:p}:null),(g=(o=a.current.callbacks)==null?void 0:o.onZoomChange)==null||g.call(o,p)},onActiveLocationChange:p=>{var o,g;r(S=>S?{...S,activeLocation:p}:null),(g=(o=a.current.callbacks)==null?void 0:o.onActiveLocationChange)==null||g.call(o,p)},onLoadingStateChange:p=>{var o,g;r(S=>S?{...S,initialLoading:p}:null),(g=(o=a.current.callbacks)==null?void 0:o.onLoadingStateChange)==null||g.call(o,p)},onSearchingStateChange:p=>{var o,g;r(S=>S?{...S,isSearching:p}:null),(g=(o=a.current.callbacks)==null?void 0:o.onSearchingStateChange)==null||g.call(o,p)}}},y=new we.MapFirstCore(b);return t.current=y,r(y.getState()),()=>{y.destroy(),t.current=null,r(null)}},[]);let m=L.default.useCallback(F=>{t.current&&t.current.setPrimaryType(F)},[]),f=L.default.useCallback(F=>{t.current&&t.current.setSelectedMarker(F)},[]),[c,s]=L.default.useState(!1),[d,u]=L.default.useState(null),P=L.default.useMemo(()=>({search:async F=>{if(!t.current){let b=new Error("MapFirst instance not available");throw u(b),b}s(!0),u(null);try{return await t.current.runPropertiesSearch({...F,onError:y=>{let p=y instanceof Error?y:new Error(String(y));u(p)}})}catch(b){let y=b instanceof Error?b:new Error(String(b));throw u(y),y}finally{s(!1)}},isLoading:c,error:d}),[c,d]),[h,w]=L.default.useState(!1),[C,x]=L.default.useState(null),v=L.default.useMemo(()=>({search:async F=>{if(!t.current){let b=new Error("MapFirst instance not available");throw x(b),b}w(!0),x(null);try{return await t.current.runSmartFilterSearch({...F,onError:y=>{let p=y instanceof Error?y:new Error(String(y));x(p)}})}catch(b){let y=b instanceof Error?b:new Error(String(b));throw x(y),y}finally{w(!1)}},isLoading:h,error:C}),[h,C]),[R,n]=L.default.useState(!1),[B,A]=L.default.useState(null),K=L.default.useMemo(()=>({perform:async()=>{if(!t.current)return null;n(!0),A(null);try{return await t.current.performBoundsSearch()}catch(F){let b=F instanceof Error?F:new Error(String(F));throw A(b),b}finally{n(!1)}},isSearching:R,error:B}),[R,B]),q=L.default.useRef(!1),l=L.default.useCallback((F,b,y)=>{t.current&&F&&!q.current&&(t.current.attachMap(F,{platform:"maplibre",maplibregl:b,onMarkerClick:y==null?void 0:y.onMarkerClick}),q.current=!0)},[]),k=L.default.useRef(!1),E=L.default.useCallback((F,b,y)=>{t.current&&F&&!k.current&&(t.current.attachMap(F,{platform:"google",google:b,onMarkerClick:y==null?void 0:y.onMarkerClick}),k.current=!0)},[]),T=L.default.useRef(!1),pe=L.default.useCallback((F,b,y)=>{t.current&&F&&!T.current&&(t.current.attachMap(F,{platform:"mapbox",mapboxgl:b,onMarkerClick:y==null?void 0:y.onMarkerClick}),T.current=!0)},[]);return{instance:t.current,state:i,setPrimaryType:m,setSelectedMarker:f,propertiesSearch:P,smartFilterSearch:v,boundsSearch:K,attachMapLibre:l,attachGoogle:E,attachMapbox:pe}}0&&(module.exports={Chip,CloseIcon,EditIcon,FilterChips,MinRatingFilterChip,NextIcon,PriceRangeFilterChip,RestaurantPriceLevelChip,SearchIcon,SmartFilter,StarIcon,TransformedQueryChip,convertToApiFilters,createMinRatingFilterLabel,createPriceRangeFilterLabel,formatRatingValue,processApiFilters,renderStars,useFilterScroll,useMapFirst,useTranslation});
//# sourceMappingURL=index.js.map