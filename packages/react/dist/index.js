"use strict";var g=Object.create;var f=Object.defineProperty;var C=Object.getOwnPropertyDescriptor;var S=Object.getOwnPropertyNames;var h=Object.getPrototypeOf,b=Object.prototype.hasOwnProperty;var P=(e,n)=>{for(var r in n)f(e,r,{get:n[r],enumerable:!0})},M=(e,n,r,l)=>{if(n&&typeof n=="object"||typeof n=="function")for(let c of S(n))!b.call(e,c)&&c!==r&&f(e,c,{get:()=>n[c],enumerable:!(l=C(n,c))||l.enumerable});return e};var k=(e,n,r)=>(r=e!=null?g(h(e)):{},M(n||!e||!e.__esModule?f(r,"default",{value:e,enumerable:!0}):r,e)),m=e=>M(f({},"__esModule",{value:!0}),e);var B={};P(B,{MarkerDebugList:()=>I,useGoogleMapsAttachment:()=>A,useMapFirst:()=>O,useMapFirstCore:()=>x,useMapFirstProperties:()=>T,useMapFirstSelectedProperty:()=>L,useMapLibreAttachment:()=>F,useMapboxAttachment:()=>N,usePrimaryType:()=>R,useSelectedMarker:()=>E});module.exports=m(B);var s=k(require("react")),y=require("@mapfirst/core"),p=require("react/jsx-runtime");function x(e){let n=s.default.useRef(null),[r,l]=s.default.useState(null);return s.default.useEffect(()=>{let c={adapter:null,...e,callbacks:{...e.callbacks,onPropertiesChange:a=>{var t,u;l(o=>o?{...o,properties:a}:null),(u=(t=e.callbacks)==null?void 0:t.onPropertiesChange)==null||u.call(t,a)},onSelectedPropertyChange:a=>{var t,u;l(o=>o?{...o,selectedPropertyId:a}:null),(u=(t=e.callbacks)==null?void 0:t.onSelectedPropertyChange)==null||u.call(t,a)},onPrimaryTypeChange:a=>{var t,u;l(o=>o?{...o,primary:a}:null),(u=(t=e.callbacks)==null?void 0:t.onPrimaryTypeChange)==null||u.call(t,a)},onFiltersChange:a=>{var t,u;l(o=>o?{...o,filters:a}:null),(u=(t=e.callbacks)==null?void 0:t.onFiltersChange)==null||u.call(t,a)},onBoundsChange:a=>{var t,u;l(o=>o?{...o,bounds:a}:null),(u=(t=e.callbacks)==null?void 0:t.onBoundsChange)==null||u.call(t,a)},onCenterChange:(a,t)=>{var u,o;l(d=>d?{...d,center:a,zoom:t}:null),(o=(u=e.callbacks)==null?void 0:u.onCenterChange)==null||o.call(u,a,t)},onZoomChange:a=>{var t,u;l(o=>o?{...o,zoom:a}:null),(u=(t=e.callbacks)==null?void 0:t.onZoomChange)==null||u.call(t,a)},onActiveLocationChange:a=>{var t,u;l(o=>o?{...o,activeLocation:a}:null),(u=(t=e.callbacks)==null?void 0:t.onActiveLocationChange)==null||u.call(t,a)},onLoadingStateChange:a=>{var t,u;l(o=>o?{...o,initialLoading:a}:null),(u=(t=e.callbacks)==null?void 0:t.onLoadingStateChange)==null||u.call(t,a)},onSearchingStateChange:a=>{var t,u;l(o=>o?{...o,isSearching:a}:null),(u=(t=e.callbacks)==null?void 0:t.onSearchingStateChange)==null||u.call(t,a)}}},i=new y.MapFirstCore(c);return n.current=i,l(i.getState()),()=>{i.destroy(),n.current=null,l(null)}},[e.initialLocationData,e.environment,e.mfid]),{mapFirst:n.current,state:r}}function T(e){let[n,r]=s.default.useState([]);return s.default.useEffect(()=>{if(!e){r([]);return}r(e.getState().properties)},[e]),n}function L(e){let[n,r]=s.default.useState(null);return s.default.useEffect(()=>{if(!e){r(null);return}r(e.getState().selectedPropertyId)},[e]),n}function R(e){let[n,r]=s.default.useState("Accommodation");s.default.useEffect(()=>{if(!e){r("Accommodation");return}r(e.getState().primary)},[e]);let l=s.default.useCallback(c=>{e&&(e.setPrimaryType(c),r(c))},[e]);return[n,l]}function E(e){let[n,r]=s.default.useState(null);s.default.useEffect(()=>{if(!e){r(null);return}r(e.getState().selectedPropertyId)},[e]);let l=s.default.useCallback(c=>{e&&(e.setSelectedMarker(c),r(c))},[e]);return[n,l]}function F({mapFirst:e,map:n,maplibregl:r,onMarkerClick:l}){let c=s.default.useRef(!1);s.default.useEffect(()=>{!e||!n||c.current||(e.attachMap(n,{platform:"maplibre",maplibregl:r,onMarkerClick:l}),c.current=!0)},[e,n,r,l])}function A({mapFirst:e,map:n,google:r,onMarkerClick:l}){let c=s.default.useRef(!1);s.default.useEffect(()=>{!e||!n||c.current||(e.attachMap(n,{platform:"google",google:r,onMarkerClick:l}),c.current=!0)},[e,n,r,l])}function N({mapFirst:e,map:n,mapboxgl:r,onMarkerClick:l}){let c=s.default.useRef(!1);s.default.useEffect(()=>{!e||!n||c.current||(e.attachMap(n,{platform:"mapbox",mapboxgl:r,onMarkerClick:l}),c.current=!0)},[e,n,r,l])}function O(e){let n=s.default.useRef(null);return s.default.useEffect(()=>{if(!e)return;let r=new y.MapFirstCore(e);return n.current=r,()=>{r.destroy(),n.current=null}},[e]),n}function I({markers:e}){return(0,p.jsxs)("div",{style:{fontFamily:"sans-serif",fontSize:14},children:[(0,p.jsx)("strong",{children:"Markers"}),(0,p.jsx)("ul",{children:e.map(n=>{var r,l,c,i,a,t;return(0,p.jsxs)("li",{children:[n.name," \u2014 ",(c=(l=(r=n.location)==null?void 0:r.lat)==null?void 0:l.toFixed(3))!=null?c:"n/a",","," ",(t=(a=(i=n.location)==null?void 0:i.lon)==null?void 0:a.toFixed(3))!=null?t:"n/a"]},String(n.tripadvisor_id))})})]})}0&&(module.exports={MarkerDebugList,useGoogleMapsAttachment,useMapFirst,useMapFirstCore,useMapFirstProperties,useMapFirstSelectedProperty,useMapLibreAttachment,useMapboxAttachment,usePrimaryType,useSelectedMarker});
//# sourceMappingURL=index.js.map