"use strict";var Le=Object.create;var J=Object.defineProperty;var Ee=Object.getOwnPropertyDescriptor;var Me=Object.getOwnPropertyNames;var Ie=Object.getPrototypeOf,Te=Object.prototype.hasOwnProperty;var Be=(e,t)=>{for(var n in t)J(e,n,{get:t[n],enumerable:!0})},Se=(e,t,n,i)=>{if(t&&typeof t=="object"||typeof t=="function")for(let a of Me(t))!Te.call(e,a)&&a!==n&&J(e,a,{get:()=>t[a],enumerable:!(i=Ee(t,a))||i.enumerable});return e};var me=(e,t,n)=>(n=e!=null?Le(Ie(e)):{},Se(t||!e||!e.__esModule?J(n,"default",{value:e,enumerable:!0}):n,e)),He=e=>Se(J({},"__esModule",{value:!0}),e);var bt={};Be(bt,{Chip:()=>te,CloseIcon:()=>fe,EditIcon:()=>G,FilterChips:()=>ce,MarkerDebugList:()=>ht,MinRatingFilterChip:()=>Y,NextIcon:()=>ee,PriceRangeFilterChip:()=>oe,RestaurantPriceLevelChip:()=>ie,SearchIcon:()=>$,SmartFilter:()=>we,StarIcon:()=>ge,TransformedQueryChip:()=>ae,createMinRatingFilterLabel:()=>We,createPriceRangeFilterLabel:()=>_e,formatRatingValue:()=>re,renderStars:()=>Ce,useFilterScroll:()=>se,useGoogleMapsAttachment:()=>dt,useIsPortrait:()=>ue,useMapFirst:()=>ft,useMapFirstCore:()=>at,useMapFirstProperties:()=>st,useMapFirstSelectedProperty:()=>lt,useMapLibreAttachment:()=>ut,useMapboxAttachment:()=>mt,usePrimaryType:()=>ct,usePropertiesSearch:()=>gt,useSelectedMarker:()=>pt,useSmartFilterSearch:()=>yt,useTranslation:()=>E});module.exports=He(bt);var f=me(require("react")),be=require("@mapfirst.ai/core");var q=require("react");var le=me(require("react"));var xe=me(require("react"));var w=require("react/jsx-runtime"),$=({className:e,style:t})=>(0,w.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:e,style:{width:"1em",height:"1em",...t},children:[(0,w.jsx)("circle",{cx:"11",cy:"11",r:"8"}),(0,w.jsx)("path",{d:"m21 21-4.35-4.35"})]}),fe=({className:e,style:t})=>(0,w.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:e,style:{width:"1em",height:"1em",...t},children:[(0,w.jsx)("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),(0,w.jsx)("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]}),G=({className:e,style:t})=>(0,w.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:e,style:{width:"1em",height:"1em",...t},children:[(0,w.jsx)("path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"}),(0,w.jsx)("path",{d:"M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"})]}),ee=({className:e,style:t})=>(0,w.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:e,style:{width:"1em",height:"1em",...t},children:(0,w.jsx)("polyline",{points:"9 18 15 12 9 6"})}),ge=({className:e,style:t,fill:n="none"})=>(0,w.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:n,stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:e,style:{width:"1em",height:"1em",...t},children:(0,w.jsx)("polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"})});var ye=require("react/jsx-runtime"),Ne={position:"absolute",top:"-8px",right:"-8px",padding:"2px",borderRadius:"50%",backgroundColor:"white",border:"1px solid #03852e",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",transition:"background-color 0.2s"},De={width:"17px",height:"17px"},H=({onClick:e,style:t})=>{let[n,i]=xe.default.useState(!1);return(0,ye.jsx)("button",{style:{...Ne,backgroundColor:n?"#e5e5e5":"white",...t},onClick:e,onMouseEnter:()=>i(!0),onMouseLeave:()=>i(!1),"aria-label":"Remove filter",children:(0,ye.jsx)(fe,{style:De})})};var _=require("react/jsx-runtime"),ze={position:"relative",backgroundColor:"white",color:"black",fontSize:"14px",borderRadius:"9999px",padding:"0 16px",paddingRight:"20px",border:"1px solid #03852e",display:"flex",alignItems:"center",gap:"8px",flexShrink:0,height:"34px"},te=({label:e,icon:t,remove:n,style:i})=>(0,_.jsxs)("div",{style:{...ze,...i},children:[t&&(0,_.jsx)("span",{style:{display:"flex",alignItems:"center"},children:t}),(0,_.jsx)("span",{style:{whiteSpace:"nowrap"},children:e}),(0,_.jsx)(H,{onClick:n})]});var ve=require("react");var U=require("react"),Ae={"smartFilter.typingPrompt":"Search for hotels, restaurants, or attractions...","smartFilter.nav.previous":"Previous filters","smartFilter.nav.next":"Next filters","smartFilter.toast.locationRequired":"Please select a location first","smartFilter.clearAll":"Clear all","smartFilter.minRating.suffix":"+","smartFilter.minRating.label":"{{value}}+","smartFilter.minRating.remove":"Remove rating filter","smartFilter.minRating.setTo":"Set rating to {{rating}}","smartFilter.priceRange.label":"Price Range","smartFilter.priceRange.remove":"Remove price filter","smartFilter.priceRange.edit":"Edit price","smartFilter.transformedQuery.remove":"Remove search query","smartFilter.transformedQuery.edit":"Edit search query","smartFilter.restaurantPriceLevel.label":"Price Level","smartFilter.restaurantPriceLevel.remove":"Remove price level filter","smartFilter.restaurantPriceLevel.none":"Any","smartFilter.restaurantPriceLevel.options.cheapEats":"Cheap Eats","smartFilter.restaurantPriceLevel.options.midRange":"Mid Range","smartFilter.restaurantPriceLevel.options.fineDining":"Fine Dining"},Oe=(e,t="USD")=>new Intl.NumberFormat("en-US",{style:"currency",currency:t,minimumFractionDigits:0,maximumFractionDigits:0}).format(e),E=(e,t)=>{let[n,i]=(0,U.useState)("en"),a=(0,U.useCallback)((d,p)=>{let o={...Ae,...e}[d]||d;return p&&Object.keys(p).forEach(s=>{o=o.replace(new RegExp(`{{${s}}}`,"g"),String(p[s]))}),o},[e]),u=(0,U.useCallback)((d,p)=>t?t(d,p):Oe(d,p),[t]);return{t:a,locale:n,setLocale:i,formatCurrency:u}};var W=require("react/jsx-runtime"),Ce=e=>{let t=[],n=Math.floor(e),i=e%1!==0,a={display:"block",width:"12px",height:"12px",borderRadius:"50%",border:"1px solid #03852e",pointerEvents:"none"},u={...a,backgroundColor:"#03852e"},d={...a,background:"linear-gradient(90deg, #03852e 50%, transparent 50%)"};for(let r=0;r<n;r+=1)t.push((0,W.jsx)("span",{style:u},`full-${r}`));i&&t.push((0,W.jsx)("span",{style:d},"half"));let p=Math.max(0,5-Math.ceil(e));for(let r=0;r<p;r+=1)t.push((0,W.jsx)("span",{style:a},`empty-${r}`));return t},We=(e,t)=>(0,W.jsxs)("span",{style:{display:"flex",alignItems:"center",gap:"4px"},children:[(0,W.jsx)("span",{style:{display:"flex",gap:"1px",userSelect:"none"},children:Ce(e)})," ",t]}),re=e=>e.toFixed(1),_e=(e,t,n,i)=>`${i(e,n)} - ${i(t!=null?t:0,n)}`;var L=require("react/jsx-runtime"),Ve={position:"relative",backgroundColor:"white",color:"black",fontSize:"14px",borderRadius:"9999px",padding:"0 16px",paddingRight:"20px",border:"1px solid #03852e",display:"flex",gap:"8px",alignItems:"center",justifyContent:"center",flexShrink:0,height:"34px"},qe={display:"flex",gap:"1px",userSelect:"none"},he={display:"block",width:"12px",height:"12px",borderRadius:"50%",border:"1px solid #03852e",pointerEvents:"none"},ne={position:"absolute",top:0,height:"100%",cursor:"pointer",backgroundColor:"transparent",border:"none",padding:0},Y=({rating:e,onChange:t,onRemove:n,star:i=!1})=>{let[a,u]=(0,ve.useState)(null),{t:d}=E(),p=a!=null?a:e,r=g=>i&&g?g.toString():d("smartFilter.minRating.label",{value:re(g)}),o=d("smartFilter.minRating.remove"),s=g=>d("smartFilter.minRating.setTo",{rating:re(g)}),c=g=>{let b=g+1;return p>=b?"full":p>=b-.5?"half":"empty"},m=g=>{u(null),g!==e&&t(g)},v=g=>{var y;let b=g.relatedTarget;(!b||!((y=g.currentTarget.closest("[data-min-rating-chip]"))!=null&&y.contains(b)))&&u(null)};return(0,L.jsxs)("div",{style:Ve,"data-min-rating-chip":!0,children:[(0,L.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"4px"},onMouseLeave:()=>u(null),children:[(0,L.jsx)("div",{style:qe,children:Array.from({length:5}).map((g,b)=>{let y=c(b),h=b+1,P=h-.5;if(i)return(0,L.jsxs)("div",{style:{position:"relative",width:"16px",height:"16px"},children:[(0,L.jsx)(ge,{fill:p>=h?"#03852e":"none",style:{width:"16px",height:"16px",pointerEvents:"none"}}),(0,L.jsx)("button",{type:"button",style:{...ne,left:0,width:"50%",borderRadius:"50% 0 0 50%"},onMouseEnter:()=>u(P),onFocus:()=>u(P),onBlur:v,onClick:()=>m(P),"aria-label":s(P),title:r(P)}),(0,L.jsx)("button",{type:"button",style:{...ne,left:"50%",width:"50%",borderRadius:"0 50% 50% 0"},onMouseEnter:()=>u(h),onFocus:()=>u(h),onBlur:v,onClick:()=>m(h),"aria-label":s(h),title:r(h)})]},b);let R=y==="full"?{...he,backgroundColor:"#03852e"}:he,O={...he,background:"linear-gradient(90deg, #03852e 50%, transparent 50%)"};return(0,L.jsxs)("div",{style:{position:"relative",width:"12px",height:"12px"},children:[(0,L.jsx)("span",{style:y==="half"?O:R}),(0,L.jsx)("button",{type:"button",style:{...ne,left:0,width:"50%",borderRadius:"50% 0 0 50%",outline:"2px solid transparent",outlineOffset:"1px"},onMouseEnter:()=>u(P),onFocus:()=>u(P),onBlur:v,onClick:()=>m(P),"aria-label":s(P),title:r(P)}),(0,L.jsx)("button",{type:"button",style:{...ne,left:"50%",width:"50%",borderRadius:"0 50% 50% 0",outline:"2px solid transparent",outlineOffset:"1px"},onMouseEnter:()=>u(h),onFocus:()=>u(h),onBlur:v,onClick:()=>m(h),"aria-label":s(h),title:r(h)})]},b)})}),(0,L.jsx)("span",{style:{whiteSpace:"nowrap"},children:r(p)})]}),(0,L.jsx)(H,{onClick:n})]})};var V=require("react");var F=require("react/jsx-runtime"),Qe={position:"relative",backgroundColor:"white",color:"black",fontSize:"14px",borderRadius:"9999px",padding:"0 16px",border:"1px solid #03852e",display:"flex",alignItems:"center",gap:"8px",flexShrink:0,height:"34px"},Ke={outline:"none",fontSize:"16px",backgroundColor:"transparent",borderRadius:"2px",padding:"2px 8px",width:"64px",textAlign:"center",border:"none"},$e={padding:"4px",borderRadius:"50%",cursor:"pointer",transition:"background-color 0.2s",border:"none",backgroundColor:"transparent",color:"#737373",display:"flex",alignItems:"center",justifyContent:"center"},Pe=({boundary:e,label:t,value:n,placeholder:i,currency:a,isOptional:u=!1,showRemoveButton:d=!1,removeLabel:p,editLabel:r,showAddWhenEmpty:o=!1,onCommit:s,onRemove:c})=>{let[m,v]=(0,V.useState)(n!==void 0?String(n):""),[g,b]=(0,V.useState)(!1),[y,h]=(0,V.useState)(!1),P=n!==void 0;(0,V.useEffect)(()=>{v(n!==void 0?String(n):""),b(!1)},[n]);let R=()=>{v(n!==void 0?String(n):"")},O=()=>{if(m.trim()===""){if(u){s(void 0),v("");return}R();return}let l=Number(m);if(!Number.isFinite(l)){R();return}let M=Math.max(0,l);if(M===n){R();return}s(M)};return(0,F.jsxs)("div",{style:Qe,children:[(0,F.jsx)("span",{style:{fontSize:"10px",textTransform:"uppercase",fontWeight:600,letterSpacing:"0.05em"},children:t}),g?(0,F.jsx)("input",{value:m,onChange:l=>{let M=l.target.value.replace(/[^\d]/g,"");v(M)},onBlur:()=>{O(),b(!1)},onKeyDown:l=>{if(l.key==="Enter"){l.preventDefault(),l.currentTarget.blur(),b(!1);return}if(l.key==="Escape"){l.preventDefault(),R(),l.currentTarget.blur(),b(!1);return}l.key.length===1&&/[0-9]/.test(l.key)||l.key==="Backspace"||l.key==="Delete"||l.key==="Tab"||l.key==="ArrowLeft"||l.key==="ArrowRight"||l.key==="Home"||l.key==="End"||l.preventDefault()},placeholder:i,inputMode:"numeric",pattern:"[0-9]*","aria-label":t,style:Ke,autoFocus:!0}):P?(0,F.jsxs)("span",{style:{fontSize:"16px"},children:[a,n]}):o?(0,F.jsx)("button",{type:"button",style:{fontSize:"16px",color:"#737373",cursor:"pointer",border:"none",backgroundColor:"transparent",padding:0},onClick:()=>b(!0),"aria-label":r,children:"+"}):(0,F.jsx)("span",{style:{fontSize:"16px",color:"#737373"},children:"-"}),(!o||o&&g)&&(0,F.jsx)("span",{style:{color:"#737373",fontSize:"12px"},children:a}),!g&&(!o||P)&&(0,F.jsx)("button",{type:"button",style:{...$e,backgroundColor:y?"#e5e5e5":"transparent"},"aria-label":r,title:r,onClick:()=>b(!0),onMouseEnter:()=>h(!0),onMouseLeave:()=>h(!1),children:(0,F.jsx)(G,{})}),d&&(0,F.jsx)(H,{onClick:c})]})},oe=({priceRange:e,currency:t,onChange:n,onRemove:i})=>{let{t:a}=E(),u="Min",d="Max",p=a("smartFilter.priceRange.remove"),r=a("smartFilter.priceRange.edit"),o=(s,c)=>{let m={min:e.min,max:e.max};s==="min"?(m.min=c,c!==void 0&&e.max!==void 0&&c>e.max&&(m.max=c)):(m.max=c,c!==void 0&&e.min!==void 0&&c<e.min&&(m.min=c)),(m.min!==e.min||m.max!==e.max)&&n(m)};return(0,F.jsxs)(F.Fragment,{children:[(0,F.jsx)(Pe,{boundary:"min",label:u,value:e.min,currency:t,editLabel:r,showRemoveButton:e.min!==void 0&&e.min!==0,onCommit:s=>o("min",s),onRemove:i}),(0,F.jsx)(Pe,{boundary:"max",label:d,value:e.max,currency:t,isOptional:!0,showRemoveButton:e.max!==void 0,removeLabel:p,editLabel:r,showAddWhenEmpty:!0,onCommit:s=>o("max",s),onRemove:i})]})};var T=require("react/jsx-runtime"),Ge={position:"relative",backgroundColor:"white",color:"black",fontSize:"14px",borderRadius:"9999px",padding:"0 16px",paddingRight:"20px",border:"1px solid #03852e",display:"flex",alignItems:"center",gap:"16px",flexShrink:0,height:"34px"},ke=[{value:"Cheap Eats",key:"cheapEats"},{value:"Mid Range",key:"midRange"},{value:"Fine Dining",key:"fineDining"}],ie=({values:e,onChange:t,onRemove:n})=>{let{t:i}=E(),a=i("smartFilter.restaurantPriceLevel.label"),u=i("smartFilter.restaurantPriceLevel.remove"),d=i("smartFilter.restaurantPriceLevel.none"),p=r=>{let{value:o,checked:s}=r.target,c=o,m=new Set(e);s?m.add(c):m.delete(c);let v=ke.filter(g=>m.has(g.value)).map(g=>g.value);t(v)};return(0,T.jsxs)("div",{style:Ge,children:[(0,T.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"8px",flexWrap:"wrap"},children:[(0,T.jsx)("span",{style:{fontSize:"10px",textTransform:"uppercase",fontWeight:600,letterSpacing:"0.05em"},children:a}),(0,T.jsxs)("div",{style:{display:"flex",gap:"12px"},children:[ke.map(r=>{let o=i(`smartFilter.restaurantPriceLevel.options.${r.key}`),s=`price-level-${r.key}`;return(0,T.jsxs)("label",{htmlFor:s,style:{display:"flex",alignItems:"center",gap:"4px",fontSize:"12px",cursor:"pointer"},children:[(0,T.jsx)("input",{id:s,type:"checkbox",value:r.value,checked:e.includes(r.value),onChange:p,style:{accentColor:"#03852e",cursor:"pointer"}}),(0,T.jsx)("span",{children:o})]},r.value)}),e.length===0&&(0,T.jsx)("span",{style:{fontSize:"12px",color:"#737373"},children:d})]})]}),(0,T.jsx)(H,{onClick:n})]})};var A=require("react");var D=require("react/jsx-runtime"),Ue={position:"relative",backgroundColor:"white",color:"black",fontSize:"14px",borderRadius:"9999px",padding:"0 16px",paddingRight:"20px",border:"1px solid #03852e",display:"flex",alignItems:"center",gap:"8px",flexShrink:0,userSelect:"none",height:"34px"},Ye={backgroundColor:"#ececec",borderRadius:"2px",padding:"2px 8px",outline:"none",fontSize:"16px",minWidth:"8ch",border:"none"},Ze={padding:"4px",borderRadius:"50%",cursor:"pointer",transition:"background-color 0.2s",color:"#737373",border:"none",backgroundColor:"transparent",display:"flex",alignItems:"center",justifyContent:"center"},ae=({value:e,onChange:t,onRemove:n})=>{let i=(0,A.useRef)(null),[a,u]=(0,A.useState)(e),[d,p]=(0,A.useState)(!1),[r,o]=(0,A.useState)(!1),{t:s}=E(),c=s("smartFilter.transformedQuery.remove"),m=s("smartFilter.transformedQuery.edit");(0,A.useEffect)(()=>{u(e),p(!1)},[e]);let v=()=>{let y=a.trim();if(!y.length){u(e);return}y!==e&&t(y)};return(0,D.jsxs)("div",{style:Ue,children:[(0,D.jsx)($,{style:{width:"16px",height:"16px",color:"#03852e"}}),d?(0,D.jsx)("input",{ref:i,value:a,onChange:y=>{u(y.target.value)},onBlur:()=>{v(),p(!1)},onKeyDown:y=>{if(y.key==="Enter"){y.preventDefault(),y.currentTarget.blur();return}if(y.key==="Escape"){y.preventDefault(),u(e),y.currentTarget.blur();return}},"aria-label":m,style:Ye,autoFocus:!0}):(0,D.jsx)("span",{style:{fontSize:"16px"},children:e}),!d&&(0,D.jsx)("button",{type:"button",style:{...Ze,backgroundColor:r?"#e5e5e5":"transparent"},"aria-label":m,title:m,onClick:()=>p(!0),onMouseEnter:()=>o(!0),onMouseLeave:()=>o(!1),children:(0,D.jsx)(G,{})}),(0,D.jsx)(H,{onClick:n})]})};var N=require("react"),se=e=>{let t=(0,N.useRef)(null),[n,i]=(0,N.useState)(!0),[a,u]=(0,N.useState)(!0),d=(0,N.useCallback)(()=>{let r=t.current;if(!r){i(!0),u(!0);return}let{scrollLeft:o,scrollWidth:s,clientWidth:c}=r;i(o<=0),u(o+c>=s-1)},[]);(0,N.useEffect)(()=>{let r=t.current;if(d(),!r)return;let o=()=>d();return r.addEventListener("scroll",o,{passive:!0}),window.addEventListener("resize",d),()=>{r.removeEventListener("scroll",o),window.removeEventListener("resize",d)}},[e,d]);let p=(0,N.useCallback)(r=>{let o=t.current;if(!o)return;let s=o.clientWidth*.7;o.scrollBy({left:r==="next"?s:-s,behavior:"smooth"})},[]);return{scrollerRef:t,atStart:n,atEnd:a,scrollByDir:p}};var C=require("react/jsx-runtime"),je={position:"relative",width:"100%"},Xe={display:"flex",gap:"8px",overflowX:"auto",alignItems:"center",width:"100%",scrollbarWidth:"none",msOverflowStyle:"none"},Fe={pointerEvents:"none",position:"absolute",top:0,bottom:0,width:"40px"},Re={position:"absolute",top:"50%",transform:"translateY(-50%)",backgroundColor:"white",color:"#003c30",border:"1px solid #003c30",padding:"4px",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",boxShadow:"0 1px 3px rgba(0,0,0,0.1)",cursor:"pointer"},ce=({filters:e,isPortrait:t,currency:n,minRatingSuffix:i,clearAllLabel:a,previousFiltersLabel:u,nextFiltersLabel:d,formatCurrency:p,onFilterChange:r,onResetFilters:o,onClearAll:s})=>{let{scrollerRef:c,atStart:m,atEnd:v,scrollByDir:g}=se(e.length),{t:b}=E(),[y,h]=le.default.useState(null),[P,R]=le.default.useState(!1),[O,K]=le.default.useState(!1),Z={...Xe,padding:t?"8px 16px":"8px"};return(0,C.jsxs)("div",{style:je,children:[(0,C.jsxs)("div",{ref:c,style:{...Z,WebkitOverflowScrolling:"touch"},children:[(0,C.jsx)("style",{children:`
            div::-webkit-scrollbar {
              display: none;
            }
          `}),(0,C.jsx)("button",{style:{flexShrink:0,backgroundColor:P?"#03a03e":"#03852e",borderRadius:"50%",padding:"8px",cursor:"pointer",border:"none",display:"flex",alignItems:"center",justifyContent:"center",transition:"background-color 0.2s"},onClick:o,onMouseEnter:()=>R(!0),onMouseLeave:()=>R(!1),children:(0,C.jsx)($,{style:{width:"20px",height:"20px",color:"white"}})}),e.map(l=>{var j,X,z;let M=()=>(0,C.jsx)(te,{label:l.label,icon:l.icon,remove:()=>{r(e.filter(S=>S.id!==l.id))}},l.id);if(l.type==="minRating"){let S=(j=l.numericValue)!=null?j:Number(l.value);return Number.isFinite(S)?(0,C.jsx)(Y,{rating:S,onChange:k=>{let x=e.map(I=>I.id===l.id?{...I,numericValue:k,value:String(k)}:I);r(x)},onRemove:()=>void r(e.filter(k=>k.id!==l.id))},l.id):M()}if(l.type==="starRating"){let S=(X=l.numericValue)!=null?X:Number(l.value);return Number.isFinite(S)?(0,C.jsx)(Y,{star:!0,rating:S,onChange:k=>{let x=e.map(I=>I.id===l.id?{...I,numericValue:k,value:String(k)}:I);r(x)},onRemove:()=>void r(e.filter(k=>k.id!==l.id))},l.id):M()}return l.type==="priceRange"&&l.priceRange?(0,C.jsx)(oe,{priceRange:l.priceRange,currency:n,onChange:S=>{let k=e.map(x=>x.id===l.id?{...x,priceRange:S}:x);r(k)},onRemove:()=>void r(e.filter(S=>S.id!==l.id))},l.id):l.type==="transformed_query"?(0,C.jsx)(ae,{value:l.value,onChange:S=>{let k=e.map(x=>x.id===l.id?{...x,value:S}:x);r(k)},onRemove:()=>void r(e.filter(S=>S.id!==l.id))},l.id):l.type==="selected_restaurant_price_levels"?(0,C.jsx)(ie,{values:(z=l.priceLevels)!=null?z:[],onChange:S=>{let k=e.map(x=>x.id===l.id?{...x,priceLevels:S}:x);r(k)},onRemove:()=>void r(e.filter(S=>S.id!==l.id))},l.id):M()}),(0,C.jsx)("button",{style:{flexShrink:0,padding:"4px 16px",borderRadius:"9999px",cursor:"pointer",fontSize:"14px",userSelect:"none",border:"none",backgroundColor:O?"#e5e5e5":"transparent",transition:"background-color 0.2s"},onClick:s,onMouseEnter:()=>K(!0),onMouseLeave:()=>K(!1),children:a})]}),!m&&(0,C.jsx)("div",{"aria-hidden":"true",style:{...Fe,left:0,background:"linear-gradient(to right, white, transparent)"}}),!v&&(0,C.jsx)("div",{"aria-hidden":"true",style:{...Fe,right:0,background:"linear-gradient(to left, white, transparent)"}}),!m&&(0,C.jsx)("button",{type:"button","aria-label":u,style:{...Re,left:"4px",transform:"translateY(-50%) rotate(180deg)",backgroundColor:y==="prev"?"#e5e5e5":"white"},onClick:()=>g("prev"),onMouseEnter:()=>h("prev"),onMouseLeave:()=>h(null),children:(0,C.jsx)(ee,{style:{width:"20px",height:"20px"}})}),!v&&(0,C.jsx)("button",{type:"button","aria-label":d,style:{...Re,right:"4px",backgroundColor:y==="next"?"#e5e5e5":"white"},onClick:()=>g("next"),onMouseEnter:()=>h("next"),onMouseLeave:()=>h(null),children:(0,C.jsx)(ee,{style:{width:"20px",height:"20px"}})})]})};var pe=require("react"),ue=()=>{let[e,t]=(0,pe.useState)(typeof window!="undefined"?window.innerHeight>window.innerWidth:!1);return(0,pe.useEffect)(()=>{if(typeof window=="undefined")return;let n=()=>{t(window.innerHeight>window.innerWidth)};return window.addEventListener("resize",n),()=>window.removeEventListener("resize",n)},[]),e};var B=require("react/jsx-runtime"),Je={position:"relative",display:"flex",flexDirection:"column",gap:"8px",width:"100%"},et={position:"relative",display:"flex",alignItems:"center",gap:"8px",width:"100%"},tt={position:"relative",display:"flex",alignItems:"center",flex:1,backgroundColor:"white",borderRadius:"24px",border:"1px solid #e5e5e5",padding:"0 16px",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},rt={flex:1,border:"none",outline:"none",fontSize:"16px",backgroundColor:"transparent",color:"#000",padding:"10px"},nt={position:"absolute",right:"16px",top:"50%",transform:"translateY(-50%)"},ot={width:"20px",height:"20px",border:"2px solid #e5e5e5",borderTop:"2px solid #03852e",borderRadius:"50%",animation:"spin 1s linear infinite"},it={position:"absolute",padding:"10px",color:"#737373",pointerEvents:"none",fontSize:"16px"},we=({mapFirst:e,filters:t,value:n,isSearching:i=!1,placeholder:a,onSearch:u,onFilterChange:d,onValueChange:p,showTypingPrompt:r=!0,customTranslations:o,currency:s="USD",style:c,inputStyle:m,containerStyle:v})=>{let[g,b]=(0,q.useState)(""),y=n!==void 0?n:g,h=p||b,P=ue(),{t:R,formatCurrency:O}=E(o),K=R("smartFilter.minRating.suffix"),Z=a||R("smartFilter.typingPrompt"),l=R("smartFilter.nav.previous"),M=R("smartFilter.nav.next"),j=R("smartFilter.clearAll"),X=async x=>{x.preventDefault();let I=y.trim();if(!(!I||i))try{await u(I)}catch(de){console.error("Search error:",de)}},z=(0,q.useCallback)(async(x,I)=>{if(!i)try{await d(x)}catch(de){console.error("Filter change error:",de)}},[i,d]),S=(0,q.useCallback)(()=>{z([])},[z]),k=(0,q.useCallback)(()=>{z([],!0),h("")},[z,h]);return(0,B.jsxs)("div",{style:{...Je,...v},children:[(0,B.jsx)("style",{children:`
          @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
          }
        `}),(0,B.jsx)("form",{onSubmit:X,style:{...et,...c},children:(0,B.jsxs)("div",{style:tt,children:[(0,B.jsx)("input",{type:"text",value:y,onChange:x=>h(x.target.value),disabled:i,style:{...rt,...m},autoComplete:"off","aria-label":"Smart search"}),r&&y.length===0&&!i&&(0,B.jsx)("span",{style:it,children:Z}),i&&(0,B.jsx)("div",{style:nt,children:(0,B.jsx)("div",{style:ot})})]})}),t.length>0&&(0,B.jsx)(ce,{filters:t,isPortrait:P,currency:s,minRatingSuffix:K,clearAllLabel:j,previousFiltersLabel:l,nextFiltersLabel:M,formatCurrency:O,onFilterChange:z,onResetFilters:S,onClearAll:k})]})};var Q=require("react/jsx-runtime");function at(e){let t=f.default.useRef(null),[n,i]=f.default.useState(null),a=f.default.useRef(e);return f.default.useEffect(()=>{a.current=e}),f.default.useEffect(()=>{let u=a.current,d={adapter:null,...u,callbacks:{...u.callbacks,onPropertiesChange:r=>{var o,s;i(c=>c?{...c,properties:r}:null),(s=(o=a.current.callbacks)==null?void 0:o.onPropertiesChange)==null||s.call(o,r)},onSelectedPropertyChange:r=>{var o,s;i(c=>c?{...c,selectedPropertyId:r}:null),(s=(o=a.current.callbacks)==null?void 0:o.onSelectedPropertyChange)==null||s.call(o,r)},onPrimaryTypeChange:r=>{var o,s;i(c=>c?{...c,primary:r}:null),(s=(o=a.current.callbacks)==null?void 0:o.onPrimaryTypeChange)==null||s.call(o,r)},onFiltersChange:r=>{var o,s;i(c=>c?{...c,filters:r}:null),(s=(o=a.current.callbacks)==null?void 0:o.onFiltersChange)==null||s.call(o,r)},onBoundsChange:r=>{var o,s;i(c=>c?{...c,bounds:r}:null),(s=(o=a.current.callbacks)==null?void 0:o.onBoundsChange)==null||s.call(o,r)},onCenterChange:(r,o)=>{var s,c;i(m=>m?{...m,center:r,zoom:o}:null),(c=(s=a.current.callbacks)==null?void 0:s.onCenterChange)==null||c.call(s,r,o)},onZoomChange:r=>{var o,s;i(c=>c?{...c,zoom:r}:null),(s=(o=a.current.callbacks)==null?void 0:o.onZoomChange)==null||s.call(o,r)},onActiveLocationChange:r=>{var o,s;i(c=>c?{...c,activeLocation:r}:null),(s=(o=a.current.callbacks)==null?void 0:o.onActiveLocationChange)==null||s.call(o,r)},onLoadingStateChange:r=>{var o,s;i(c=>c?{...c,initialLoading:r}:null),(s=(o=a.current.callbacks)==null?void 0:o.onLoadingStateChange)==null||s.call(o,r)},onSearchingStateChange:r=>{var o,s;i(c=>c?{...c,isSearching:r}:null),(s=(o=a.current.callbacks)==null?void 0:o.onSearchingStateChange)==null||s.call(o,r)}}},p=new be.MapFirstCore(d);return t.current=p,i(p.getState()),()=>{p.destroy(),t.current=null,i(null)}},[]),{mapFirst:t.current,state:n}}function st(e){let[t,n]=f.default.useState([]);return f.default.useEffect(()=>{if(!e){n([]);return}n(e.getState().properties)},[e]),t}function lt(e){let[t,n]=f.default.useState(null);return f.default.useEffect(()=>{if(!e){n(null);return}n(e.getState().selectedPropertyId)},[e]),t}function ct(e){let[t,n]=f.default.useState("Accommodation");f.default.useEffect(()=>{if(!e){n("Accommodation");return}n(e.getState().primary)},[e]);let i=f.default.useCallback(a=>{e&&(e.setPrimaryType(a),n(a))},[e]);return[t,i]}function pt(e){let[t,n]=f.default.useState(null);f.default.useEffect(()=>{if(!e){n(null);return}n(e.getState().selectedPropertyId)},[e]);let i=f.default.useCallback(a=>{e&&e.setSelectedMarker(a)},[e]);return[t,i]}function ut({mapFirst:e,map:t,maplibregl:n,onMarkerClick:i}){let a=f.default.useRef(!1);f.default.useEffect(()=>{!e||!t||a.current||(e.attachMap(t,{platform:"maplibre",maplibregl:n,onMarkerClick:i}),a.current=!0)},[e,t,n,i])}function dt({mapFirst:e,map:t,google:n,onMarkerClick:i}){let a=f.default.useRef(!1);f.default.useEffect(()=>{!e||!t||a.current||(e.attachMap(t,{platform:"google",google:n,onMarkerClick:i}),a.current=!0)},[e,t,n,i])}function mt({mapFirst:e,map:t,mapboxgl:n,onMarkerClick:i}){let a=f.default.useRef(!1);f.default.useEffect(()=>{!e||!t||a.current||(e.attachMap(t,{platform:"mapbox",mapboxgl:n,onMarkerClick:i}),a.current=!0)},[e,t,n,i])}function ft(e){let t=f.default.useRef(null);return f.default.useEffect(()=>{if(!e)return;let n=new be.MapFirstCore(e);return t.current=n,()=>{n.destroy(),t.current=null}},[e]),t}function gt(e){let[t,n]=f.default.useState(!1),[i,a]=f.default.useState(null);return{search:f.default.useCallback(async d=>{if(!e){let p=new Error("MapFirst instance not available");throw a(p),p}n(!0),a(null);try{return await e.runPropertiesSearch({...d,onError:r=>{let o=r instanceof Error?r:new Error(String(r));a(o)}})}catch(p){let r=p instanceof Error?p:new Error(String(p));throw a(r),r}finally{n(!1)}},[e]),isLoading:t,error:i}}function yt(e){let[t,n]=f.default.useState(!1),[i,a]=f.default.useState(null);return{search:f.default.useCallback(async d=>{if(!e){let p=new Error("MapFirst instance not available");throw a(p),p}n(!0),a(null);try{return await e.runSmartFilterSearch({...d,onError:r=>{let o=r instanceof Error?r:new Error(String(r));a(o)}})}catch(p){let r=p instanceof Error?p:new Error(String(p));throw a(r),r}finally{n(!1)}},[e]),isLoading:t,error:i}}function ht({markers:e}){return(0,Q.jsxs)("div",{style:{fontFamily:"sans-serif",fontSize:14},children:[(0,Q.jsx)("strong",{children:"Markers"}),(0,Q.jsx)("ul",{children:e.map(t=>{var n,i,a,u,d,p;return(0,Q.jsxs)("li",{children:[t.name," \u2014 ",(a=(i=(n=t.location)==null?void 0:n.lat)==null?void 0:i.toFixed(3))!=null?a:"n/a",","," ",(p=(d=(u=t.location)==null?void 0:u.lon)==null?void 0:d.toFixed(3))!=null?p:"n/a"]},String(t.tripadvisor_id))})})]})}0&&(module.exports={Chip,CloseIcon,EditIcon,FilterChips,MarkerDebugList,MinRatingFilterChip,NextIcon,PriceRangeFilterChip,RestaurantPriceLevelChip,SearchIcon,SmartFilter,StarIcon,TransformedQueryChip,createMinRatingFilterLabel,createPriceRangeFilterLabel,formatRatingValue,renderStars,useFilterScroll,useGoogleMapsAttachment,useIsPortrait,useMapFirst,useMapFirstCore,useMapFirstProperties,useMapFirstSelectedProperty,useMapLibreAttachment,useMapboxAttachment,usePrimaryType,usePropertiesSearch,useSelectedMarker,useSmartFilterSearch,useTranslation});
//# sourceMappingURL=index.js.map